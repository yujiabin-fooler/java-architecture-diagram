<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" version="26.0.4" pages="24">
  <diagram name="JVM" id="2t9mX146NmbGCnDUHTSx">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="3aZms3tKnCu_-96OzhPR" name="Lock">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="INzBVYQijLQ276a5OX29" name="RocketMQ">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="3rbBIa1nEl881q_SxKzO" name="Kafka">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="to45CFHyg8FEpK3f40nb" name="Redis">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="dEdjUaIMsK8bMdPi-M4J" name="Zookeeper">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="bea4IE06hsSKhP4AZN4y" name="K8s">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Ki8XQq0x2mf3S2qTC5oE" name="Tomcat">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="nK1uRe_DyTAV3b0eco1S" name="Nacos">
    <mxGraphModel dx="2327" dy="1989" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="0" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="P-abKHr8KpcUQJsMXwjR-27" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="680" y="210" width="550" height="530" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-26" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="-40" y="240" width="410" height="470" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Nacos服务注册流程&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-40" y="-290" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-2" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;1.x版本的实现&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;font&gt;Nacos在1.x版本的时候，服务注册是通过Http接口实现的&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-30" y="-180" width="330" height="50" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-4" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;临时实例&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;临时实例在注册到注册中心之后仅仅只保存在服务端内部一个缓存中，不会持久化到磁盘&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;这个服务端内部的缓存在注册中心届一般被称为服务注册表&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;当服务实例出现异常或者下线之后，就会把这个服务实例从服务注册表中剔除&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;永久实例&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;永久服务实例不仅仅会存在服务注册表中，同时也会被持久化到磁盘文件中&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;当服务实例出现异常或者下线，Nacos只会将服务实例的健康状态设置为不健康，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;并不会对将其从服务注册表中剔除&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;所以这个服务实例的信息你还是可以从注册中心看到，只不过处于不健康状态&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-380" y="429" width="490" height="190" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="40" y="339" width="190" height="111" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-6" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="840" y="324.5" width="160" height="160" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-12" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="680" y="429" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-13" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Controller接口&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="675" y="444" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-15" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Nacos服务端&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="700" y="240" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-17" value="&lt;b&gt;发送Http请求，注册服务信息&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="430" y="360" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-18" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;在服务注册时，发现是临时实例，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;客户端会开启一个5s执行一次的定时任务&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;这个定时任务会构建一个Http请求，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;携带这个服务实例的信息，然后发送到服务端&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="240" y="605" width="260" height="90" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-19" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="145" y="533.5" width="145" height="59" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-24" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;定时任务上报心跳&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="145" y="548" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-28" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="827" y="522" width="190" height="63" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-29" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Nacos客户端&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-30" y="260" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-30" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;（临时实例）&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="75" y="399" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-31" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务实例&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="80" y="369" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-32" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-26" target="P-abKHr8KpcUQJsMXwjR-12">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="310" y="470" as="sourcePoint" />
            <mxPoint x="360" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-33" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-5" target="P-abKHr8KpcUQJsMXwjR-26">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="310" y="470" as="sourcePoint" />
            <mxPoint x="360" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-34" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.334;entryY=0.08;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#007FFF;strokeWidth=2;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-5" target="P-abKHr8KpcUQJsMXwjR-19">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="310" y="470" as="sourcePoint" />
            <mxPoint x="360" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-35" value="&lt;b&gt;开启&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="170" y="474" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-38" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;发送http请求，上报心跳信息&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="400" y="533.5" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-39" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#007FFF;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-19" target="P-abKHr8KpcUQJsMXwjR-27">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="480" y="570" as="sourcePoint" />
            <mxPoint x="530" y="520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-40" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务实例&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="569" y="695" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-41" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="1050" y="261" width="145" height="59" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-42" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;检查心跳定时任务&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1050" y="275.5" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-43" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;更新心跳时间&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="737" y="384.5" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-45" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="890" y="640" width="190" height="63" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-47" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#007FFF;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-12" target="P-abKHr8KpcUQJsMXwjR-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="300" y="573" as="sourcePoint" />
            <mxPoint x="690" y="485" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-49" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;不健康&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="885" y="533.5" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-50" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;删除&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="950" y="646.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-51" value="&lt;b&gt;&lt;font color=&quot;#cc6600&quot;&gt;判断最后一次心跳时间&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="900" y="290" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-52" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;strokeColor=#CC6600;strokeWidth=2;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-41" target="P-abKHr8KpcUQJsMXwjR-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="480" y="550" as="sourcePoint" />
            <mxPoint x="530" y="500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-53" value="&lt;b&gt;&lt;font color=&quot;#cc6600&quot;&gt;超过15秒&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="955" y="484.5" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-54" value="&lt;b&gt;&lt;font color=&quot;#cc6600&quot;&gt;超过30秒&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="880" y="600" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-56" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#CC6600;strokeWidth=2;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-6" target="P-abKHr8KpcUQJsMXwjR-28">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1081" y="321" as="sourcePoint" />
            <mxPoint x="970" y="335" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-57" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#CC6600;strokeWidth=2;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-28" target="P-abKHr8KpcUQJsMXwjR-45">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="930" y="495" as="sourcePoint" />
            <mxPoint x="932" y="532" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-58" value="&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;心跳机制，也可以被称为保活机制，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;作用就是服务实例告诉注册中心我这个服务实例还活着&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="259" y="565" width="310" height="40" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-59" value="&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;心跳机制，也可以被称为保活机制，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;作用就是服务实例告诉注册中心我这个服务实例还活着&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1085" y="329" width="310" height="40" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-60" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;正常情况下，服务关闭了，那么服务会主动向Nacos服务端发送一个服务下线的请求&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;Nacos服务端在接收到请求之后，会将这个服务实例从服务注册表中剔除&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;font-weight: bold; text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold; text-align: left;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;异常情况下，比如出现网络问题，可能导致这个注册的服务实例无法提供服务，处于不可用状态，也就是不健康&lt;/div&gt;&lt;div style=&quot;font-weight: bold; text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;而此时在没有任何机制的情况下，服务端是无法知道这个服务处于不可用状态&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;Nacos、Eureka，就会用心跳机制来判断这个服务实例是否能正常&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;在Nacos中，心跳机制仅仅是针对临时实例来说的，临时实例需要靠心跳机制来保活&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;心跳机制实现是通过客户端和服务端各存在的一个定时任务来完成的&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;在服务注册时，发现是临时实例，客户端会开启一个5s执行一次的定时任务&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;这个定时任务会构建一个Http请求，携带这个服务实例的信息，然后发送到服务端&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;在Nacos服务端也会开启一个定时任务，默认也是5s执行一次，去检查这些服务实例最后一次心跳的时间，&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;也就是客户端最后一次发送Http请求的时间&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;当最后一次心跳时间超过15s，但没有超过30s，会把这服务实例标记成不健康&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;当最后一次心跳超过30s，直接把服务从服务注册表中剔除&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-40" y="-90" width="640" height="260" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-61" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;在Nacos服务端也会开启一个定时任务，默认也是5s执行一次，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;去检查这些服务实例最后一次心跳的时间，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;也就是客户端最后一次发送Http请求的时间&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1110" y="369.5" width="390" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-62" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="-70" y="1442" width="410" height="470" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-63" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="670" y="1421" width="550" height="530" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-64" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Nacos客户端&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-50" y="1452" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-65" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Nacos服务端&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="690" y="1442" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-66" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;2.x版本的实现&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot;&gt;&lt;b style=&quot;&quot;&gt;&lt;font&gt;Nacos在1.x版本的时候，服务注册是通过Http接口实现的&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-35" y="960" width="330" height="50" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-67" value="&lt;div&gt;&lt;b&gt;心跳机制：&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;2.x版本之后，由于通信协议改成了gRPC，客户端与服务端保持长连接，所以2.x版本之后它是利用这个gRPC长连接本身的心跳来保活&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;连接本身的心跳机制&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;一旦这个连接断开，服务端就会认为这个连接注册的服务实例不可用，之后就会将这个服务实例从服务注册表中提出剔除&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;除了连接本身的心跳之外，&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;Nacos还有服务端的一个主动检测机制&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Nacos服务端也会启动一个定时任务，默认每隔3s执行一次&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;这个任务会去检查超过20s没有发送请求数据的连接&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;一旦发现有连接已经超过20s没发送请求，那么就会向这个连接对应的客户端发送一个请求&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;如果请求不通或者响应失败，此时服务端也会认为与客户端的这个连接异常，从而将这个客户端注册的服务实例从服务注册表中剔除&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;所以对于2.x版本，主要是两种机制来进行保活：&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;连接本身的心跳机制，断开就直接剔除服务实例&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Nacos主动检查机制，服务端会对20s没有发送数据的连接进行检查，出现异常时也会主动断开连接，剔除服务实例&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-45" y="1025" width="760" height="200" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-69" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="35" y="1511" width="190" height="111" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-70" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="865" y="1500" width="160" height="207" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-71" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务实例&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="85" y="1526.5" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-73" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;（临时实例）&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="75" y="1572" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-74" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;strokeWidth=2;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-69">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="1512" as="sourcePoint" />
            <mxPoint x="665" y="1539" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-75" value="&lt;b&gt;gRPC长连接本身的心跳来保活&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="410" y="1510" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-76" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="1055" y="1441" width="145" height="59" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-77" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;检查心跳定时任务&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1065" y="1452" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-78" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;启动一个定时任务，默认每隔3s执行一次&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1065" y="1500" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-83" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0cee2;strokeColor=#56517e;" vertex="1" parent="1">
          <mxGeometry x="842" y="409.5" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-84" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务实例&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="885" y="414.5" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-85" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务注册表&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="860" y="334" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-86" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务注册表&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="895" y="1511" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-88" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" vertex="1" parent="1">
          <mxGeometry x="890" y="1582" width="120" height="38" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-89" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务实例&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="905" y="1582" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-90" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#007FFF;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-76" target="P-abKHr8KpcUQJsMXwjR-70">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="1512" as="sourcePoint" />
            <mxPoint x="580" y="1462" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-91" value="&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;向这个连接对应的客户端发送一个请求&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="485" y="1540" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-92" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.013;exitY=0.324;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#007FFF;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-70" target="P-abKHr8KpcUQJsMXwjR-69">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="1652" as="sourcePoint" />
            <mxPoint x="580" y="1602" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-93" value="&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;请求不通或者响应失败&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="485" y="1602" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-94" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#007FFF;strokeWidth=2;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-69" target="P-abKHr8KpcUQJsMXwjR-70">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="1652" as="sourcePoint" />
            <mxPoint x="580" y="1602" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-95" value="" style="whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="1">
          <mxGeometry x="1065" y="1648" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-96" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;删除&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1125" y="1648" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-97" value="&lt;b&gt;&lt;font&gt;判断是否连接断开&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="697" y="1602" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-98" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;strokeWidth=2;strokeColor=#007FFF;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-88" target="P-abKHr8KpcUQJsMXwjR-95">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="1792" as="sourcePoint" />
            <mxPoint x="580" y="1742" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-99" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.006;entryY=0.227;entryDx=0;entryDy=0;exitX=0;exitY=0.25;exitDx=0;exitDy=0;strokeWidth=2;entryPerimeter=0;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-70" target="P-abKHr8KpcUQJsMXwjR-63">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="1792" as="sourcePoint" />
            <mxPoint x="580" y="1742" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-100" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;检查超过20s没有发送请求数据的连接&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="850" y="1552" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-101" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.374;entryY=0.024;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeWidth=2;entryPerimeter=0;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-88" target="P-abKHr8KpcUQJsMXwjR-96">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="1782" as="sourcePoint" />
            <mxPoint x="570" y="1732" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-102" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;服务实例从服务注册表中提出剔除&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1020" y="1612" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-103" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;健康检查的机制&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;心跳机制仅仅是临时实例用来保护的机制，&lt;span style=&quot;background-color: initial;&quot;&gt;而对于永久实例来说，一般来说无法主动上报心跳&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;就比如说MySQL实例，肯定是不会主动上报心跳到Nacos的，所以这就导致无法通过心跳机制来保活&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;Nacos通过一种叫健康检查的机制去判断服务实例是否活着，&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;b&gt;所谓的健康检查就是服务端主动向服务实例发送请求，去探测服务实例是否活着&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-70" y="1280" width="770" height="70" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-104" value="&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;心跳机制，也可以被称为保活机制，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;作用就是服务实例告诉注册中心我这个服务实例还活着&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="5" y="1617" width="310" height="40" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-105" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="55" y="1751" width="190" height="111" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-106" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务实例&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="100" y="1751" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-107" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;（永久实例）&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="90" y="1791.5" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-108" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" vertex="1" parent="1">
          <mxGeometry x="729.5" y="1817" width="145" height="59" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-109" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" vertex="1" parent="1">
          <mxGeometry x="895" y="1648" width="120" height="38" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-110" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务实例&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="900" y="1652" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-111" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;健康检查跟心跳机制刚好相反，心跳机制是服务实例向服务端发送请求&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;而所谓的健康检查就是服务端主动向服务实例发送请求，去探测服务实例是否活着&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-45" y="1826.5" width="460" height="40" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-112" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;健康检查任务&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="745" y="1826.5" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-113" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;任务每次执行时间间隔会在2000~7000毫秒&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;任务触发的时候，会根据设置的健康检查的方式执行不同的逻辑&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;TCP的方式就是根据服务实例的ip和端口去判断是否能连接成功，如果连接成功，就认为健康，反之就任务不健康&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;div style=&quot;text-align: left;&quot;&gt;HTTP的方式就是向服务实例的ip和端口发送一个Http请求，请求路径是需要设置的，如果能正常请求，说明实例健康，反之就不健康&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;MySQL的方式是一种特殊的检查方式，他可以执行下面这条Sql来判断数据库是不是主库&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="655" y="1900" width="730" height="100" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-114" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;exitX=0.573;exitY=0.073;exitDx=0;exitDy=0;exitPerimeter=0;strokeColor=#666666;strokeWidth=2;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-108" target="P-abKHr8KpcUQJsMXwjR-70">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="605" y="1830" as="sourcePoint" />
            <mxPoint x="655" y="1780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-115" value="&lt;font color=&quot;#666666&quot;&gt;&lt;b&gt;根据服务实例的ip和端口去判断是否能连接成功&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="700" y="1740" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-116" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;exitX=-0.019;exitY=0.538;exitDx=0;exitDy=0;exitPerimeter=0;strokeColor=#666666;strokeWidth=2;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-110" target="P-abKHr8KpcUQJsMXwjR-105">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="605" y="1830" as="sourcePoint" />
            <mxPoint x="655" y="1780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-117" value="&lt;b&gt;&lt;font color=&quot;#666666&quot;&gt;根据服务实例的ip和端口去判断是否能连接成功&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="404" y="1686" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-118" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.006;entryY=1.11;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=#666666;strokeWidth=2;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-105" target="P-abKHr8KpcUQJsMXwjR-110">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="605" y="1830" as="sourcePoint" />
            <mxPoint x="655" y="1780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-119" value="&lt;b&gt;&lt;font color=&quot;#666666&quot;&gt;能正常请求，说明实例健康，反之就不健康&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="415" y="1770" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-120" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#666666;strokeWidth=2;" edge="1" parent="1" source="P-abKHr8KpcUQJsMXwjR-109" target="P-abKHr8KpcUQJsMXwjR-122">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="605" y="1830" as="sourcePoint" />
            <mxPoint x="655" y="1780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-121" value="&lt;b&gt;&lt;font color=&quot;#666666&quot;&gt;设置为不健康，并不会对将其从服务注册表中剔除&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="980" y="1721" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-122" value="" style="whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" vertex="1" parent="1">
          <mxGeometry x="1040" y="1757" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-123" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;不健康&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1065" y="1772" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-124" value="&lt;div&gt;&lt;b&gt;服务发现就是指当有服务实例注册成功之后，其它服务可以发现这些服务实例&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Nacos提供了两种发现方式：&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;主动查询&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;/span&gt;服务订阅&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;主动查询就是指客户端主动向服务端查询需要关注的服务实例，也就是拉（pull）的模式&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;服务订阅就是指客户端向服务端发送一个订阅服务的请求，当被订阅的服务有信息变动就会主动将服务实例的信息推送给订阅的客户端，本质就是推（push）模式&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;一般来说都是选择使用订阅的方式，这样一旦有服务实例数据的变动，客户端能够第一时间感知，&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;默认就是使用订阅的方式&lt;/b&gt;&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;，&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;服务查询其实两者实现都很简单&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;1.x整体就是发送Http请求去查询服务实例，2.x只不过是将Http请求换成了gRPC的请求&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;服务端对于查询的处理过程都是一样的，从服务注册表中查出符合查询条件的服务实例进行返回&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;服务订阅，两者的机制就稍微复杂一点&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-60" y="3534" width="910" height="220" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-125" value="&lt;span style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Nacos服务发现流程&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-160" y="3507" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-126" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;1.x服务订阅实现&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;服务订阅的处理逻辑大致会有以下三步：&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;第一步，客户端在启动的时候，会去构建一个叫PushReceiver的类&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;font-weight: bold; background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;这个类会去创建一个UDP Socket，端口是随机的，&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;通过UDP的方式接收服务端推送的数据的&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;第二步，调用NamingService#subscribe来发起订阅时，会先去服务端查询需要订阅服务的所有实例信息&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;之后会将所有服务实例数据存到客户端的一个内部缓存中&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;在查询的时候，会将这个UDP Socket的端口作为一个参数传到服务端&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;服务端接收到这个UDP端口后，后续就通过这个端口给客户端推送服务实例数据&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;第三步，会为这次订阅开启一个不定时执行的任务&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;这个任务会去从服务端查询订阅的服务实例信息，然后更新内部缓存&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-105" y="3769" width="580" height="160" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-127" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-60" y="4044" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-128" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-45" y="4147" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-129" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="310" y="4324" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-130" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="355" y="4204" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-131" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="315" y="3994" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-132" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="279" y="4104" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-133" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="95" y="4364" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-134" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-10" y="3944" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-135" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PushReceiver&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;接收服务实例变动数据&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-40" y="4049" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-136" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;UDP&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-20" y="4164" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-137" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Nacos服务端&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="320" y="4009" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-138" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;校对服务&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;实例缓存&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;定时服务&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="290" y="4099" width="90" height="70" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-139" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;客户端&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务实例缓存&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="355" y="4207" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-140" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;订阅服务&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="325" y="4339" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-141" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;EventListener&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务实例变动监听器&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="90" y="4369" width="170" height="50" as="geometry" />
        </mxCell>
        <mxCell id="P-abKHr8KpcUQJsMXwjR-142" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;客户端启动&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="5" y="3959" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="iV4UqZKM_R4so0krWqlj-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Nacos注册请求的核心流程&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-200" y="2160" width="290" height="40" as="geometry" />
        </mxCell>
        <mxCell id="iV4UqZKM_R4so0krWqlj-2" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-160" y="2240" width="560" height="640" as="geometry" />
        </mxCell>
        <mxCell id="iV4UqZKM_R4so0krWqlj-3" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="2240" width="560" height="640" as="geometry" />
        </mxCell>
        <mxCell id="iV4UqZKM_R4so0krWqlj-4" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-161" y="2960" width="560" height="640" as="geometry" />
        </mxCell>
        <mxCell id="iV4UqZKM_R4so0krWqlj-5" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="2960" width="560" height="640" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="Xru0-54Ad8YGyxOXP3Rs" name="MySQL">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="7AmPBM2Kbmro1uvyklTl" name="Seata">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="XmrDIJORuayguxtf7ANS" name="Http/Tcp">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="DeLPxRICUAbuLK_Ab4P_" name="Netty">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="KSdd4XFeKHf7QTBwpThp" name="Docker">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="YjA67cmnY33n5J0nyUQS" name="Netty">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="kmInuTYheEhczgABeFXV" name="ES">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="5ga9y6k-JnaVqjqAY7p4" name="Linux">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="VdeBCv5IgB3pJIlM0GZR" name="Dubbo">
    <mxGraphModel dx="7796" dy="5063" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-12" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="220" y="-840" width="520" height="310" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-19" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="-695" y="-840" width="600" height="320" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-21" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="-90" y="-1310" width="340" height="330" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-30" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="955" width="476" height="535" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-29" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="720" width="466" height="160" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-27" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-240" y="570" width="400" height="920" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-28" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="334" y="560" width="466" height="120" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-1" value="&lt;font style=&quot;font-size: 22px;&quot;&gt;&lt;b&gt;一次RPC请求在Dubbo中经历整个核心流程&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-295" y="320" width="450" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-3" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="430" y="1148" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-4" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="530" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-5" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="190" y="460" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-6" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="230" y="380" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-7" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-135" y="1220" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-8" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-130" y="905" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-9" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-150" y="775" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-10" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-135" y="660" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-11" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="430" y="-735" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-13" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;" vertex="1" parent="1">
          <mxGeometry x="-40.710000000000036" y="-1180" width="240" height="160" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-15" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-345" y="1150" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-16" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-340" y="1090" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-17" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-140" y="1130" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-18" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-135" y="1030" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-24" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="-15" y="-1102" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-25" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="195" y="-760" width="175" height="102" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-26" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="455" y="1400" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-32" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;动态代理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-70" y="670" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-33" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;InvokerInvacationHandler&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;参数封装&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;触发RPC链路调用&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-150" y="760" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-34" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ClusterFilter责任链&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-125" y="915" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-35" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Filter责任链&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-95" y="1040" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-36" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;通信协议&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-285" y="1108" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-37" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;序列化协议&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-320" y="1168" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-38" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;请求数据封装&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-95" y="1140" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-39" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;请求字节数据序列化&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-135" y="1220" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-40" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;集群策略&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="260" y="380" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-41" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;负载均衡策略&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="205" y="470" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-42" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;路由策略&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="180" y="540" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-43" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;请求字节数据反序列化&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="430" y="1158" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-45" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="1270" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-46" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Filter责任链&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="490" y="1280" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-47" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;接口实现类&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="508" y="1410" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-48" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="428" y="1210" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-49" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;请求数据封装&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="473" y="1220" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-50" value="&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;反序列化就是根据序列化协议将字节序列转换成数据，也被称为解码&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(255, 0, 0); background-color: initial;&quot;&gt;当通信协议使用Dubbo协议时，Dubbo支持以下几种序列化协议：&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Java原生&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Hessian2&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Fastjson2&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="640" y="1220" width="380" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-51" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;通信协议，讲的简单点就是发送方把需要发送的数据按照一定的格式组装好之后再发送给接收方&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;Dubbo需要发送数据包括调用但不限于接口全限定名、调用的方法名、调用参数等等&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;而接收方在获取到数据时再使用对应的格式去解析，从而获取到请求数据&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;Dubbo默认使用的通信协议是Dubbo自己的写的，叫做Dubbo协议&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;除了Dubbo协议之外，Dubbo还支持以下几种通信协议：&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Rest&amp;nbsp; 也就是&lt;/font&gt;&lt;/b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;Http协议&lt;/span&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(255, 0, 0); background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;当使用这种协议的时候，Dubbo在启动的时候会去创建一个Http的服务&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(255, 0, 0); background-color: initial;&quot;&gt;默认使用的是Jetty，当然也支持切换成Tomcat&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;gRPC&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Dubbo其实不仅仅是一个RPC框架，它其实是一套微服务解决方案，会承担更多的服务治理相关的逻辑&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;而gRPC的定位是通信协议与实现，是一款纯粹的RPC框架&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Triple&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Triple完全兼容gRPC协议，可同时运行在HTTP/1和HTTP/2传输协议之上&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="690" y="1340" width="590" height="200" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-52" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Filter和ClusterFilter有什么区别&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;都继承同一个接口BaseFilter，ClusterFilter作用在路由和负载均衡前，而Filter在路由和负载均衡后，&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Filter是跟服务实例走的&lt;/font&gt;&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;在调用每个服务实例之前，Filter一定会都会重新调用一遍，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;对于ClusterFilter，在整个调用过程中它仅仅只会执行一次&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="600" y="1070" width="590" height="70" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-53" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;负载均衡就是说，面对多个服务实例，我们应该按照何种算法选择一个供我们调用&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Dubbo提供了以下几种负载均衡策略：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;随机（random），随机选择一个&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;轮询（roundrobin），每次调用按照顺序选择一个&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;最少活跃优先（leastactive），优先选择被最少调用的服务&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;最短响应优先（shortestresponse），优先选择响应时间断的服务调用&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;一致性Hash（consistenthash）&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;在没有指定的情况下，默认使用的就是随机（random）算法&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="440" y="380" width="460" height="140" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-54" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;路由策略其实是选择允许调用哪些服务实例&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;因为并不是所有的服务实例都符合调用要求，&lt;span style=&quot;background-color: initial;&quot;&gt;Dubbo提供了一种叫tag的路由策略&lt;/span&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;灰度的服务提供者可以指定自己的tag属性为gray（灰色的意思），而对于处于灰度的消费者，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;只需要指定消费tag为gray的服务提供者，在真正调用前就会通过tag路由的方式过滤出处于灰度的服务提供者，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;除了tag路由策略之外，Dubbo还提供了以下几种路由策略&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;条件路由，可以指定某些条件下可以调用哪些服务实例&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;脚本路由，可以写一段JavaScript脚本，更加灵活地选择哪些服务实例&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="820" y="520" width="610" height="110" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-55" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;集群调用逻辑就是解决多服务实例下，应该怎样合理地调用服务实例&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Dubbo提供了以下几种集群调用逻辑：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;广播，也就是每个服务都调用（broadcast）&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;调用前会去判断服务是不是可用，如果可用，那么就直接进行调用（available）&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;调用失败，会开启定时任务进行重试调用，最大重试3次（failback）&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;调用失败就直接抛出异常（failfast）&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;调用失败直接调用其它服务进行重试，故障转移（failover）&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;调用失败不会抛异常，而是直接返回（failsafe）&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;同时调用指定个数的服务，直接最快返回结果当做这个调用的结果（forking）&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;调用每个服务，合并服务返回的数据作为调用的结果，结果怎么合并需要我们自定义相关逻辑（mergeable）&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;在默认情况下使用的就是failover，也就是出现异常时会调用其它的服务再返回结果&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="260" y="140" width="630" height="190" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-56" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;ClusterFilter本质是一种责任链模式，是Dubbo提供的一个重要扩展点&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;通过实现invoke方法对请求进行自定义预处理操作&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Dubbo默认提供了几种实现&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;ConsumerContextFilter&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;MonitorClusterFilter&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;RouterSnapshotFilter&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;ZoneAwareFilter&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;拿MonitorClusterFilter来说&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;这个实现主要是去统计每个接口的每个方法调用成功多少次，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;调用失败多少次等等调用的信息&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-620" y="828" width="400" height="190" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-57" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;在Dubbo中，调用消费者动态代理的时候，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;不论是JDK动态代理还是使用Javassist方式生成动态代理&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;最终都会走到InvokerInvocationHandler这个InvocationHandler的实现,&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;整个RPC调用的起点就是invoke方法的实现&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;将RPC调用的接口、方法名、参数封装到RpcInvocation中&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;接着会走到下面这行代码&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;invoker.invoke(rpcInvocation)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;触发RPC调用的整个核心流程&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-745" y="688" width="410" height="130" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-58" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;消费者想引用远程服务，可以通过@DubboReference注解触发引用的逻辑&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;消费者引用也会去做两件事&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;第一件事我们都知道，那就是创建接口的动态代理&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;由于消费者使用的DemoService是一个接口，所以会给DemoService创建一个动态代理&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;这个动态代理最终会发送RPC请求&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Dubbo支持两种动态搭理生成方式：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;JDK动态搭理&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Javassist动态生成字节码&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;默认使用的Javassist动态生成字节码的方式&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;除了创建动态搭理之外，还会去获取服务提供者的接口详细信息&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;上面一节说了，可以从元数据中心或者是服务提供者本地缓存中获取到&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;当获取到接口详情数据之后，会为之后的RPC调用做一些准备工作&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;比如如果接口使用的是Dubbo通信协议的话，准备工作就是消费者会跟服务提供者机器建立长连接&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-920" y="260" width="540" height="340" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-59" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;服务提供者暴露&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;@DubboService&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;，主要就是指在项目启动时服务提供者去做的两件事&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;第一件事就是，由于需要对外提供调用服务，接受消费者的请求&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;所以在启动时需要根据使用协议，以及协议对应的端口启动一个对应的服务,&lt;span style=&quot;background-color: initial;&quot;&gt;第二件事是将每个接口的详细信息，&lt;/span&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;包括接口的全限定名、方法名称、方法参数、服务器的ip、端口、通信协议等等按照一定的格式组装好&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;存放到元数据中心和服务提供者本地缓存中&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;总的来说，服务提供者暴露主要就是这两件事：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;根据接口使用协议和端口开启服务，对外提供接口访问&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;将当前服务支持的接口，以及每个接口使用的协议、端口、服务器ip等信息存到元数据中心或者本地缓存，供消费者获取&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="360" y="765" width="660" height="190" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-60" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务提供者2&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="345" y="738" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-61" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;提供一个接口给消费者远程调用&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="445" y="738" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-63" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务消费者&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-225" y="580" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-64" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;调用生产者提供的接口&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-130" y="580" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-65" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Dubbo3.x应用级服务注册实现原理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1830" y="-1810" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-66" value="&lt;div&gt;&lt;b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 16px;&quot;&gt;应用级服务注册&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;在SpringCloud环境下，服务实例在启动的时候会将自身的服务名、IP、端口外加一些其它的数据注册到注册中心&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;但是在这一过程中并不会将服务的接口信息注册到注册中心&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;所以对于服务调用者（消费者）来说，它也只能从注册中心获取到服务名、IP和端口这些信息，无法获取到服务提供者提供了哪些接口&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;这就是应用级服务注册&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-990" y="-1830" width="730" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_oIDEhX_wi8-7EQFgxBp-67" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;接口级服务注册&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;接口级服务注册就是把每个单独的接口看成一个服务进行注册&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;所以服务在启动的时候，每个接口都将作为单独的服务注册到注册中心&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;也就是说，有几个接口，就有几个服务，就注册几次&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Dubbo在2.x版本的时候就是使用的接口级服务注册&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;Dubbo在3.x版本之后放弃使用接口级服务注册，转而使用应用级服务注册，主要包括以下两点原因：&lt;/div&gt;&lt;div style=&quot;&quot;&gt;第一点就是接口级服务注册会增加注册中心的压力&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;压力主要来自三个部分：&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;服务注册的压力&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;服务变更通知的压力&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;服务数据存储的压力&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-970" y="-1718" width="560" height="210" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务提供者&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="240" y="-830" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-2" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务消费者&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-690" y="-830" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-3" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;注册中心&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1950" y="-955" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-4" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;元数据中心&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-25.000000000000036" y="-1169" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-5" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-40.710000000000036" y="-1180" as="sourcePoint" />
            <mxPoint x="199.28999999999996" y="-1180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-6" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-40.710000000000036" y="-1020" as="sourcePoint" />
            <mxPoint x="199.28999999999996" y="-1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-7" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=3;rounded=0;strokeColor=#007FFF;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-40.710000000000036" y="-1180" as="sourcePoint" />
            <mxPoint x="-40.710000000000036" y="-1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-8" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="199.28999999999996" y="-1180" as="sourcePoint" />
            <mxPoint x="199.28999999999996" y="-1020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-9" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务实例信息&amp;nbsp;&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="5" y="-1240" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-10" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;接口服务限定名：服务名&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-20" y="-1132" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-11" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;接口详情数据&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="15" y="-1092" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-12" value="&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;服务提供者：通过@DubboService表明&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;提供一个接口给消费者远程调用&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="285" y="-800" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-13" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;服务消费者：调用生产者提供的接口&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;通过@DubboReference注解表明消费&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-695" y="-792" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-14" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;对于消费者来说，还是必须得知道接口的详情数据，包括接口所在服务器的IP、端口、通信协议等等&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;但是现在注册中心只有应用级服务信息，并没有接口级服务信息，怎么获取呢&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Dubbo将整个实现总共拆为两步：&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;消费者需要先获取消费的接口所在的服务名&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;消费者通过获取到服务名再去获取接口详情数据&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Dubbo也给我们提供了3种配置方式，让我们可以手动指定接口所在的服务&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;第一种，使用@DubboReference#providedBy属性配置&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;第二种，通过消费者配置文件配置接口所在的服务名&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;第三种，在消费者配置文件注册中心的配置中加上接口所在的服务名&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;加了这些配置的时候，Dubbo就认为消费的接口就在这些服务中&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;除了这种配置的方式之外，Dubbo还提供了第二种方式，叫做服务名自动探测&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;服务提供者在启动的时候，将接口全限定名以及当前服务名的映射关系存到一个中间的地方&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;而消费者只需要根据消费的接口到这个中间的地方就可以查到接口所在的服务名&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;这个中间的地方在Dubbo中被称为元数据中心&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;元数据中心仅仅是一个概念上的东西，只要可以存数据，都可以被称为元数据中心&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Dubbo默认支持三种组件作为元数据中心：&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Redis&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Nacos&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Zookeeper&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;当你使用Nacos或者Zookeeper作为注册中心时，Dubbo会默认使用它们作为元数据中心（当然也可以禁用）&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;如果项目中没有使用元数据中心，那么只能使用第一种手动配置的方式&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;知道消费者所消费的接口在哪个服务上&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;但是仅仅知道接口在哪个服务上还是无法调用&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;因为必须得知道接口使用IP、端口、通信协议等&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;所以消费者此时就会进行第二步，获取接口详情数据&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Dubbo也提供了两种获取方式&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;第一种，从服务提供者本地缓存中获取，这种方式也是默认的&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;对于接口服务提供者来说，它会将接口详情数据存到本地缓存&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;所以消费者可以从服务本地缓存中获取&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;服务提供者在启动的时候，会去启动并暴露一个接口是MetadataServiceRPC接口服务&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;之后在注册服务实例的时候，会将暴露出去的MetadataService这个RPC接口的协议和端口一起存到注册中心&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;由于经过第一步之后，消费者已经知道接口在哪个服务上了&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;所以就可以从注册中心中获取这个服务对应的服务实例信息&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;也就能知道MetadataService这个RPC接口所在的服务器IP、端口、通信协议&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;之后消费者就可以通过这些信息，构建RPC请求，从服务提供者获取到接口的详细数据&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;默认是从本地缓存中获取&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;消费者在获取接口详情数据时，会先判断dubbo.metadata.storage-type这个属性值是多少&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;如果是local，那么就按照前面说的从服务提供者本地缓存中获取&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;如果改成remote，第二种情况也会用到元数据中心&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;服务提供者在启动的时候，会将接口的详情数据全部存到元数据中心&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;只需要从元数据中心就可以获取到接口的详情数据了&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1780" y="-1692" width="600" height="990" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-16" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;服务提供者在启动的时候，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;会将接口的详情数据全部存到元数据中心&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="280" y="-960" width="240" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-17" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;本地缓存&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="430" y="-730" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-18" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="437" y="-680" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-19" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;接口详情数据&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="475" y="-670" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-20" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;消费者知道所消费的接口在哪个服务上的两种方式：&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;手动配置，有三种不同的方式&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;@DubboReference#providedBy属性配置&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;通过消费者配置文件配置接口所在的服务名&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;在消费者配置文件注册中心的配置中加上接口所在的服务名&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;自动探测&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;服务提供者启动时将自身所提供的接口和服务名的映射关系存到元数据中心&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;服务消费者在启动的时候，会去从元数据中心查到自己所消费的接口属于哪个服务&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;自动探测方式需要引入元数据中心，使用Nacos或者Zookeeper作为注册中心时，&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;Dubbo默认会使用它们作为元数据中心&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-920" y="-750" width="460" height="170" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-21" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;启动时将自身所提供的接口和服务名的映射关系存到元数据中心&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="280" y="-1032" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-22" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;默认Nacos或者Zookeeper&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="10" y="-1150" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-23" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;MetadataService&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;RPC接口&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="199.29" y="-730" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-24" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="-210" y="-760" width="160" height="102" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-25" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;MetadataService&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;RPC接口&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-195" y="-730" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-26" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;从注册中心中获取这个服务对应的服务实例信息&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;MetadataService这个RPC接口所在的服务器IP、端口、通信协议&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-510" y="-990" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-27" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;MetadataService这个RPC接口所在的服务器IP、端口、通信协议&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="280" y="-1002" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-28" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="1">
          <mxGeometry x="-552" y="-720" width="292" height="80" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-29" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;dubbo.metadata.storage-type&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-538" y="-695" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-30" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;local&amp;nbsp; /&amp;nbsp; remote&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-465" y="-680" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-31" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;消费者在获取接口详情数据时，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;会先判断dubbo.metadata.storage-type这个属性值&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-430" y="-635" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-32" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;从服务提供者本地缓存中获取&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-25" y="-688" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-33" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;从元数据中心就可以获取到接口的详情数据&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-320" y="-890" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-34" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;先根据第一步获取到的服务名从服务注册中心获取服务实例信息&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-505" y="-1020" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-35" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeColor=#0000FF;strokeWidth=3;" edge="1" parent="1" source="_oIDEhX_wi8-7EQFgxBp-19">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-300" y="-840" as="sourcePoint" />
            <mxPoint x="-90" y="-1140" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-395" y="-1140" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-37" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;元数据中心仅仅是一个概念上的东西，只要可以存数据，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;都可以被称为元数据中心&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;Dubbo默认支持三种组件作为元数据中心：&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;Redis&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Nacos&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Zookeeper&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-40" y="-1025" width="320" height="100" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-38" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.455;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeColor=#0066CC;strokeWidth=3;" edge="1" parent="1" source="_oIDEhX_wi8-7EQFgxBp-12" target="_oIDEhX_wi8-7EQFgxBp-21">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="220" y="-840" as="sourcePoint" />
            <mxPoint x="270" y="-890" as="targetPoint" />
            <Array as="points">
              <mxPoint x="480" y="-1160" />
              <mxPoint x="380" y="-1160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-39" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;1&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="265" y="-1032" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-40" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;2&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-523" y="-1020" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-41" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#0000FF;strokeWidth=2;" edge="1" parent="1" source="_oIDEhX_wi8-7EQFgxBp-25" target="kh3kQsugT_p81Ak_PhRp-24">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="120" y="-680" as="sourcePoint" />
            <mxPoint x="-40" y="-530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-42" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#0000CC;strokeWidth=2;" edge="1" parent="1" source="kh3kQsugT_p81Ak_PhRp-28" target="_oIDEhX_wi8-7EQFgxBp-13">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="120" y="-680" as="sourcePoint" />
            <mxPoint x="170" y="-730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-43" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;3&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-400" y="-640" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-44" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.935;exitY=0.371;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitPerimeter=0;strokeColor=#0000FF;strokeWidth=2;" edge="1" parent="1" source="kh3kQsugT_p81Ak_PhRp-28" target="kh3kQsugT_p81Ak_PhRp-24">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="120" y="-680" as="sourcePoint" />
            <mxPoint x="170" y="-730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-45" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;strokeColor=#0000FF;strokeWidth=2;" edge="1" parent="1" source="kh3kQsugT_p81Ak_PhRp-18" target="_oIDEhX_wi8-7EQFgxBp-25">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="120" y="-680" as="sourcePoint" />
            <mxPoint x="170" y="-730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-46" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.028;entryY=0.338;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#0000FF;strokeWidth=2;" edge="1" parent="1" source="_oIDEhX_wi8-7EQFgxBp-25" target="_oIDEhX_wi8-7EQFgxBp-11">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="120" y="-680" as="sourcePoint" />
            <mxPoint x="170" y="-730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-47" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;strokeColor=#0000FF;strokeWidth=2;" edge="1" parent="1" source="kh3kQsugT_p81Ak_PhRp-24" target="_oIDEhX_wi8-7EQFgxBp-25">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="120" y="-680" as="sourcePoint" />
            <mxPoint x="170" y="-730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-48" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#0000CC;strokeWidth=2;" edge="1" parent="1" source="_oIDEhX_wi8-7EQFgxBp-24">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="120" y="-680" as="sourcePoint" />
            <mxPoint x="-380" y="-717" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-49" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;strokeColor=#0000FF;strokeWidth=2;" edge="1" parent="1" source="kh3kQsugT_p81Ak_PhRp-24">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="110" y="-840" as="sourcePoint" />
            <mxPoint x="-260" y="-680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-50" value="&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;消费者会根据所配置的属性值通过对应的方式获取到接口的详情数据&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;之后就可以基于这些接口的详情信息发送接口级别的RPC调用了&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-425" y="-585" width="380" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-51" value="&lt;div&gt;1、Spring 扫描到 @DubboReference 标注的属性，在 BeanPostProcessor 中解析该注解，并且为该属性生成一个动态代理对象，&lt;/div&gt;&lt;div&gt;并且将这个动态代理对象赋值给这个属性&lt;/div&gt;&lt;div&gt;2、当【调用者】调用动态代理对象的方法时，会进入到动态代理的拦截器中，在拦截器中会发起 RPC 调用&lt;/div&gt;&lt;div&gt;3、拦截器中执行 RPC 调用就是先根据接口名、方法名去注册中心拿到【提供者】的 ip+port，这样就可以通过 Netty 和【提供者】建立网络通信&lt;/div&gt;&lt;div&gt;4、建立网络通信之后，【调用者】将需要调用的接口、方法信息通过 Netty 发送给【提供者】，【提供者】就知道去执行哪个方法了，&lt;/div&gt;&lt;div&gt;当【提供者】执行完对应的方法之后，将执行结果再通过 Netty 返回给【调用者】，至此，【调用者】就完成了一次服务调用的过程&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-950" y="140" width="790" height="100" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-53" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务提供者1&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="350" y="570" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-54" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务提供者3&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="325" y="970" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-55" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;服务提供者启动，开启Netty服务，创建Zookeeper客户端，向注册中心注册服务&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="350" y="600" width="450" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-56" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;服务消费者启动，通过Zookeeper向注册中心获取服务提供者列表，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;与服务提供者通过Netty建立长连接；&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-250" y="605" width="380" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-57" value="&lt;font color=&quot;#007fff&quot; style=&quot;&quot;&gt;&lt;b&gt;服务消费者通过接口开始远程调用服务，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot; style=&quot;&quot;&gt;&lt;b&gt;ProxyFactory通过初始化Proxy对象，Proxy通过创建动态代理对象；&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-220" y="700" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-58" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Invoker通过路由，负载均衡选择了一个最合适的服务提供者，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;在通过加入各种过滤器，协议层包装生成一个新的DubboInvoker对象；&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="260" y="520" width="400" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-59" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;再通过交换成将DubboInvoker对象包装成一个Reuqest对象，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;该对象通过序列化通过NettyClient传输到服务提供者的NettyServer端&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="115" y="1225" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-60" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;通过反序列化、协议解密等操作生成一个DubboExporter对象,&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;再层层传递处理,会生成一个服务提供端的Invoker对象；&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;这个Invoker对象会调用本地服务，获得结果再通过层层回调返回到服务消费者，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;服务消费者拿到结果后，再解析获得最终结果&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="320" y="1430" width="450" height="70" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-61" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;服务提供者暴露，主要就是指在项目启动时服务提供者去做的两件事&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;第一件事就是，由于需要对外提供调用服务，接受消费者的请求&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;所以在启动时需要根据使用协议，以及协议对应的端口启动一个对应的服务，&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;之后如果要调用就可以按照Dubbo协议要求组装数据格式&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;向20880端口发送请求，从而就实现远程服务调用&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;第一件事成功让接口可以对外提供访问，但是对于消费者来说，它其实还是无法访问接口&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;因为消费者并不知道接口使用的是哪个通信协议、端口，也不知道接口所在的服务器的ip&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;于是，在启动时就会去做第二件事&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;第二件事是将每个接口的详细信息，包括接口的全限定名、方法名称、方法参数、服务器的ip、端口、通信协议等等按照一定的格式组装好&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;存放到元数据中心和服务提供者本地缓存中&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;之后消费者需要调用接口时，就可以从元数据中心或者服务提供者本地缓存中获取到接口的详细信息（具体从哪取决于配置，默认是从本地缓存中获取）&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;当需要发起调用时，就可以按照接口使用的协议组装数据，向接口所在的服务器ip和端口发送请求&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1755" y="-185" width="830" height="290" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-62" value="&lt;div&gt;&lt;b&gt;如果消费者想引用远程服务，可以通过@DubboReference注解触发引用的逻辑&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;消费者引用也会去做两件事&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;第一件事我们都知道，那就是创建接口的动态代理&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;由于消费者使用的是一个接口，所以会给接口创建一个动态代理&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;这个动态代理最终会发送RPC请求&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;当调用动态代理方法时，最终会走到InvocationHandler的实现&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;在Dubbo中，调用消费者动态代理的时候，不论是JDK动态代理还是使用Javassist方式生成动态代理&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;最终都会走到InvokerInvocationHandler这个InvocationHandler的实现&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;整个RPC调用的起点就是invoke方法的实现&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;将RPC调用的接口、方法名、参数封装到RpcInvocation中&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;接着会走到下面这行代码&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;invoker.invoke(rpcInvocation)&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;就会触发RPC调用的整个核心流程&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1750" y="115" width="560" height="320" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-63" value="&lt;b&gt;当参数封装完成之后，接下来就会走到ClusterFilter过滤环节&lt;/b&gt;&lt;div&gt;&lt;b&gt;ClusterFilter本质是一种责任链模式，是Dubbo提供的一个重要扩展点&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;通过实现invoke方法对请求进行自定义预处理操作&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;当走完ClusterFilter之后，接下来就会来到集群调用逻辑决策的环节&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;集群调用逻辑就是去决定&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;应该每个服务都去调用一次，还是只去调用其中一个&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;如果只调用其中一个，比如调用服务1，如果失败了，那么此时是直接抛异常还是选择继续去调用服务2，还是做其它的事？&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;所以集群调用逻辑就是解决多服务实例下，应该怎样合理地调用服务实例&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;默认情况下使用的就是failover，也就是出现异常时会调用其它的服务再返回结果&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;解决集群中众多实例时应该如何调用的问题&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;而路由策略其实是选择允许调用哪些服务实例&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;因为并不是所有的服务实例都符合调用要求&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Dubbo提供了一种叫tag的路由策略&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;除了tag路由策略之外，Dubbo还提供了以下几种路由策略&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;条件路由，可以指定某些条件下可以调用哪些服务实例&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;脚本路由，可以写一段JavaScript脚本，更加灵活地选择哪些服务实例&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1750" y="430" width="670" height="330" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-64" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 16px;&quot;&gt;@DubboReference(cluster=&quot;failover&quot;)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="150" y="400" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-65" value="&lt;div&gt;&lt;b&gt;所谓的负载均衡就是说，面对多个服务实例，我们应该按照何种算法选择一个供我们调用&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Dubbo提供了以下几种负载均衡策略：&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;随机（random），随机选择一个&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;轮询（roundrobin），每次调用按照顺序选择一个&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;最少活跃优先（leastactive），优先选择被最少调用的服务&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;最短响应优先（shortestresponse），优先选择响应时间断的服务调用&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;一致性Hash（consistenthash）&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;在没有指定的情况下，默认使用的就是随机（random）算法&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1755" y="780" width="490" height="160" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-66" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 16px;&quot;&gt;@DubboReference(tag=&quot;gray&quot;)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="150" y="595" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-67" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 16px;&quot;&gt;@DubboService(tag=&quot;gray&quot;)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="140" y="575" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-68" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 16px;&quot;&gt;@DubboReference(loadbalance=&quot;random&quot;)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="55" y="480" width="350" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-70" value="&lt;div&gt;&lt;b&gt;经过上面的几步，终于知道本地RPC请求需要请求哪个或者哪些具体的服务实例&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;接下来只需要向对应的服务实例发送请求就可以了&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;不过在发送请求前，Dubbo还预留了一个扩展点，叫做Filter&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;本质也是一种责任链模式&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;通过Filter，我们可以在RPC调用前对整个请求再进行自定义扩展&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1750" y="950" width="440" height="130" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-71" value="&lt;div&gt;&lt;b&gt;当Filter责任链走完之后，接下来就到了向服务实例发送请求的时候了&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;一旦涉及到服务与服务之间的调用，那么就离不开通信协议&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;所谓的通信协议，讲的简单点就是发送方把需要发送的数据按照一定的格式组装好之后再发送给接收方&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Dubbo需要发送数据包括调用但不限于接口全限定名、调用的方法名、调用参数等等&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;而接收方在获取到数据时再使用对应的格式去解析，从而获取到请求数据&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Dubbo默认使用的通信协议是Dubbo自己的写的，叫做Dubbo协议&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;除了Dubbo协议之外，Dubbo还支持以下几种通信协议：&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Rest&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;gRPC&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Triple&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1755" y="1100" width="560" height="240" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-72" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;要想发送数据，一般都是先将需要传输的数据转换成字节序列（数组），之后再交由操作系统转换成二进制进行传输&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;按照什么样的格式就被称为序列化协议&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;整个转换过程就被称为序列化，也可以被称为编码&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;当通信协议使用Dubbo协议时，Dubbo支持以下几种序列化协议：&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Java原生&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Hessian2&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Fastjson2&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;当序列化完成之后，接下来就只需要将字节序列通过网络发送出去即可&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1755" y="1340" width="640" height="160" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-73" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;消费者整个调用的过程&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1820" y="-262" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-74" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;服务提供者处理请求&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1790" y="1550" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="kh3kQsugT_p81Ak_PhRp-75" value="&lt;div&gt;&lt;b&gt;当服务提供者监听到有请求时，会获取到请求的字节序列&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;然后根据通信协议，序列化协议反序列化出传输的数据&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;从而获取到消费者需要调用的、接口、方法以及入参等数据&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;之后就可以找到调用接口对应的实现，通过反射进行调用，获取结果&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;然后再将结果序列化成字节数组，返回给消费者&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;这样服务提供者就处理完成了一次请求&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;不过这里面有一个小细节，那就是在调用接口的实现之前，也会经过Filter过滤&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;所以Filter过滤其实在提供者和消费者两者都有&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1755" y="1620" width="440" height="230" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="aFdEVQMKjbmttWaHHXfw" name="Spring，Springboot">
    <mxGraphModel dx="2100" dy="26800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="0" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="R36P5IaH8ckpL3Td1BHd-13" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1439.9999999999998" y="-23210" width="297.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-9" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="954.3299999999999" y="-23220" width="280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-7" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="895.5" y="-23050" width="394.5" height="80" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="495.5" y="-23040" width="320" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-361" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;gradientColor=#7ea6e0;" parent="1" vertex="1">
          <mxGeometry x="1506.8600000000001" y="-19530" width="300" height="77" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-67" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1160" y="-2795" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-66" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1160" y="-2875" width="310" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-64" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="753.55" y="-3060" width="288" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-21" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" parent="1" vertex="1">
          <mxGeometry x="1470" y="-530" width="500" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" parent="1" vertex="1">
          <mxGeometry x="1610" y="-530" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="1" vertex="1">
          <mxGeometry x="1620" y="-380" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1565" y="1363" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1575" y="1115" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-6" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;gradientColor=#97d077;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1575" y="835" width="330" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-7" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;" parent="1" vertex="1">
          <mxGeometry x="1565" y="585" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-8" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2406" y="455" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-9" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;gradientColor=#ffd966;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2275" y="10" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-10" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0cee2;strokeColor=#56517e;" parent="1" vertex="1">
          <mxGeometry x="1610" y="-230" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-11" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="1" vertex="1">
          <mxGeometry x="1590" y="-80" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-12" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2260" y="-90" width="196" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-13" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;gradientColor=#ffd966;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1600" y="250" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-14" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="1" vertex="1">
          <mxGeometry x="1960" y="-77.5" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-15" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" parent="1" vertex="1">
          <mxGeometry x="2240" y="-195" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-16" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" parent="1" vertex="1">
          <mxGeometry x="2000" y="-87.5" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-17" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;" parent="1" vertex="1">
          <mxGeometry x="2225" y="90" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-18" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1620" y="-520" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-19" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-21" target="_SVDE998wCgmSqRCzLi5-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1980" y="-380" as="sourcePoint" />
            <mxPoint x="2030" y="-430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-20" value="&lt;b&gt;refresh()&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1725" y="-422" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-22" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AnnotationConfigServletWebServerApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1510" y="-470" width="440" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-23" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Spring启动时核心步骤&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="340" y="-1970" width="250" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-24" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;prepareRefresh&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1650" y="-365" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-25" value="&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;做了一些前置操作，准备好一些属性配置相关的东西，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;后面的其它环节，比如说生成Bean时可能需要用到这些配置&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1810" y="-335" width="340" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-26" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;ApplicationContext刚创建出来，什么也没有，所以需要做一些准备&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;首先是做一些状态位的变更，表明开始启动了或者刷新了&lt;/span&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;initPropertySources是一个模板方法，本身是一个空实现，是给子类用的&lt;/div&gt;&lt;div style=&quot;&quot;&gt;我们的这个子类就重写了initPropertySources方法会将Servlet相关的配置加入到Environment中，&lt;/div&gt;&lt;div style=&quot;&quot;&gt;这样我们就能从Environment中获取到Servlet相关的配置&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;getEnvironment().validateRequiredProperties()&lt;/div&gt;&lt;div style=&quot;&quot;&gt;这行代码就是校验一些必要的配置属性，我们可以通过&lt;/div&gt;&lt;div style=&quot;&quot;&gt;ConfigurableEnvironment来设置哪些属性是必要的，默认是没有必要的&lt;/div&gt;&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1004.3" y="-470" width="550" height="130" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-27" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;obtainFreshBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1625" y="-215" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-28" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;刷新BeanFactory并且获取BeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1825" y="-210" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-29" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;refreshBeanFactory() 和 getBeanFactory() 都是抽象方法，由子类来实现的&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;子类的实现其实很简单，就是给beanFactory设置一个id和返回beanFactory&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;类型为&lt;span style=&quot;background-color: initial;&quot;&gt;DefaultListableBeanFactory&lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1112.5" y="-255" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-30" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;prepareBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1630" y="-65" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-31" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;对BeanFactory做一些配置相关的东西&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;color: rgb(255, 0, 0); background-color: initial;&quot;&gt;比如添加一些BeanPostProcessor，注册一些PropertyEditor&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;color: rgb(255, 0, 0); background-color: initial;&quot;&gt;为Bean的生成做准备操作&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1800" y="-20" width="350" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-32" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;先给BeanFactory设置了一个ClassLoader，因为BeanFactory是用来创建Bean，需要加载Bean class对象&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;然后设置了一个BeanExpressionResolver，这个是用来解析SpEL表达式的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;然后添加了一个PropertyEditorRegistrar，&lt;/font&gt;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;作用就是为BeanFactory添加一堆跟资源相关的PropertyEditor&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;PropertyEditor就是进行类型转换的，将一个字符串转成对应的类型&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;添加了一个BeanPostProcessor，也就是&lt;span style=&quot;background-color: initial;&quot;&gt;ApplicationContextAwareProcessor&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;BeanPostProcessor我们都知道会在Bean的生命周期阶段进行回调，是Bean的生命周期一个核心的环节&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;ApplicationContextAwareProcessor这个是用来处理Bean生命周期中的Aware回调有关&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;Bean实现这些接口的时候，在创建的时候Spring会回调这些接口，传入对应的对象&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;beanFactory.ignoreDependencyInterface(EnvironmentAware.class);&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;Bean想注入一个EnvironmentAware对象&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;是不允许的&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;beanFactory.registerResolvableDependency(）&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;跟上面的ignoreDependencyInterface作用相反&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;是来设置依赖注入时Bean的类型所对应的对象&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;又添加了一个BeanPostProcessor：&lt;span style=&quot;background-color: initial;&quot;&gt;ApplicationListenerDetector&lt;/span&gt;&lt;/div&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;这个BeanPostProcessor是跟ApplicationListener有关&lt;/div&gt;&lt;div style=&quot;&quot;&gt;他是将单例的ApplicationListener给添加到ApplicationContext中&lt;/div&gt;&lt;div style=&quot;&quot;&gt;再后面就是往BeanFactory里面添加一些跟配置属性相关的单例对象，如果有哪里用到，就可以从BeanFactory中获取到了&lt;/div&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1000" y="-130" width="670" height="300" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-33" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-3" target="_SVDE998wCgmSqRCzLi5-10" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1680" y="-190" as="sourcePoint" />
            <mxPoint x="1730" y="-240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-34" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-10" target="_SVDE998wCgmSqRCzLi5-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1680" y="-190" as="sourcePoint" />
            <mxPoint x="1730" y="-240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-37" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanPostProcessor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2260" y="-175" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-38" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertyEditor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2288" y="-75" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-39" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2004" y="-77.5" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-40" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;添加一些跟配置属性相关的单例对象&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2220" y="105" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-41" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;DefaultListableBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1960" y="-37.5" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-42" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;接口和对应的注入对象&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2272" y="25" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-43" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-15" target="_SVDE998wCgmSqRCzLi5-14" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2240" y="7.5" as="sourcePoint" />
            <mxPoint x="2290" y="-42.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-44" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-12" target="_SVDE998wCgmSqRCzLi5-14" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2240" y="7.5" as="sourcePoint" />
            <mxPoint x="2290" y="-42.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-45" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1.001;entryY=0.373;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-9" target="_SVDE998wCgmSqRCzLi5-41" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2240" y="7.5" as="sourcePoint" />
            <mxPoint x="2290" y="-42.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-46" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.136;exitY=0.048;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1.004;entryY=0.88;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-17" target="_SVDE998wCgmSqRCzLi5-41" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2240" y="7.5" as="sourcePoint" />
            <mxPoint x="2290" y="-42.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-47" value="" style="endArrow=classic;html=1;rounded=0;entryX=1.002;entryY=0.623;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-14" target="_SVDE998wCgmSqRCzLi5-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2260" as="sourcePoint" />
            <mxPoint x="2310" y="-50" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-48" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;postProcessBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1630" y="265" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-49" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;invokeBeanFactoryPostProcessors&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1590" y="600" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-50" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;registerBeanPostProcessors&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1630" y="850" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-51" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;initMessageSource&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1630" y="1130" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-52" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;initApplicationEventMulticaster&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1595" y="1375" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-53" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2125" y="511" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-54" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2065" y="205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-55" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2095" y="331" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-56" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1575" y="2035" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-57" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="1590" y="1605" width="185" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-58" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1585" y="1815" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-59" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" parent="1" vertex="1">
          <mxGeometry x="1635" y="2245" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-60" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;onRefresh&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1635" y="1620" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-61" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;registerListeners&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1620" y="1830" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-62" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;finishBeanFactoryInitialization&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1590" y="2050" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-63" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;finishRefresh&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1655" y="2260" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-65" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;" parent="1" vertex="1">
          <mxGeometry x="357" y="-1735" width="470" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-66" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="389.5" y="-815" width="355" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-67" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" parent="1" vertex="1">
          <mxGeometry x="402" y="-1765" width="355" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-68" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" parent="1" vertex="1">
          <mxGeometry x="412" y="-1105" width="355" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-69" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="1" vertex="1">
          <mxGeometry x="414.5" y="-1584" width="355" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-70" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0cee2;strokeColor=#56517e;" parent="1" vertex="1">
          <mxGeometry x="412" y="-1345" width="355" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-72" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;configureHeadlessProperty&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="489.5" y="-1559" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-73" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConfigurableApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="457" y="-1685" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-74" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SpringApplication&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="512" y="-1745" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-75" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-65" target="_SVDE998wCgmSqRCzLi5-69" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="657" y="-1505" as="sourcePoint" />
            <mxPoint x="707" y="-1555" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-76" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;run&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="597" y="-1637" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-77" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;getRunListeners&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="514.5" y="-1320" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-78" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;prepareEnvironment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="499.5" y="-1080" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-79" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;prepareContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="479.5" y="-790" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-80" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;gradientColor=#ffd966;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="409.5" y="-525" width="340" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-81" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;" parent="1" vertex="1">
          <mxGeometry x="409.5" y="-265" width="340" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-86" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;refreshContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="499.5" y="-500" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-87" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;afterRefresh&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="534.5" y="-245" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-88" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-69" target="_SVDE998wCgmSqRCzLi5-70" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="617" y="-1325" as="sourcePoint" />
            <mxPoint x="667" y="-1375" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-89" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-70" target="_SVDE998wCgmSqRCzLi5-68" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="617" y="-1325" as="sourcePoint" />
            <mxPoint x="667" y="-1375" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-90" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.555;entryY=0.069;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-68" target="_SVDE998wCgmSqRCzLi5-66" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="617" y="-945" as="sourcePoint" />
            <mxPoint x="667" y="-995" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-91" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.537;exitY=0.956;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-66" target="_SVDE998wCgmSqRCzLi5-80" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="617" y="-695" as="sourcePoint" />
            <mxPoint x="667" y="-745" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-92" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-80" target="_SVDE998wCgmSqRCzLi5-81" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="617" y="-325" as="sourcePoint" />
            <mxPoint x="667" y="-375" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-93" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-80" target="_SVDE998wCgmSqRCzLi5-21" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1130" y="-210" as="sourcePoint" />
            <mxPoint x="1180" y="-260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-95" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Java资源管理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="157.5" y="-8320" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-96" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" parent="1" vertex="1">
          <mxGeometry x="614.5" y="-8015" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-97" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="1" vertex="1">
          <mxGeometry x="985" y="-7890" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-98" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;URL&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="644.5" y="-8000" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-99" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;URLStreamHandler&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1030" y="-7870" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-101" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" parent="1" vertex="1">
          <mxGeometry x="544.5" y="-7890" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-102" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;URLConnection&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="604.5" y="-7875" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-103" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-96" target="_SVDE998wCgmSqRCzLi5-101" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="905" y="-7715" as="sourcePoint" />
            <mxPoint x="955" y="-7765" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-104" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-101" target="_SVDE998wCgmSqRCzLi5-97" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="905" y="-7715" as="sourcePoint" />
            <mxPoint x="955" y="-7765" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-105" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;通过URL访问本地文件资源&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="732" y="-7985" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-108" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;每种协议的URL资源都需要一个对应的一个URLStreamHandler来处理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="735" y="-7965" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-109" value="&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;每种协议的URL资源都需要一个对应的一个URLStreamHandler来处理。&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;比如说，http://协议有对应的URLStreamHandler的实现，file://协议的有对应的URLStreamHandler的实现。&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Java除了支持http://和file://协议之外，还支持其它的协议&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;当在构建URL的时候，会去解析资源的访问协议，根据访问协议找到对应的URLStreamHandler的实现。&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;当然，除了Java本身支持的协议之外，我们还可以自己去扩展这个协议，大致只需要两步即可：&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;实现URLConnection，可以通过这个连接读取资源的内容&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;实现URLStreamHandler，通过URLStreamHandler可以获取到URLConnection&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;不过需要注意的是，URLStreamHandler的实现需要放在sun.net.www.protocol.协议名称包下，类名必须是Handler，这也是为什么截图中的实现类名都叫Handler的原因。&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;当然如果不放在指定的包下也可以，但是需要实现java.net.URLStreamHandlerFactory接口。&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="495" y="-8320" width="940" height="190" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-110" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;openConnection&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;setURL&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;parseURL&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1015" y="-7830" width="120" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-111" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;" parent="1" vertex="1">
          <mxGeometry x="1275" y="-8065" width="20" height="420" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-113" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1336" y="-8085" width="249" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-114" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1625" y="-8095" width="249" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-115" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1325" y="-7950" width="249" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-116" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1625" y="-7950" width="249" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-117" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1325" y="-7825" width="249" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-118" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1325" y="-7695" width="249" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-119" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1631" y="-7825" width="249" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-120" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;http&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1424.5" y="-8065" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-121" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;https&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1414.5" y="-7920" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-122" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;file&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1414.5" y="-7795" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-124" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ftp&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1424.5" y="-7665" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-125" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;jar&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1729.5" y="-8070" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-126" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;mailto&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1720" y="-7920" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-127" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;netdoc&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1715.5" y="-7800" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-128" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Spring资源管理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="125" y="-7400" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-130" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="762.5" y="-7210" width="225.5" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-133" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="245" y="-6900" width="295" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-134" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="494.5" y="-6570" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-137" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1240.5" y="-6890" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-138" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="757" y="-7390" width="245.5" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-139" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="934.5" y="-6570" width="255" height="70" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-140" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="735" y="-7020" width="280.5" height="70" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-141" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Resource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="825" y="-7172" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-145" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;InputStreamSource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="797.5" y="-7345" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-146" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;FileSystemResource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="305" y="-6890" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-148" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ClassPathResource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="514.5" y="-6555" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-149" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ByteArrayResource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1280.5" y="-6870" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-150" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;读取文件系统的资源&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="402.5" y="-6827" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-151" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Java的标准资源管理的封装，底层就是通过URL来访问资源&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="160" y="-6590" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-152" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;读取classpath路径下的资源&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="494.5" y="-6500" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-153" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;读取静态字节数组的数据&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1340.5" y="-6820" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-154" value="&lt;b&gt;《interface》&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="829.75" y="-7380" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-155" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;getInputStream()&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1003" y="-7322" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-156" value="&lt;b&gt;《interface》&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="827.5" y="-7210" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-157" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractResource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="790" y="-7000" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-158" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanDefinitionResource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="957" y="-6545" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-159" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;BeanDefinition包装类&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="940" y="-6492" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-160" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1140.5" y="-6708" width="350" height="80" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-161" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;InputStreamResource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1220.5" y="-6678" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-162" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;读取文件输入流&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1213" y="-6600" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-163" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-138" target="_SVDE998wCgmSqRCzLi5-156" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1135" y="-7000" as="sourcePoint" />
            <mxPoint x="1185" y="-7050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-164" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-130" target="_SVDE998wCgmSqRCzLi5-140" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1135" y="-7000" as="sourcePoint" />
            <mxPoint x="1185" y="-7050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-165" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-140" target="_SVDE998wCgmSqRCzLi5-137" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1135" y="-6800" as="sourcePoint" />
            <mxPoint x="1185" y="-6850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-167" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="_SVDE998wCgmSqRCzLi5-160" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="885" y="-6950" as="sourcePoint" />
            <mxPoint x="1185" y="-6850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-168" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="_SVDE998wCgmSqRCzLi5-139" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="885" y="-6950" as="sourcePoint" />
            <mxPoint x="1185" y="-6850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-169" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="_SVDE998wCgmSqRCzLi5-134" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="885" y="-6950" as="sourcePoint" />
            <mxPoint x="1185" y="-6850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-170" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="_SVDE998wCgmSqRCzLi5-133" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="885" y="-6950" as="sourcePoint" />
            <mxPoint x="1185" y="-6850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-171" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Resource接口继承了InputStreamSource接口，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;而InputStreamSource接口可以获取定义了获取输入流的方法&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="895" y="-7120" width="350" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-174" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="345.5" y="-7080" width="230" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-175" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;WritableResource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="386.5" y="-7040" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-180" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-174" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="915" y="-6980" as="sourcePoint" />
            <mxPoint x="405" y="-6900" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-182" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="175" y="-6680" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-183" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;FileUrlResource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="255" y="-6665" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-184" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="_SVDE998wCgmSqRCzLi5-182" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="885" y="-6950" as="sourcePoint" />
            <mxPoint x="965" y="-6830" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-186" value="&lt;b&gt;《interface》&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="416.5" y="-7070" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-187" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-130" target="_SVDE998wCgmSqRCzLi5-174" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="915" y="-6780" as="sourcePoint" />
            <mxPoint x="965" y="-6830" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-188" value="&lt;div&gt;&lt;b&gt;Java提供了标准的资源管理方式，但是Spring并没有用，而是自己搞了一套资源管理方式。&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;1、资源抽象&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;在Spring中，资源大致被抽象为两个接口&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Resource：可读资源，可以获取到资源的输入流&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;WritableResource：读写资源，除了资源输入流之外，还可以获取到资源的输出流&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Resource接口继承了InputStreamSource接口，而InputStreamSource接口可以获取定义了获取输入流的方法&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Resource有很多实现，但是在实际使用中，可能无法判断使用具体的哪个实现，&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;所以Spring提供了ResourceLoader资源加载器来根据资源的类型来加载资源。&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;通过getResource方法，传入一个路径就可以加载到对应的资源，而这个路径不一定是本地文件，可以是任何可加载的路径。&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;ResourceLoader有个唯一的实现DefaultResourceLoader&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;ResourcePatternResolver继承了ResourceLoader&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;通过ResourcePatternResolver提供的方法可以看出，他可以加载多个资源，支持使用通配符的方式，比如classpath*:，就可以加载所有classpath的资源。&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;ResourcePatternResolver只有一个实现PathMatchingResourcePatternResolver&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Java的标准资源管理：&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;URL&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;URLStreamHandler&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Spring的资源管理：&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;资源抽象：Resource 、WritableResource&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;资源加载：ResourceLoader 、ResourcePatternResolver&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Spring的资源管理在Spring中用的很多，比如在SpringBoot中，application.yml的文件就是通过ResourceLoader加载成Resource，之后再读取文件的内容的。&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="270" y="-6420" width="880" height="500" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-189" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="805" y="-5850" width="300" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-190" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1660.5" y="-5502" width="429.5" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-191" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="538" y="-5619" width="300" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-192" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1145.5" y="-5302" width="300" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-193" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="483" y="-5404" width="385" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-194" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1577.5" y="-5302" width="365" height="90" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-195" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1240.25" y="-5662" width="375" height="110" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-196" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ResourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="890.5" y="-5820" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-197" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;ResourcePatternResolver&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="573.5" y="-5589" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-199" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PathMatchingResourcePatternResolver&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="528" y="-5374" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-200" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;DefaultResourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1327.75" y="-5612" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-201" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;ResourceLoader资源加载器来根据资源的类型来加载资源&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="890" y="-5760" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-202" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;FileSystemResourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1190.5" y="-5272" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-203" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PathMatchingResourcePatternResolver&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1602.5" y="-5272" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-204" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ServletContextResourcePatternResolver&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1730" y="-5462" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-205" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1000.5" y="-5462" width="295" height="75" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-206" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ServletContextResourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1018" y="-5439.5" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-208" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.194;exitY=-0.093;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-201" target="_SVDE998wCgmSqRCzLi5-191" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1320.5" y="-5652" as="sourcePoint" />
            <mxPoint x="1370.5" y="-5702" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-209" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-191" target="_SVDE998wCgmSqRCzLi5-193" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1320.5" y="-5652" as="sourcePoint" />
            <mxPoint x="1370.5" y="-5702" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-210" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-189" target="_SVDE998wCgmSqRCzLi5-195" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1320.5" y="-5652" as="sourcePoint" />
            <mxPoint x="1370.5" y="-5702" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-211" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-195" target="_SVDE998wCgmSqRCzLi5-192" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1320.5" y="-5452" as="sourcePoint" />
            <mxPoint x="1370.5" y="-5502" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-212" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-195" target="_SVDE998wCgmSqRCzLi5-205" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1320.5" y="-5452" as="sourcePoint" />
            <mxPoint x="1370.5" y="-5502" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-213" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-195" target="_SVDE998wCgmSqRCzLi5-194" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1320.5" y="-5452" as="sourcePoint" />
            <mxPoint x="1370.5" y="-5502" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-214" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="_SVDE998wCgmSqRCzLi5-190" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1430.5" y="-5552" as="sourcePoint" />
            <mxPoint x="1370.5" y="-5502" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-215" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;通过getResource方法，传入一个路径就可以加载到对应的资源，而这个路径不一定是本地文件，可以是任何可加载的路径。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;ResourceLoader有个唯一的实现DefaultResourceLoader&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="871" y="-5730" width="680" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-216" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;ResourcePatternResolver可以加载资源&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1620.5" y="-5589" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-217" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;ResourcePatternResolver继承了ResourceLoader&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;通过ResourcePatternResolver提供的方法可以看出，他可以加载多个资源，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;支持使用通配符的方式，比如classpath*:，就可以加载所有classpath的资源。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;ResourcePatternResolver只有一个实现PathMatchingResourcePatternResolver&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="255.5" y="-5532" width="470" height="100" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-218" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;SpringBoot配置文件是通过ResourceLoader来加载配置文件，读取文件的配置内容&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="116" y="-3030" width="470" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-219" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="777.5" y="-4495" width="263" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-220" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="398.75" y="-3610" width="185.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-221" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="445.75" y="-4302" width="185.5" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-222" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="116" y="-4495" width="252.75" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-223" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="473.25" y="-4730" width="230" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-224" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="410" y="-4495" width="323" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-225" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="495.5" y="-4853.5" width="185.5" height="50" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-226" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="560.5" y="-5000" width="185.5" height="63" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-228" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Environment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="526.5" y="-4839.5" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-229" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertySource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="467.5" y="-4292" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-230" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertySourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="391.5" y="-3590" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-231" value="&lt;div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;SpringBoot是通过PropertySourceLoader来解析配置文件的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;load方法的第二个参数就是我们前面提到的资源接口Resource&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;通过Resource就可以获取到配置文件的输入流，之后就可以读取到配置文件的内容，再把配置文件解析成多个PropertySource，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;之后把PropertySource放入到Environment中，这样我们就可以通过Environment获取到配置文件的内容了。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;PropertySourceLoader默认有两个实现，分别用来解析properties和yml格式的配置文件&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="122" y="-3760" width="710" height="110" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-232" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;PropertyResolver提供的部分方法，这里简单说一下上面方法的作用&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;getProperty(String key)，很明显是通过配置的key获取对应的value值&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;getProperty(String key, Class&amp;lt;T&amp;gt; targetType)，这是获取配置，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;并转换成对应的类型，比如你获取的是个字符串的&quot;true&quot;，这里就可以给你转换成布尔值的true，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;具体的底层实现留到下一节讲&lt;span style=&quot;background-color: initial;&quot;&gt;resolvePlaceholders(String text)，&lt;/span&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;这类方法可以处理${...}占位符，也就是先取出${...}占位符中的key，然后再通过key获取到值&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;所以Environment主要有一下几种功能：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;根据key获取配置&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;获取到指定类型的配置&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;处理占位符&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="76" y="-4990" width="540" height="190" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-233" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertyResolver&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="586" y="-4977" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-223" target="_SVDE998wCgmSqRCzLi5-225" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-234" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConfigurableEnvironment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="481" y="-4720" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-235" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ApplicationServletEnvironment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="116" y="-4485" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-236" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ApplicationReactiveWebEnvironment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="410" y="-4485" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-237" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ApplicationServletEnvironment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="780.5" y="-4485" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-238" value="&lt;b style=&quot;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;PropertySource是真正存配置的地方，属于配置的来源，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b style=&quot;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;它提供了一个统一的访问接口，使得应用程序可以以统一的方式获取配置获取到属性。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="460.5" y="-4252" width="480" height="40" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-239" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="161.5" y="-4147" width="273.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-240" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;MapPropertySource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="204.5" y="-4132" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-242" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="760.5" y="-4172" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-243" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CommandLinePropertySource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="790.5" y="-4157" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-244" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;封装了通过命令启动时的传递的配置参数&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="700.5" y="-4104" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-245" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Environment获取到的配置真正也就是从PropertySource获取的&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="516" y="-4803.5" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="_SVDE998wCgmSqRCzLi5-246" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;SpringBoot环境底下，除了我们自定义的配置外，还有比如系统环境配置等等，这些都可以通过Environment获取到&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;当从Environment中获取配置的时候，会去遍历所有的PropertySource，一旦找到配置key对应的值，就会返回&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;所以，如果有多个PropertySource都含有同一个配置项的话，也就是配置key相同，那么获取到的配置是从排在前面的PropertySource的获取的&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;这就是为什么，当你在配置文件配置username属性时获取到的却是系统变量username对应的值，因为系统的PropertySource排在配置文件对应的PropertySource之前&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="112.5" y="-3250" width="920" height="90" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Spring&amp;nbsp; 环境&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="75" y="-5087" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-2" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.458;exitY=1.233;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-233" target="_SVDE998wCgmSqRCzLi5-225" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="736" y="-4810" as="sourcePoint" />
            <mxPoint x="786" y="-4860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-3" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;根据key获取配置&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;获取到指定类型的配置&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;处理占位符&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="606" y="-4937" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-6" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="451.5" y="-4610" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-7" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractEnvironment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="507" y="-4595" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-8" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-6" target="_SVDE998wCgmSqRCzLi5-223" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="666" y="-4670" as="sourcePoint" />
            <mxPoint x="716" y="-4720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-9" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-222" target="Agjq1IO1DCSdrjI2zt5C-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="666" y="-4670" as="sourcePoint" />
            <mxPoint x="716" y="-4720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-10" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.536;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-224" target="Agjq1IO1DCSdrjI2zt5C-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="666" y="-4670" as="sourcePoint" />
            <mxPoint x="716" y="-4720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-11" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-219" target="Agjq1IO1DCSdrjI2zt5C-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="666" y="-4670" as="sourcePoint" />
            <mxPoint x="716" y="-4720" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-15" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="792.5" y="-4870" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-16" value="&lt;b&gt;ConfigurablePropertyResolver&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="809.5" y="-4849.5" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-17" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="689" y="-4048" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-18" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;EnumerablePropertySource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="729" y="-4033" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-19" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="460.5" y="-3942" width="256.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-20" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertiesPropertySource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="480.25" y="-3927" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-21" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="192.5" y="-4032" width="313.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-22" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SystemEnvironmentPropertySource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="199.25" y="-4014" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-23" value="&lt;b&gt;《interface》&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="918" y="-5845" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-24" value="&lt;b&gt;《interface》&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="638" y="-5619" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-25" value="&lt;b&gt;《interface》&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="606" y="-5000" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-26" value="&lt;b&gt;《interface》&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="538.25" y="-4857" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-27" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-239" target="_SVDE998wCgmSqRCzLi5-221" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750.5" y="-4032" as="sourcePoint" />
            <mxPoint x="800.5" y="-4082" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-28" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-21" target="_SVDE998wCgmSqRCzLi5-221" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750.5" y="-4032" as="sourcePoint" />
            <mxPoint x="800.5" y="-4082" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-29" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-19" target="_SVDE998wCgmSqRCzLi5-221" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750.5" y="-4032" as="sourcePoint" />
            <mxPoint x="800.5" y="-4082" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-30" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.176;entryY=0.093;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-17" target="_SVDE998wCgmSqRCzLi5-238" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750.5" y="-4032" as="sourcePoint" />
            <mxPoint x="710.5" y="-4172" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-31" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.176;entryY=0.116;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-242" target="_SVDE998wCgmSqRCzLi5-238" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="750.5" y="-4032" as="sourcePoint" />
            <mxPoint x="750.5" y="-4172" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-32" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.442;entryY=-0.051;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-15" target="Agjq1IO1DCSdrjI2zt5C-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="876" y="-4700" as="sourcePoint" />
            <mxPoint x="926" y="-4750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-33" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="_SVDE998wCgmSqRCzLi5-223" target="Agjq1IO1DCSdrjI2zt5C-15" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="876" y="-4700" as="sourcePoint" />
            <mxPoint x="926" y="-4750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-34" value="&lt;b&gt;《interface》&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="861" y="-4869.5" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-35" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="141.5" y="-3460" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-36" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="551" y="-3450" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-38" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertiesPropertySourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="166.5" y="-3445" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-39" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;YamlPropertySourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="588.5" y="-3435" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-40" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-35" target="_SVDE998wCgmSqRCzLi5-220" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="401.5" y="-3500" as="sourcePoint" />
            <mxPoint x="451.5" y="-3550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-41" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-36" target="_SVDE998wCgmSqRCzLi5-220" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="401.5" y="-3500" as="sourcePoint" />
            <mxPoint x="451.5" y="-3550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-42" value="&lt;b&gt;《interface》&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="451.5" y="-3607" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-43" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="103" y="-3105" width="220.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-44" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="104.62" y="-2930" width="220.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-45" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="788.75" y="-2830" width="220.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-46" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" parent="1" vertex="1">
          <mxGeometry x="788.75" y="-2550" width="220.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-47" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="788.75" y="-2680" width="220.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-48" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1193" y="-2830" width="220.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-49" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="787.18" y="-2930" width="220.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-50" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="782.8" y="-3060" width="221.82" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-51" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ResourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="138.37" y="-3090" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-52" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;DefaultResourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="118.62" y="-2915" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-53" value="&lt;b&gt;《interface》&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="163" y="-3105" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-54" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;配置文件&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="847.93" y="-2915" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-55" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Resource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="840" y="-2815" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-56" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertySourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1198.75" y="-2815" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-57" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertySource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="833.25" y="-2665" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-58" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Environment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="854.25" y="-2535" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-59" value="&lt;b style=&quot;forced-color-adjust: none; color: rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: nowrap; background-color: rgb(251, 251, 251); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;&quot;&gt;&lt;font style=&quot;forced-color-adjust: none; font-size: 16px;&quot;&gt;ResourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="822.05" y="-3060" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-60" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-64" target="Agjq1IO1DCSdrjI2zt5C-49" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="713.9899999999999" y="-2880" as="sourcePoint" />
            <mxPoint x="896.4849999999998" y="-2950" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-61" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-49" target="Agjq1IO1DCSdrjI2zt5C-45" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="700" y="-2860" as="sourcePoint" />
            <mxPoint x="750" y="-2910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-62" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;加载&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="854.75" y="-2970" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-63" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-44" target="Agjq1IO1DCSdrjI2zt5C-43" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="-2870" as="sourcePoint" />
            <mxPoint x="580" y="-2920" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-65" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;DefaultResourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="794.05" y="-3010" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-68" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertiesPropertySourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1185" y="-2860" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-69" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;YamlPropertySourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1198.75" y="-2775" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-70" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-48" target="Agjq1IO1DCSdrjI2zt5C-45" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1210" y="-2860" as="sourcePoint" />
            <mxPoint x="1260" y="-2910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-71" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-47" target="Agjq1IO1DCSdrjI2zt5C-46" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="971.25" y="-2740" as="sourcePoint" />
            <mxPoint x="1021.25" y="-2790" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-72" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-45" target="Agjq1IO1DCSdrjI2zt5C-47" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="960" y="-2740" as="sourcePoint" />
            <mxPoint x="1010" y="-2790" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-73" value="&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;转换&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="840.5" y="-2735" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-74" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;添加&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="838" y="-2600" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-75" value="&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;读取&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1073" y="-2785" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-76" value="&lt;b&gt;prepareEnvironment&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="764.75" y="-2590" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-77" value="&lt;b&gt;configurePropertySources&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="615" y="-2682" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-78" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="379.75" y="-13728" width="20" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-79" value="&lt;b style=&quot;text-align: left;&quot;&gt;Spring类型转换&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="366" y="-13820" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-81" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="428.62" y="-12530" width="279" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-82" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1214.12" y="-12590" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-83" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1234.23" y="-13273" width="184.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-84" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1092.2" y="-13143" width="302.07" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-85" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="480.7500000000001" y="-13284" width="236.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-86" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="599.6300000000001" y="-13154" width="254" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-87" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="854.5400000000001" y="-13393" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-88" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="874.5" y="-13130" width="185" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-89" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="914.0400000000001" y="-13540" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-90" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="847.12" y="-12900" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-91" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="869" y="-12077" width="167.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-92" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="814.5" y="-11460" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-93" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="993.4999999999999" y="-10685" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-94" value="&lt;div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;PropertyEditor&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="904.7900000000001" y="-13532" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-95" value="&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Converter&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="851.12" y="-12888" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-97" value="&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;GenericConverter&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="871.5" y="-12070" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-98" value="&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConversionService&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="824" y="-11450" width="170" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-99" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;TypeConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="984.9999999999999" y="-10670" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-100" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;将String类型的字符串转换成Java对象属性值&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="852.0400000000001" y="-13482" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-101" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;@Value注解的方式将配置注入到字段大致步骤&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="239.5" y="-9600" width="350" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-102" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1039.12" y="-12350" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-103" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1114.62" y="-12455" width="330" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-104" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="369.12" y="-12762" width="259.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-105" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1267.6599999999999" y="-12720" width="276.46" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-106" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="502.87" y="-12440" width="304.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-107" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="686.37" y="-12350" width="288.25" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-108" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="350.37" y="-12640" width="283" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-109" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1110.46" y="-11785" width="260.79" height="55" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-110" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1175.5" y="-11920" width="260.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-111" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="663.25" y="-11785" width="230.25" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-112" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="510" y="-11920" width="297.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-114" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;取出@Value配置的key&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;根据@Value配置的key调用Environment的resolvePlaceholders(String text)方法，解析占位符，找到配置文件中对应的值&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;调用PropertyEditor将对应的值转换成注入的属性字段类型，比如注入的字段类型是数字，那么就会将字符串转换成数字&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;在转换的过程中，Spring会先调用PropertyEditor的setAsText方法将字符串传入，然后再调用getValue方法获取转换后的值&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;直接通过@Value的方式直接注入一个Resource对象&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;@Value(&quot;http://www.baidu.com&quot;)&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;private Resource resource;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;其实归根到底，底层也是通过ResourceLoader来加载的&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;b&gt;想知道@Value到底支持注入哪些字段类型的时候，看看PropertyEditor的实现就可以了，&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;当然如果Spring自带的都不满足你的要求，你可以自己实现PropertyEditor&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;PropertyEditor局限于字符串的转换&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="245" y="-9570" width="680" height="270" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-115" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ResourceEditor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="900.1199999999999" y="-13115" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-116" value="&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;将字符串转换成Resource对象&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="968.75" y="-13060" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-117" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Converter是个接口用于对象之间类型转换，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;泛型S是被转换的对象类型，泛型T是需要被转成的类型&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1011.59" y="-12830" width="310" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-118" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;可以处理带有泛型类型的转换，主要的就是面向集合数组转换操作&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="849.5" y="-12017" width="370" height="30" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-119" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;Converter还是GenericConverter，提供了一个门面接口ConversionService&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;直接通过ConversionService来进行类型转换，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;而不需要面向具体的Converter或者是GenericConverter&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="851.5" y="-11380" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-120" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;是一个门面接口，他也定义了转换方法&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;将PropertyEditor和ConversionService进行整合，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;方便我们同时使用PropertyEditor和ConversionService&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1129" y="-10695" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="Agjq1IO1DCSdrjI2zt5C-121" value="&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;类型转换API&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;Spring类型转换主要涉及到以下几个api：&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;PropertyEditor：String转换成目标类型&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;Converter：用于一个类型转换成另一个类型&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;GenericConverter：用于处理泛型的转换，主要用于集合&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;ConversionService：门面接口，内部会调用Converter和GenericConverter&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;TypeConverter：门面接口，内部会调用PropertyEditor和ConversionService&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="392.5" y="-13813" width="580" height="190" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertyEditorSupport&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="879.0400000000001" y="-13378" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-2" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ByteArrayPropertyEditor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="628.6300000000001" y="-13141" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-3" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CharacterEditor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="537.0000000000001" y="-13269" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-4" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CharArrayPropertyEditor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1154.02" y="-13128" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-5" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ClassArrayEditor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1249.23" y="-13258" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-6" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-84" target="Agjq1IO1DCSdrjI2zt5C-87" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="864.7900000000001" y="-13243" as="sourcePoint" />
            <mxPoint x="914.7900000000001" y="-13293" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-7" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-86" target="Agjq1IO1DCSdrjI2zt5C-87" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="864.7900000000001" y="-13243" as="sourcePoint" />
            <mxPoint x="914.7900000000001" y="-13293" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-8" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-85" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="864.7900000000001" y="-13243" as="sourcePoint" />
            <mxPoint x="984.7900000000001" y="-13333" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-9" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-83" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="864.7900000000001" y="-13243" as="sourcePoint" />
            <mxPoint x="984.7900000000001" y="-13333" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-10" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.495;entryY=-0.114;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-87" target="Agjq1IO1DCSdrjI2zt5C-100" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="864.7900000000001" y="-13243" as="sourcePoint" />
            <mxPoint x="834.7900000000001" y="-13523" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-11" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;PropertyEditor并不是Spring提供的api，而是JDK提供的api，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;作用其实就是将String类型的字符串转换成Java对象属性值&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;在转换的过程中，Spring会先调用PropertyEditor的setAsText方法将字符串传入，&lt;/div&gt;&lt;div style=&quot;&quot;&gt;然后再调用getValue方法获取转换后的值。&lt;/div&gt;&lt;div style=&quot;&quot;&gt;Spring提供了很多PropertyEditor的实现，可以实现字符串到多种类型的转换&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="373.9999999999999" y="-13580" width="470" height="100" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-12" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Converter是个接口，泛型S是被转换的对象类型，泛型T是需要被转成的类型&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;主要包括日期类型的转换和String类型转换成其它的类型&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="340" y="-12890" width="430" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-14" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CalendarToDateConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="396.87" y="-12625" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-15" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CalendarToLocalDateConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="700.49" y="-12335" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-16" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CalendarToLocalDateTimeConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1222.12" y="-12575" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-17" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CalendarToLongConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="462.62" y="-12515" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-18" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CalendarToZonedDateTimeConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="502.87" y="-12425" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-19" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;DateTimeToCalendarConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1274.12" y="-12702" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-20" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;DateTimeToDateConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="389.12" y="-12747" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-21" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;DateTimeToLocalDateTimeConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1134.62" y="-12445" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-22" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;LocalDateTimeToLocalDateConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1063.17" y="-12335" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-23" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-107" target="Agjq1IO1DCSdrjI2zt5C-90" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="994.12" y="-12550" as="sourcePoint" />
            <mxPoint x="904.12" y="-12770" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-24" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-106" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="994.12" y="-12550" as="sourcePoint" />
            <mxPoint x="907.12" y="-12840" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-25" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-81" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="994.12" y="-12550" as="sourcePoint" />
            <mxPoint x="904.12" y="-12840" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-26" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-108" target="Agjq1IO1DCSdrjI2zt5C-90" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="994.12" y="-12550" as="sourcePoint" />
            <mxPoint x="1044.12" y="-12600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-27" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-104" target="Agjq1IO1DCSdrjI2zt5C-90" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="994.12" y="-12550" as="sourcePoint" />
            <mxPoint x="1044.12" y="-12600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-28" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-102" target="Agjq1IO1DCSdrjI2zt5C-90" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="994.12" y="-12550" as="sourcePoint" />
            <mxPoint x="904.12" y="-12830" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-29" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-103" target="Agjq1IO1DCSdrjI2zt5C-90" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="994.12" y="-12550" as="sourcePoint" />
            <mxPoint x="1044.12" y="-12600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-30" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-82" target="Agjq1IO1DCSdrjI2zt5C-90" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="994.12" y="-12550" as="sourcePoint" />
            <mxPoint x="1044.12" y="-12600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-31" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-105" target="Agjq1IO1DCSdrjI2zt5C-90" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="994.12" y="-12550" as="sourcePoint" />
            <mxPoint x="1044.12" y="-12600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-32" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;主要作用是可以处理带有泛型类型的转换，主要的就是面向集合数组转换操作&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;Converter和GenericConverter其实是依赖关系&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="378" y="-12090" width="430" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-33" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;MapToMapConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="571" y="-11898" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-34" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CollectionToArrayConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="659.5" y="-11770" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-35" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AnnotationParserConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1140.46" y="-11777" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-36" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CollectionToObjectConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1190.62" y="-11905" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-38" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="844" y="-11660" width="308" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-39" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CollectionToCollectionConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="866.59" y="-11645" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-40" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.518;entryY=0.994;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="OZDBB6FNwcegUENohpiK-38" target="Agjq1IO1DCSdrjI2zt5C-97" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1055" y="-11860" as="sourcePoint" />
            <mxPoint x="1105" y="-11910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-41" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.54;entryY=1.086;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-111" target="Agjq1IO1DCSdrjI2zt5C-97" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1055" y="-11860" as="sourcePoint" />
            <mxPoint x="1105" y="-11910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-42" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.284;entryY=0.005;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-112" target="Agjq1IO1DCSdrjI2zt5C-118" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1055" y="-11860" as="sourcePoint" />
            <mxPoint x="1105" y="-11910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-43" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-109" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1055" y="-11860" as="sourcePoint" />
            <mxPoint x="955" y="-12020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-44" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-110" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1055" y="-11860" as="sourcePoint" />
            <mxPoint x="955" y="-12020" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-45" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1477.38" y="-10700" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-46" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="941.88" y="-10345" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-47" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1463.38" y="-10547" width="329.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-48" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="936.49" y="-10532" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-49" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1310.25" y="-11470" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-50" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="917.9300000000001" y="-11250" width="289.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-51" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="959.68" y="-10950" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-52" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="958" y="-11100" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-53" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;GenericConversionService&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="968" y="-11080" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-54" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;DefaultConversionService&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="969.68" y="-10942" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-55" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConfigurableConversionService&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="917.9300000000001" y="-11235" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-56" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConverterRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1335" y="-11455" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-57" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Converter还是GenericConverter，其实都是类型转换的，并且类型转换的实现也很多，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Spring为了方便我们使用Converter还是GenericConverter，提供了一个门面接口ConversionService&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;可以直接通过ConversionService来进行类型转换，而不需要面向具体的Converter或者是GenericConverter&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;ConversionService有一个基本的实现GenericConversionService&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;不直接用GenericConversionService，而是用DefaultConversionService&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;或者是ApplicationConversionService（SpringBoot环境底下使用）&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;因为DefaultConversionService和ApplicationConversionService在创建的时候，&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;会添加很多Spring自带的Converter和GenericConverter，就不需要我们手动添加了&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="239.5" y="-11390" width="600" height="230" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-58" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;ConverterRegistry提供了对Converter和GenericConverter进行增删改查的方法。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;往ConversionService中添加Converter或者是GenericConverter了，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;因为最终还是通过Converter和GenericConverter来实现转换的&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1385" y="-11390" width="470" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-59" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-51" target="OZDBB6FNwcegUENohpiK-52" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="977" y="-11140" as="sourcePoint" />
            <mxPoint x="1027" y="-11190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-60" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.561;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-52" target="OZDBB6FNwcegUENohpiK-50" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="960" y="-11140" as="sourcePoint" />
            <mxPoint x="1010" y="-11190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-61" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-50" target="OZDBB6FNwcegUENohpiK-49" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="960" y="-11140" as="sourcePoint" />
            <mxPoint x="1010" y="-11190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-62" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-50" target="Agjq1IO1DCSdrjI2zt5C-92" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="960" y="-11140" as="sourcePoint" />
            <mxPoint x="1010" y="-11190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-63" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;将PropertyEditor和ConversionService进行整合，方便我们同时使用PropertyEditor和ConversionService&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;convertIfNecessary方法会去调用PropertyEditor和ConversionService进行类型转换，值得注意的是，优先使用PropertyEditor进行转换，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;如果没有找到对应的PropertyEditor，会使用ConversionService进行转换&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;TypeConverter有个简单的实现SimpleTypeConverter&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="239.5" y="-10670" width="770" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-64" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;TypeConverterSupport&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="967.37" y="-10517" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-65" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertyEditorRegistrySupport&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1497.4700000000003" y="-10532" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-66" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SimpleTypeConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="966.88" y="-10327" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-67" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertyEditorRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1522.88" y="-10685" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-69" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-46" target="OZDBB6FNwcegUENohpiK-48" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1002.38" y="-10515" as="sourcePoint" />
            <mxPoint x="1052.38" y="-10565" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-70" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-48" target="Agjq1IO1DCSdrjI2zt5C-93" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1002.38" y="-10515" as="sourcePoint" />
            <mxPoint x="1052.38" y="-10565" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-71" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1.018;exitY=0.515;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="OZDBB6FNwcegUENohpiK-64" target="OZDBB6FNwcegUENohpiK-47" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1002.38" y="-10515" as="sourcePoint" />
            <mxPoint x="1052.38" y="-10565" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-72" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-47" target="OZDBB6FNwcegUENohpiK-45" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1002.38" y="-10515" as="sourcePoint" />
            <mxPoint x="1052.38" y="-10565" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-73" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="Agjq1IO1DCSdrjI2zt5C-88" target="Agjq1IO1DCSdrjI2zt5C-87" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1431" y="-13293" as="sourcePoint" />
            <mxPoint x="1481" y="-13343" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-74" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="439" y="-10040" width="1117" height="330" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-75" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;TypeConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="871.5" y="-10030" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-77" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="522.5" y="-9970" width="323.5" height="230" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-78" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="944" y="-9980" width="542" height="230" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-79" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="988" y="-9930" width="218" height="150" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-80" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="1243" y="-9930" width="218" height="150" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-81" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConversionService&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1076.5" y="-9970" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-82" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertyEditor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="580.5" y="-9890" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-83" value="&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;GenericConverter&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1276" y="-9880" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-84" value="&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Converter&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1043.5" y="-9870" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-85" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;PropertyEditor：String转换成目标类型&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Converter：用于一个类型转换成另一个类型&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;GenericConverter：用于处理泛型的转换，主要用于集合&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;ConversionService：门面接口，内部会调用Converter和GenericConverter&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;TypeConverter：门面接口，内部会调用PropertyEditor和ConversionService&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="267.62" y="-10172" width="440" height="90" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-90" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="932.3" y="-8960" width="262" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-91" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="594.8700000000001" y="-8560" width="262" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-92" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="1" vertex="1">
          <mxGeometry x="270.37" y="-8640" width="262" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-93" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="1" vertex="1">
          <mxGeometry x="270.37" y="-8760" width="262" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-94" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="594.8700000000001" y="-8710" width="262" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-95" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="598.0000000000001" y="-8862" width="262" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-96" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="602.3700000000001" y="-9080" width="262" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-97" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="602.0000000000001" y="-9240" width="262" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-98" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;@Value(&quot;Key&quot;)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="657.41" y="-9212" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-99" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Key&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="690.78" y="-9060" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-100" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;配置value&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="686.5" y="-8842" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-102" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;TypeConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="672.87" y="-8690" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-103" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertyEditor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="299.37" y="-8732" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-105" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConversionService&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="295.12" y="-8620" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-106" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;符合字段类型&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="655.19" y="-8532" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-107" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Environment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="981.3" y="-8940" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-108" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-97" target="OZDBB6FNwcegUENohpiK-96" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1156.37" y="-9010" as="sourcePoint" />
            <mxPoint x="1206.37" y="-9060" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-109" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-96" target="OZDBB6FNwcegUENohpiK-90" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1156.37" y="-9010" as="sourcePoint" />
            <mxPoint x="1206.37" y="-9060" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-110" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;处理占位符&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;获取配置值&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="924.3000000000001" y="-9030" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-111" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;取出key&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="731.37" y="-9142" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-112" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-90" target="OZDBB6FNwcegUENohpiK-95" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1156.37" y="-8810" as="sourcePoint" />
            <mxPoint x="1206.37" y="-8860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-113" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;获取到配置值&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="896.37" y="-8832" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-114" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-95" target="OZDBB6FNwcegUENohpiK-94" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1156.37" y="-8810" as="sourcePoint" />
            <mxPoint x="1206.37" y="-8860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-115" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-94" target="OZDBB6FNwcegUENohpiK-91" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1156.37" y="-8810" as="sourcePoint" />
            <mxPoint x="1206.37" y="-8860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-116" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;类型转换&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="741.37" y="-8772" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-117" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;转换&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="721.37" y="-8612" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-118" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-92" target="OZDBB6FNwcegUENohpiK-94" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="676.37" y="-8720" as="sourcePoint" />
            <mxPoint x="1206.37" y="-8860" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-119" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-93" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1156.37" y="-8810" as="sourcePoint" />
            <mxPoint x="596.37" y="-8670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-120" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Environment中到底是如何进行类型转换的，让我们看看Environment类的接口体系&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Environment有个子接口ConfigurableEnvironment中，前面也提到过&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;它继承了ConfigurablePropertyResolver接口&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;而ConfigurablePropertyResolver有一个setConversionService方法&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Environment底层实际上是通过ConversionService实现类型转换的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;这其实也就造成了一个问题，因为ConversionService和PropertyEditor属于并列关系，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;那么就会导致Environment无法使用PropertyEditor来进行类型转换，也就会丧失部分Spring提供的类型转换功能，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;就比如无法通过Environment将String转换成Resource对象，因为Spring没有实现String转换成Resource的Converter&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1214" y="-9040" width="660" height="190" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-121" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Spring&amp;nbsp; 数据绑定&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="436.37" y="-16160" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-122" value="&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;数据绑定的核心api主要包括以下几个：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;PropertyValues&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;BeanWrapper&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot; color=&quot;#007fff&quot;&gt;DataBinder&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="615.87" y="-16070" width="300" height="110" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-126" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="882.4999999999999" y="-15545" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-127" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1137.9299999999998" y="-15655" width="372.07" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-128" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="569" y="-15652" width="321" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-129" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="593.25" y="-14340" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-130" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="592.5" y="-15250" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-131" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="863.5" y="-15940" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-132" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertyValues&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="917" y="-15915" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-133" value="&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;PropertyValue就是就是封装了属性名和对应的属性值，它就是数据绑定时属性值的来源。&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;以前面的提到的xml创建Bean为例，Spring在启动的时候会去解析xml中的&amp;lt;property/&amp;gt;标签，然后将name和value封装成PropertyValue&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;当创建User这个Bean的时候，到了属性绑定的阶段的时候，就会取出PropertyValue，设置到User的username属性上。&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;而PropertyValues，比PropertyValue多了一个s，也就是复数的意思，所以其实PropertyValues本质上就是PropertyValue的一个集合&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;因为一个Bean可能有多个属性配置，所以就用PropertyValues来保存。&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="746.87" y="-15842" width="750" height="130" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-134" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanWrapper&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="668.5" y="-15225" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-136" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;BeanWrapper其实就数据绑定的核心api了，因为在Spring中涉及到数据绑定都是通过BeanWrapper来完成的，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;比如前面提到的Bean的属性的绑定，就是通过BeanWrapper来的&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot; style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;BeanWrapper是一个接口，他有一个唯一的实现BeanWrapperImpl&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot; style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;BeanWrapperImpl也间接实现了TypeConverter接口&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;当然底层还是通过前面提到的ConversionService和PropertyEditor实现的&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;所以当配置的类型跟属性的类型不同时，就可以对配置的类型进行转换，然后再绑定到属性上&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="821.5" y="-14940" width="820" height="210" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-137" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;数据绑定和@Value的异同，因为这两者看起来好像是一样的，但实际还是有点区别的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;相同点：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;两者都会涉及到类型转换，@Value和数据绑定都会将值转换成目标属性对应的类型，并且都是通过TypeConverter来转换的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;不同点：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;1、发生时机不同，@Value比数据绑定更早，当@Value都注入完成之后才会发生数据绑定(属性赋值)&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;2、属性赋值方式不同，@Value是通过反射来的，而是数据绑定是通过setter方法来的，如果没有setter方法，属性是没办法绑定的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="874.5" y="-9352" width="710" height="140" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-138" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;底层也是间接通过BeanWrapper来实现的数据绑定的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;相比于BeanWrapper多了一些功能，比如在数据绑定之后，可以对数据校验&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;SpringMVC的参数校验就是通过DataBinder来的，所以DataBinder其实在SpringMVC中用的比较多，但是在Spring中确用的很少&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;SpringMVC中关于请求参数处理的HandlerMethodArgumentResolver的实现，里面有的实现会用到DataBinder（WebDataBinder）&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;来进行数据请求参数跟实体类的数据绑定、类型转换、数据校验等等。&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="852.13" y="-14290" width="740" height="90" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-139" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;DataBinder&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="665.75" y="-14315" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-143" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="800.5" y="-14530" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-144" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="458.7099999999999" y="-14530" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-145" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="589" y="-15030" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-150" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="795.38" y="-14120" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-151" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="398.7499999999999" y="-14120" width="250" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-152" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AnnotationPropertyValuesAdapter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="591.37" y="-15627" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-153" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ServletRequestParameterPropertyValues&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1148" y="-15630" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-154" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;MutablePropertyValues&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="912.5" y="-15515" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-155" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-128" target="OZDBB6FNwcegUENohpiK-131" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1130" y="-15535" as="sourcePoint" />
            <mxPoint x="1180" y="-15585" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-156" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-126" target="OZDBB6FNwcegUENohpiK-131" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1130" y="-15535" as="sourcePoint" />
            <mxPoint x="1180" y="-15585" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-157" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-127" target="OZDBB6FNwcegUENohpiK-131" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1130" y="-15535" as="sourcePoint" />
            <mxPoint x="1180" y="-15585" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-158" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanWrapperImpl&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="634" y="-15005" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-159" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-145" target="OZDBB6FNwcegUENohpiK-130" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="977.5000000000001" y="-15150" as="sourcePoint" />
            <mxPoint x="1007.5000000000001" y="-15220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-160" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertyEditorRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="483.84000000000003" y="-14505" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-161" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;TypeConverter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="860.96" y="-14510" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-162" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ServletRequestDataBinder&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="414" y="-14095" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-163" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;WebRequestDataBinder&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="822.75" y="-14100" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-164" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-129" target="OZDBB6FNwcegUENohpiK-144" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1099.38" y="-14370" as="sourcePoint" />
            <mxPoint x="1149.38" y="-14420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-165" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-129" target="OZDBB6FNwcegUENohpiK-143" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1099.38" y="-14370" as="sourcePoint" />
            <mxPoint x="1149.38" y="-14420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-166" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-151" target="OZDBB6FNwcegUENohpiK-129" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1099.38" y="-14370" as="sourcePoint" />
            <mxPoint x="1149.38" y="-14420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-167" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-150" target="OZDBB6FNwcegUENohpiK-129" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1099.38" y="-14370" as="sourcePoint" />
            <mxPoint x="1149.38" y="-14420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-168" value="&lt;div&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b style=&quot;&quot;&gt;Spring&amp;nbsp;&lt;/b&gt;&lt;/span&gt;&lt;b style=&quot;&quot;&gt;&lt;font style=&quot;&quot;&gt;泛型处理&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="359.31" y="-18880" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-169" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;泛型处理其实是一块相对独立的东西，因为它就只是一个工具类，只还不过这个工具类在Spring中却是无处不在！&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;ResolvableType提供了有一套灵活的API，可以在运行时获取和处理泛型类型等信息。&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;通过ResolvableType#forClass方法创建ResolvableType之外，还可以通过一下几个方法创建：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;forField(Field field)：获取字段类型对应的ResolvableType&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;forMethodReturnType(Method method)：获取方法返回值类型对应的ResolvableType&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;forMethodParameter(Method method, int parameterIndex)：获取方法某个位置方法参数对应的ResolvableType&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;forConstructorParameter(Constructor&amp;lt;?&amp;gt; constructor, int parameterIndex)：获取构造方法某个构造参数对应的ResolvableType&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;对于一个类方法参数，方法返回值，字段等等都可以获取到对应的ResolvableType&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="362.43" y="-18860" width="730" height="200" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-170" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="534.43" y="-18610" width="310" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-171" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ResolvableType&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="627.43" y="-18590" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-172" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;国际化（Internationalization，简称i18n）也是Spring提供的一个核心功能，它其实也是一块相对独立的功能。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;所谓的国际化，其实理解简单点就是对于不同的地区国家，输出的文本内容语言不同。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Spring的国际化其实主要是依赖Java中的国际化和文本处理方式。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="407.13" y="-18120" width="620" height="90" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-173" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Spring 国际化&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="345.5" y="-18320" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-174" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Java中的国际化&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="376" y="-18012" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-175" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Locale&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Locale是Java提供的一个类，它可以用来标识不同的语言和地区，如en_US表示美国英语，zh_CN表示中国大陆中文等&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="366" y="-17970" width="650" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-176" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;ResourceBundle&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;ResourceBundle是一个加载本地资源的一个类，他可以根据传入的Locale不同，加载不同的资源。&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;资源文件通常是.properties文件，文件名命名规则如下：&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;basename_lang_country.properties&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;英语Locale的lang为en，country为空字符串，那么此时英语地区对应资源文件就可以命名为：basename_en.properties，由于country为空字符串，可以省略&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;中国大陆Locale&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;可以命为：basename_zh_CN.properties&lt;/b&gt;&lt;br&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;通过ResourceBundle#getBundle(String baseName,Locale locale)方法来获取获取ResourceBundle&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;第一个参数baseName就是我们的文件名中的basename，对于我们的demo来说，就是message&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;第二个参数就是地区，根据地区的不同加载不同地区的文件&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;除了这种方式之外，其实还可以继承ResourceBundle内部一个Control类，&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;重写newBundle方法，&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;newBundle是创建ResourceBundle对应核心方法，重写的时候你就可以随心所欲让它支持其它编码方式。&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;有了新的Control之后，获取ResourceBundle时只需要通过ResourceBundle#getBundle(String baseName, Locale targetLocale,Control control)方法指定Control就可以了。&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;Spring实际上就是通过这种方式扩展&lt;/div&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="370.5" y="-17840" width="970" height="300" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-177" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="704.5" y="-17910" width="267.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-178" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Locale&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="814" y="-17895" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-180" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="697.5" y="-17540" width="260.5" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-181" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ResourceBundle&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="767" y="-17520" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-182" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;MessageFormat&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;MessageFormat顾明思议就是把消息格式化。它可以接收一条包含占位符的消息模板，并根据提供的参数替换占位符，生成最终的消息。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;MessageFormat对于将动态值插入到消息中非常有用，如欢迎消息、错误消息等。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="388" y="-17430" width="750" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-183" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="663.75" y="-17300" width="301.75" height="90" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-184" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;MessageFormat&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="749" y="-17270" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-185" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Spring国际化&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="371.5" y="-17180" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-186" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;Spring提供了一个国际化接口MessageSource&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;基于ResourceBundle + MessageFormat的实现ResourceBundleMessageSource&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;可以在资源文件存储消息的模板，然后通过MessageFormat来替换占位符，MessageSource的getMessage方法就可以传递具体的参数&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="402.5" y="-17150" width="740" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-187" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Locale：不同国家和地区的信息封装&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;ResourceBundle：根据不同国家的Locale，加载对应的资源文件，这个资源文件的命名需要遵守basename_lang_country.properties命名规范&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;MessageFormat：其实就是一个文本处理的方式，他可以解析模板，根据参数替换模板的占位符&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;MessageSource：Spring提供的国际化接口，其实他底层主要是依赖Java的ResourceBundle和MessageFormat，资源文件存储模板信息，MessageFormat根据MessageSource方法的传参替换模板中的占位符&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="426.59" y="-18270" width="1150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-189" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="826.49" y="-16356" width="385" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-190" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="402" y="-16356" width="332.25" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-191" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="593.25" y="-16540" width="375" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-192" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="653.99" y="-16680" width="260" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-193" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="749.5" y="-16877" width="260" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-194" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="323.75" y="-16872" width="260" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-195" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="748.5" y="-17000" width="260" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-196" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;MessageSource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="809.5" y="-16970" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-197" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;MessageSourceSupport&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="354.38" y="-16854" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-198" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;HierarchicalMessageSource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="771.5" y="-16852" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-199" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractMessageSource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="679.24" y="-16655" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-200" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractResourceBasedMessageSource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="593.25" y="-16525" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-201" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ResourceBundleMessageSource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="433" y="-16331" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-202" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ReloadableResourceBundleMessageSource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="831.49" y="-16321" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-203" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-193" target="OZDBB6FNwcegUENohpiK-195" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="920" y="-16690" as="sourcePoint" />
            <mxPoint x="970" y="-16740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-204" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-192" target="OZDBB6FNwcegUENohpiK-194" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="920" y="-16690" as="sourcePoint" />
            <mxPoint x="970" y="-16740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-205" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-192" target="OZDBB6FNwcegUENohpiK-193" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="920" y="-16690" as="sourcePoint" />
            <mxPoint x="970" y="-16740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-206" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-191" target="OZDBB6FNwcegUENohpiK-192" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="920" y="-16690" as="sourcePoint" />
            <mxPoint x="970" y="-16740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-207" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-190" target="OZDBB6FNwcegUENohpiK-191" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="920" y="-16690" as="sourcePoint" />
            <mxPoint x="970" y="-16740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-208" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-189" target="OZDBB6FNwcegUENohpiK-191" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="920" y="-16690" as="sourcePoint" />
            <mxPoint x="970" y="-16740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-209" value="&lt;font style=&quot;font-size: 22px;&quot;&gt;&lt;b style=&quot;&quot;&gt;BeanFactory&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="285.75" y="-20477" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-223" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1090.1699999999998" y="-19862" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-229" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" parent="1" vertex="1">
          <mxGeometry x="1140.4899999999998" y="-19200" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-230" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1373.3600000000001" y="-19660" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-231" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="779.7699999999998" y="-19647" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-232" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="1" vertex="1">
          <mxGeometry x="1213.12" y="-21600" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-236" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1487.99" y="-19365" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-238" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1201.1699999999998" y="-19832" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-257" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AutowireCapableBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1538.49" y="-19338" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-260" value="&lt;b&gt;ApplicationContext&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1327.7799999999997" y="-21570" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-261" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;gradientColor=#7ea6e0;" parent="1" vertex="1">
          <mxGeometry x="1741.7799999999997" y="-21940" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-262" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;gradientColor=#7ea6e0;" parent="1" vertex="1">
          <mxGeometry x="589.28" y="-21937" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-263" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;gradientColor=#7ea6e0;" parent="1" vertex="1">
          <mxGeometry x="1360.2799999999997" y="-21940" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-264" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;gradientColor=#7ea6e0;" parent="1" vertex="1">
          <mxGeometry x="1969.7399999999998" y="-21820" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-265" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;gradientColor=#97d077;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1210.2799999999997" y="-21260" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-266" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;gradientColor=#ffd966;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1210.2799999999997" y="-21420" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-267" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;gradientColor=#7ea6e0;" parent="1" vertex="1">
          <mxGeometry x="986.28" y="-21940" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-268" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;gradientColor=#7ea6e0;" parent="1" vertex="1">
          <mxGeometry x="344.65999999999997" y="-21780" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-269" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" parent="1" vertex="1">
          <mxGeometry x="883.12" y="-20910" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-270" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" parent="1" vertex="1">
          <mxGeometry x="118.62" y="-20910" width="420" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-271" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1735.23" y="-21057" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-272" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" parent="1" vertex="1">
          <mxGeometry x="313.62" y="-20768" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-273" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0cee2;strokeColor=#56517e;" parent="1" vertex="1">
          <mxGeometry x="564" y="-21057" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-275" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1145.1499999999999" y="-22210" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-276" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1742.2799999999997" y="-22200" width="330" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-277" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ListableBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="873.3599999999998" y="-19620" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-278" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;HierarchicalBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1450.9900000000002" y="-19637" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-279" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConfigurableBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1548.61" y="-19508" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-285" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;gradientColor=#97d077;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1537.8999999999999" y="-19047" width="329" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-286" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;DefaultListableBeanFactory&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1589.3999999999999" y="-19027" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-287" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;EnvironmentCapable&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="418.65999999999997" y="-21762" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-288" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ApplicationEventPublisher&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2019.74" y="-21792" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-289" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConfigurableApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1239.6599999999999" y="-21390" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-290" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1253.7799999999997" y="-21235" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-291" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ListableBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1065" y="-21915" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-292" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;HierarchicalBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1417.2399999999998" y="-21915" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-293" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;MessageSource&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="674.6600000000001" y="-21912" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-294" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ResourcePatternResolver&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1794.7799999999997" y="-21910" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-295" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ResourceLoader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1829.7799999999997" y="-22172" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-296" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1250.1499999999996" y="-22185" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-297" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-232" target="OZDBB6FNwcegUENohpiK-267" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1389.2799999999997" y="-21830" as="sourcePoint" />
            <mxPoint x="1439.2799999999997" y="-21880" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1378.2799999999997" y="-21670" />
              <mxPoint x="1151.28" y="-21670" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-298" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-232" target="OZDBB6FNwcegUENohpiK-268" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1389.2799999999997" y="-21830" as="sourcePoint" />
            <mxPoint x="1439.2799999999997" y="-21880" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1378.2799999999997" y="-21670" />
              <mxPoint x="509.28" y="-21660" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-299" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1381.5299999999997" y="-21640" as="sourcePoint" />
            <mxPoint x="1523.7799999999997" y="-21860" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1379.2799999999997" y="-21670" />
              <mxPoint x="1524.2799999999997" y="-21670" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-300" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-232" target="OZDBB6FNwcegUENohpiK-262" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1389.2799999999997" y="-21830" as="sourcePoint" />
            <mxPoint x="1439.2799999999997" y="-21880" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1378.2799999999997" y="-21670" />
              <mxPoint x="754.28" y="-21660" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-301" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-232" target="OZDBB6FNwcegUENohpiK-264" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1389.2799999999997" y="-21830" as="sourcePoint" />
            <mxPoint x="1969.2799999999997" y="-21770" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1383.2799999999997" y="-21670" />
              <mxPoint x="2135" y="-21670" />
              <mxPoint x="2134.2799999999997" y="-21700" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-302" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-232" target="OZDBB6FNwcegUENohpiK-261" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1389.2799999999997" y="-21830" as="sourcePoint" />
            <mxPoint x="1439.2799999999997" y="-21880" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1379.2799999999997" y="-21670" />
              <mxPoint x="1907.2799999999997" y="-21670" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-303" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-267" target="OZDBB6FNwcegUENohpiK-275" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1389.2799999999997" y="-21830" as="sourcePoint" />
            <mxPoint x="1439.2799999999997" y="-21880" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1149.28" y="-22070" />
              <mxPoint x="1309.2799999999997" y="-22070" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-304" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-263" target="OZDBB6FNwcegUENohpiK-275" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1389.2799999999997" y="-21830" as="sourcePoint" />
            <mxPoint x="1439.2799999999997" y="-21880" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1529.2799999999997" y="-22070" />
              <mxPoint x="1310.2799999999997" y="-22070" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-305" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-261" target="OZDBB6FNwcegUENohpiK-276" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1389.2799999999997" y="-21830" as="sourcePoint" />
            <mxPoint x="1439.2799999999997" y="-21880" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-306" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Spring&amp;nbsp; ApplicationContext&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="229.27999999999997" y="-22690" width="310" height="110" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-307" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;提供了获取Environment的功能&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="549.28" y="-21700" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-308" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;ApplicationContext继承的几个接口，&lt;/font&gt;&lt;/b&gt;&lt;font style=&quot;background-color: initial;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;EnvironmentCapable这个接口比较简单，提供了获取Environment的功能，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;ApplicationContext也继承了ListableBeanFactory和HierarchicalBeanFactory，也就说明ApplicationContext其实他也是一个BeanFactory，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;ApplicationContext是一个集万千功能为一身的接口，一旦你获取到了ApplicationContext（可以@Autowired注入），你就可以用来获取Bean、加载资源、获取环境，还可以国际化&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;ApplicationContext继承了这些接口，但是ApplicationContext对于接口的实现是通过一种委派的方式&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-weight: bold; text-align: left;&quot;&gt;ApplicationContext继承了ResourcePatternResolver接口，所以我实现了getResources方法，但是真正的实现其实是交给变量中的PathMatchingResourcePatternResolver来实现的，这其实就是委派，不直接实现，而是交给其它真正实现了这个接口的类来处理&lt;/div&gt;&lt;div style=&quot;font-weight: bold; text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold; text-align: left;&quot;&gt;同理，ApplicationContext对于BeanFactory接口的实现其实最终也是交由DefaultListableBeanFactory来委派处理的。&lt;/div&gt;&lt;div style=&quot;font-weight: bold; text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold; text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;ApplicationContext有一个子接口，ConfigurableApplicationContext&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;从提供的方法看出，就是可以对ApplicationContext进行配置，比如设置Environment，同时也能设置parent，说明了ApplicationContext也有子父的概念&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;ApplicationContext的实现很多，但是他有一个非常重要的抽象实现AbstractApplicationContext，因为其它的实现都是继承这个抽象实现&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;这个类主要是实现了一些继承的接口方法，通过委派的方式，比如对于BeanFactory接口的实现，&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;b&gt;并且AbstractApplicationContext这个类也实现了一个非常核心的refresh方法&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;b&gt;所有的ApplicationContext在创建之后必须调用这个refresh方法之后才能使用&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="236.64999999999998" y="-22640" width="1430" height="400" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-311" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;GenericApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="617" y="-21032" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-312" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AnnotationConfigApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="323.62" y="-20743" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-313" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractRefreshableApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1741.7799999999997" y="-21040" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-314" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AnnotationConfigServletWebApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="148.62" y="-20885" width="390" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-315" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;GenericWebApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="921.37" y="-20885" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-320" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2474.5299999999997" y="-20758" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-321" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2839.2799999999993" y="-20758" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-322" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2060.87" y="-20758" width="378.41" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-323" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="2195.2799999999997" y="-20935" width="426.75" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-324" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1643.2399999999998" y="-20758" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-325" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" parent="1" vertex="1">
          <mxGeometry x="746.99" y="-20768" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-326" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1221.33" y="-20758" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-327" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="1354.9900000000002" y="-20920" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-329" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ServletWebServerApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="751.99" y="-20748" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-333" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-266" target="OZDBB6FNwcegUENohpiK-232" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="659.28" y="-21260" as="sourcePoint" />
            <mxPoint x="709.28" y="-21310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-334" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-265" target="OZDBB6FNwcegUENohpiK-266" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="659.28" y="-21260" as="sourcePoint" />
            <mxPoint x="709.28" y="-21310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-335" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-273" target="OZDBB6FNwcegUENohpiK-265" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="659.28" y="-21260" as="sourcePoint" />
            <mxPoint x="709.28" y="-21310" as="targetPoint" />
            <Array as="points">
              <mxPoint x="729" y="-21120" />
              <mxPoint x="1375" y="-21110" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-336" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-270" target="OZDBB6FNwcegUENohpiK-273" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="408.62" y="-21060" as="sourcePoint" />
            <mxPoint x="458.62" y="-21110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-337" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-272" target="OZDBB6FNwcegUENohpiK-273" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="408.62" y="-21060" as="sourcePoint" />
            <mxPoint x="458.62" y="-21110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-338" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-325" target="OZDBB6FNwcegUENohpiK-273" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="408.62" y="-21060" as="sourcePoint" />
            <mxPoint x="458.62" y="-21110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-339" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-269" target="OZDBB6FNwcegUENohpiK-273" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="408.62" y="-21060" as="sourcePoint" />
            <mxPoint x="458.62" y="-21110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-340" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractXmlApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1404.31" y="-20895" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-341" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ClassPathXmlApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1234.33" y="-20728" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-342" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;FileSystemXmlApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1675.3600000000001" y="-20733" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-343" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-271" target="OZDBB6FNwcegUENohpiK-265" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1049.28" y="-20870" as="sourcePoint" />
            <mxPoint x="1099.28" y="-20920" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1900" y="-21110" />
              <mxPoint x="1375" y="-21110" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-344" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-327" target="OZDBB6FNwcegUENohpiK-271" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1189.94" y="-20870" as="sourcePoint" />
            <mxPoint x="1239.94" y="-20920" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-345" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-326" target="OZDBB6FNwcegUENohpiK-327" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1057.49" y="-20870" as="sourcePoint" />
            <mxPoint x="1107.49" y="-20920" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-346" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-324" target="OZDBB6FNwcegUENohpiK-327" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1057.49" y="-20870" as="sourcePoint" />
            <mxPoint x="1107.49" y="-20920" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-347" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractRefreshableWebApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2228.6499999999996" y="-20910" width="360" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-348" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AnnotationConfigWebApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2079.2799999999997" y="-20730" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-349" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-323" target="OZDBB6FNwcegUENohpiK-271" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1399.94" y="-20870" as="sourcePoint" />
            <mxPoint x="1449.94" y="-20920" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-350" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-322" target="OZDBB6FNwcegUENohpiK-323" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1399.94" y="-20870" as="sourcePoint" />
            <mxPoint x="1449.94" y="-20920" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-351" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;GroovyWebApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2876.8099999999995" y="-20728" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-352" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;XmlWebApplicationContext&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2498.5299999999997" y="-20733" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-353" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-320" target="OZDBB6FNwcegUENohpiK-323" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2179.2799999999997" y="-20680" as="sourcePoint" />
            <mxPoint x="2229.2799999999997" y="-20730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-354" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-321" target="OZDBB6FNwcegUENohpiK-323" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2179.2799999999997" y="-20680" as="sourcePoint" />
            <mxPoint x="2229.2799999999997" y="-20730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-355" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;Spring提供的国际化接口，其实他底层主要是依赖Java的ResourceBundle和MessageFormat，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;资源文件存储模板信息，MessageFormat根据MessageSource方法的传参替换模板中的占位符&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="445.19000000000005" y="-21850" width="540" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-357" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;ApplicationEventPublisher跟事件有关。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;Spring事件是一种观察者模式的实现，他的作用主要是用来解耦合的。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;当发生了某件事，只要发布一个事件，对这个事件的监听者（观察者）就可以对事件进行响应或者处理。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1990" y="-21740" width="580" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-358" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;ResourcePatternResolver继承了ResourceLoader&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;通过ResourcePatternResolver提供的方法可以看出，他可以加载多个资源，支持使用通配符的方式，&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;比如classpath*:，就可以加载所有classpath的资源。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2077" y="-21915" width="570" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-359" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;提供了一些获取集合的功能，比如有的接口可能有多个实现，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;通过这些方法就可以获取这些实现对象的集合。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1025" y="-21837" width="350" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-360" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;获取到父容器，说明BeanFactory有子父容器的概念。&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1435" y="-21842" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-362" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConfigurableListableBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1164.9900000000002" y="-19168" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-366" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="2363.99" y="-19850" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-367" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2191.12" y="-20010" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-368" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1989.72" y="-19852" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-369" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1917.49" y="-19692" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-370" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1656.51" y="-19852" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-371" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="2041.24" y="-19540" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-373" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="2041.2399999999998" y="-19365" width="290" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-374" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1946.51" y="-19206" width="318.5" height="70" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-375" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractAutowireCapableBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1950.01" y="-19188" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-376" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractBeanFactory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2110.99" y="-19349" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-379" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;FactoryBeanRegistrySupport&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2073.74" y="-19527" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-380" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SingletonBeanRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1697.23" y="-19844" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-381" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;DefaultSingletonBeanRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1929.6200000000001" y="-19662" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-382" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SimpleAliasRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2052.15" y="-19832" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-383" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AliasRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2272.12" y="-19982" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-384" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanDefinitionRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2407.87" y="-19830" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-385" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-231" target="OZDBB6FNwcegUENohpiK-223" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="944.49" y="-19730" />
              <mxPoint x="1255.49" y="-19730" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-386" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-229" target="OZDBB6FNwcegUENohpiK-231" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1305.49" y="-19260" />
              <mxPoint x="1480.49" y="-19260" />
              <mxPoint x="944.49" y="-19260" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-387" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-230" target="OZDBB6FNwcegUENohpiK-223" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1540.49" y="-19730" />
              <mxPoint x="1255.49" y="-19730" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-388" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-229" target="OZDBB6FNwcegUENohpiK-236" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1305.49" y="-19260" />
              <mxPoint x="1480.49" y="-19260" />
              <mxPoint x="1653.49" y="-19260" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-389" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-236" target="OZDBB6FNwcegUENohpiK-223" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1260.49" y="-19780" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1653.49" y="-19400" />
              <mxPoint x="1255.49" y="-19400" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-390" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-229" target="OZDBB6FNwcegUENohpiK-361" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1475.31" y="-19188" as="sourcePoint" />
            <mxPoint x="1654.1799999999998" y="-19451" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1305.49" y="-19420" />
              <mxPoint x="1581.49" y="-19420" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-391" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-361" target="OZDBB6FNwcegUENohpiK-230" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1581.49" y="-19550" />
              <mxPoint x="1538.49" y="-19550" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-392" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-361" target="OZDBB6FNwcegUENohpiK-370" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1731.49" y="-19550" />
              <mxPoint x="1801.49" y="-19550" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-393" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-285" target="OZDBB6FNwcegUENohpiK-229" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19300" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19350" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1703.49" y="-19100" />
              <mxPoint x="1305.49" y="-19100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-394" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-285" target="OZDBB6FNwcegUENohpiK-374" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19300" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19350" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1702.49" y="-19100" />
              <mxPoint x="2105.49" y="-19100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-395" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-374" target="OZDBB6FNwcegUENohpiK-236" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2105.49" y="-19260" />
              <mxPoint x="1735.49" y="-19260" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-396" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-374" target="OZDBB6FNwcegUENohpiK-373" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19520" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-397" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-373" target="OZDBB6FNwcegUENohpiK-361" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2113.49" y="-19420" />
              <mxPoint x="1731.49" y="-19420" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-398" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-373" target="OZDBB6FNwcegUENohpiK-371" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="2330.49" y="-19440" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2186.49" y="-19420" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-399" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-369" target="OZDBB6FNwcegUENohpiK-370" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19640" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19690" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2062.49" y="-19740" />
              <mxPoint x="1874.49" y="-19740" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-400" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-369" target="OZDBB6FNwcegUENohpiK-368" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19640" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-401" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-368" target="OZDBB6FNwcegUENohpiK-367" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19640" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19690" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2134.49" y="-19900" />
              <mxPoint x="2336.49" y="-19900" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-402" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-371" target="OZDBB6FNwcegUENohpiK-369" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19640" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19690" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2186.49" y="-19580" />
              <mxPoint x="2062.49" y="-19580" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-403" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-366" target="OZDBB6FNwcegUENohpiK-367" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19470" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19520" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2509.49" y="-19900" />
              <mxPoint x="2410.49" y="-19900" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-404" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-285" target="OZDBB6FNwcegUENohpiK-366" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1730.49" y="-19300" as="sourcePoint" />
            <mxPoint x="1780.49" y="-19350" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1702.49" y="-19100" />
              <mxPoint x="2509.49" y="-19100" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-405" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;实现IOC的几个核心的组件&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;BeanFactory及其接口体系：&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;ListableBeanFactory&lt;/div&gt;&lt;div style=&quot;&quot;&gt;HierarchicalBeanFactory&lt;/div&gt;&lt;div style=&quot;&quot;&gt;ConfigurableBeanFactory&lt;/div&gt;&lt;div style=&quot;&quot;&gt;AutowireCapableBeanFactory&lt;/div&gt;&lt;div style=&quot;&quot;&gt;BeanDefinition及其相关组件：&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;BeanDefinition&lt;/div&gt;&lt;div style=&quot;&quot;&gt;BeanDefinitionReader和ClassPathBeanDefinitionScanner：读取资源，生成BeanDefinition&lt;/div&gt;&lt;div style=&quot;&quot;&gt;BeanDefinitionRegistry：存储BeanDefinition&lt;/div&gt;&lt;div style=&quot;&quot;&gt;BeanFactory核心实现：&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;DefaultListableBeanFactory：IOC容器，同时实现了BeanDefinitionRegistry接口&lt;/div&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;/font&gt;&lt;b style=&quot;color: rgb(0, 127, 255);&quot;&gt;s&lt;/b&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;pring的核心就是IOC和AOP，而BeanFactory就是大名鼎鼎的IOC容器，他可以帮我们生产对象，BeanFactory本身是一个接口，&lt;/b&gt;&lt;span style=&quot;font-weight: bold; background-color: initial;&quot;&gt;可以从BeanFactory获取到Bean。&lt;/span&gt;&lt;/font&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;他也有很多子接口，不同的子接口有着不同的功能&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;ListableBeanFactory&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;提供了一些获取集合的功能，比如有的接口可能有多个实现，通过这些方法就可以获取这些实现对象的集合。&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;HierarchicalBeanFactory&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;可以获取到父容器，说明BeanFactory有子父容器的概念。&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;ConfigurableBeanFactory&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;可以对BeanFactory进行配置，可以设置我们前面提到的类型转换的东西，这样在生成Bean的时候就可以类型属性的类型转换了。&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;AutowireCapableBeanFactory&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;提供了自动装配Bean的实现、属性填充、初始化、处理获取依赖注入对象的功能。&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;BeanFactory真正底层的实现类，其实就只有一个，那就是DefaultListableBeanFactory这个类，这个类以及父类真正实现了BeanFactory及其子接口的所有的功能。&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="512" y="-20540" width="900" height="530" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-406" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;提供了一些获取集合的功能，比如有的接口可能有多个实现，通过这些方法就可以获取这些实现对象的集合。&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="590" y="-19532" width="600" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-408" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;可以获取到父容器，说明BeanFactory有子父容器的概念&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1248.25" y="-19580" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-410" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;可以对BeanFactory进行配置，可以设置我们前面提到的类型转换的东西，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;这样在生成Bean的时候就可以类型属性的类型转换了&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1653.74" y="-19478" width="420" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-411" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;提供了自动装配Bean的实现、属性填充、初始化、处理获取依赖注入对象的功能。&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1413.5" y="-19259" width="460" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-412" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;@Autowired最终就会调用AutowireCapableBeanFactory#resolveDependency处理注入的依赖。&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1421.25" y="-19239" width="550" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-413" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;封装了Bean创建过程中所需要的元信息。&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;是BeanDefinition的注册中心，也就是用来保存BeanDefinition的&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2433.74" y="-19766" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-414" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;BeanDefinition是Spring Bean创建环节中很重要的一个东西，它封装了Bean创建过程中所需要的元信息。，&lt;/font&gt;&lt;/b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;一个Bean所创建过程中所需要的一些信息都可以从BeanDefinition中获取，比如这个Bean的class类型，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;这个Bean是否是懒加载，这个Bean是否是单例的等等，因为有了这些信息，Spring才知道要创建一个什么样的Bean。&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;读取BeanDefinition&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;读取BeanDefinition大致分为以下几类&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;BeanDefinitionReader&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;ClassPathBeanDefinitionScanner&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;BeanDefinitionReader可以通过loadBeanDefinitions(Resource resource)方法来加载BeanDefinition，方法参数就是我们前面说的资源，比如可以将Bean定义在xml文件中，这个xml文件就是一个资源&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;BeanDefinitionReader的相关实现：&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;XmlBeanDefinitionReader：读取xml配置的Bean&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;PropertiesBeanDefinitionReader：读取properties文件配置的Bean，是的，你没看错，Bean可以定义在properties文件配置中&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;AnnotatedBeanDefinitionReader：读取通过注解定义的Bean，比如@Lazy注解等等，AnnotatedBeanDefinitionReader不是BeanDefinitionReader的实现，但是作用是一样的&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;ClassPathBeanDefinitionScanner&lt;span style=&quot;background-color: initial;&quot;&gt;作用就是扫描指定包下通过@Component及其派生注解（@Service等等）注解定义的Bean，其实就是@ComponentScan注解的底层实现&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;ClassPathBeanDefinitionScanner这个类其实在很多其它框架中都有使用到，因为这个类可以扫描指定包下，生成BeanDefinition，对于那些需要扫描包来生成BeanDefinition来说，用的很多&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;BeanDefinitionRegistry是BeanDefinition的注册中心，也就是用来保存BeanDefinition的。提供了BeanDefinition的增删查的功能&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;通过BeanDefinitionReader或者是ClassPathBeanDefinitionScanner为每一个Bean生成一个BeanDefinition&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;BeanDefinition生成之后，添加到BeanDefinitionRegistry中&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;当从BeanFactory中获取Bean时，会从BeanDefinitionRegistry中拿出需要创建的Bean对应的BeanDefinition，根据BeanDefinition的信息来生成Bean&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;当生成的Bean是单例的时候，Spring会将Bean保存到SingletonBeanRegistry中，也就是平时说的三级缓存中的第一级缓存中，以免重复创建，需要使用的时候直接从SingletonBeanRegistry中查找&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="303.79" y="-25000" width="1160" height="420" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-415" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2222.88" y="-24470" width="291.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-416" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2139" y="-24177" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-417" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1768.28" y="-24177" width="309.72" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-418" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1764.2800000000002" y="-24320" width="302.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-419" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1787.8400000000001" y="-24485" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-420" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="1" vertex="1">
          <mxGeometry x="970.98" y="-24110" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-421" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" parent="1" vertex="1">
          <mxGeometry x="995.4200000000001" y="-23980" width="356.62" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-422" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" parent="1" vertex="1">
          <mxGeometry x="266.4200000000001" y="-23995" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-423" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" parent="1" vertex="1">
          <mxGeometry x="610.8800000000001" y="-23995" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-424" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="1" vertex="1">
          <mxGeometry x="561.3600000000001" y="-24100" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-425" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="747.8500000000001" y="-24225" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-426" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="237.4600000000002" y="-24240" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-427" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="496.1200000000001" y="-24390" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-428" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="744.3800000000001" y="-24500" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-429" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="356.15999999999997" y="-24500" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-430" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AttributeAccessor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="404.15999999999997" y="-24485" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-431" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanMetadataElement&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="788.79" y="-24485" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-432" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;BeanDefinition&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="571" y="-24370" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-433" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;AbstractBeanDefinition&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="279.4200000000001" y="-24225" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-434" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AnnotatedBeanDefinition&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="775.78" y="-24210" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-435" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;GenericBeanDefinition&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="609.4200000000001" y="-24085" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-437" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ScannedGenericBeanDefinition&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="604.38" y="-23980" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-438" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AnnotatedGenericBeanDefinition&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="259.9200000000001" y="-23982" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-439" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConfigurationClassBeanDefinition&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1017.04" y="-23965" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-440" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;RootBeanDefinition&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1017.9200000000001" y="-24095" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-441" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-427" target="OZDBB6FNwcegUENohpiK-428" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1004" y="-24120" as="sourcePoint" />
            <mxPoint x="1054" y="-24170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-442" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-427" target="OZDBB6FNwcegUENohpiK-429" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1004" y="-24120" as="sourcePoint" />
            <mxPoint x="1054" y="-24170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-443" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-426" target="OZDBB6FNwcegUENohpiK-427" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1004" y="-24120" as="sourcePoint" />
            <mxPoint x="1054" y="-24170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-444" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-425" target="OZDBB6FNwcegUENohpiK-427" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1004" y="-24120" as="sourcePoint" />
            <mxPoint x="1054" y="-24170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-445" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-424" target="OZDBB6FNwcegUENohpiK-425" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="749.9200000000001" y="-24110" as="sourcePoint" />
            <mxPoint x="799.9200000000001" y="-24160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-446" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-422" target="OZDBB6FNwcegUENohpiK-424" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="749.9200000000001" y="-24110" as="sourcePoint" />
            <mxPoint x="799.9200000000001" y="-24160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-447" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-423" target="OZDBB6FNwcegUENohpiK-424" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="749.9200000000001" y="-24110" as="sourcePoint" />
            <mxPoint x="799.9200000000001" y="-24160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-448" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-420" target="OZDBB6FNwcegUENohpiK-425" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="749.9200000000001" y="-24110" as="sourcePoint" />
            <mxPoint x="799.9200000000001" y="-24160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-449" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-421" target="OZDBB6FNwcegUENohpiK-420" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="749.9200000000001" y="-24110" as="sourcePoint" />
            <mxPoint x="799.9200000000001" y="-24160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-450" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanDefinitionReader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1827.97" y="-24470" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-451" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1630.26" y="-23730" width="483.49" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-452" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1950.62" y="-23920" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-453" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1567.54" y="-23920" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-454" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1434" y="-24177" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-455" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2860" y="-24025" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-456" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="2860" y="-24180" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-457" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2860" y="-24345" width="257.12" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-458" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1721.26" y="-23605" width="295" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-459" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AbstractBeanDefinitionReader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1786.4" y="-24305" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-460" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;GroovyBeanDefinitionReader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1439" y="-24162" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-461" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertiesBeanDefinitionReader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1777.36" y="-24162" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-462" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;XmlBeanDefinitionReader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2172.56" y="-24162" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-463" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-418" target="OZDBB6FNwcegUENohpiK-419" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1794" y="-24140" as="sourcePoint" />
            <mxPoint x="1844" y="-24190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-464" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-454" target="OZDBB6FNwcegUENohpiK-418" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1794" y="-24140" as="sourcePoint" />
            <mxPoint x="1844" y="-24190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-465" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-417" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1794" y="-24140" as="sourcePoint" />
            <mxPoint x="1914" y="-24260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-466" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-416" target="OZDBB6FNwcegUENohpiK-418" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1794" y="-24140" as="sourcePoint" />
            <mxPoint x="1844" y="-24190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-468" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ClassPathBeanDefinitionScanner&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1726.26" y="-23590" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-469" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ClassPathScanningCandidateComponentProvider&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1666.25" y="-23723" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-470" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;EnvironmentCapable&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1616.67" y="-23905" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-471" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ResourceLoaderAware&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1980.26" y="-23905" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-472" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-451" target="OZDBB6FNwcegUENohpiK-453" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1715.26" y="-23605" as="sourcePoint" />
            <mxPoint x="1765.26" y="-23655" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-473" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.571;exitY=0.083;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="OZDBB6FNwcegUENohpiK-451" target="OZDBB6FNwcegUENohpiK-452" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1715.26" y="-23605" as="sourcePoint" />
            <mxPoint x="1765.26" y="-23655" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-474" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-458" target="OZDBB6FNwcegUENohpiK-451" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1641.26" y="-22655" as="sourcePoint" />
            <mxPoint x="1691.26" y="-22705" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-475" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;读取xml配置的Bean&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2193.74" y="-24112" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-476" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;读取properties文件配置的Bean，Bean可以定义在properties文件配置中&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1709" y="-24110" width="420" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-477" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AnnotatedBeanDefinitionReader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2237.74" y="-24455" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-478" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;AnnotatedBeanDefinitionReader：读取通过注解定义的Bean，比如@Lazy注解等等，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;AnnotatedBeanDefinitionReader不是BeanDefinitionReader的实现，但是作用是一样的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2172.56" y="-24390" width="500" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-479" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;作用就是扫描指定包下通过@Component及其派生注解（@Service等等）&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;注解定义的Bean，其实就是@ComponentScan注解的底层实现&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1859.28" y="-22585" width="420" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-480" value="&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;BeanDefinition是Spring Bean创建环节中很重要的一个东西，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;它封装了Bean创建过程中所需要的元信息。&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="689.5" y="-24330" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-481" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanDefinitionRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2871.4399999999996" y="-24320" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-482" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SimpleAliasRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2898.56" y="-24165" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-483" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SimpleBeanDefinitionRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2860" y="-24007" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-484" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2868.56" y="-24485" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-485" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;AliasRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2923.56" y="-24470" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-486" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-457" target="OZDBB6FNwcegUENohpiK-484" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2608.56" y="-24145" as="sourcePoint" />
            <mxPoint x="2658.56" y="-24195" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-487" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-456" target="OZDBB6FNwcegUENohpiK-457" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2608.56" y="-24145" as="sourcePoint" />
            <mxPoint x="2658.56" y="-24195" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-488" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="OZDBB6FNwcegUENohpiK-455" target="OZDBB6FNwcegUENohpiK-456" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2608.56" y="-24145" as="sourcePoint" />
            <mxPoint x="2658.56" y="-24195" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-489" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;是BeanDefinition的注册中心，也就是用来保存BeanDefinition的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;提供了BeanDefinition的增删查的功能。&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2897.09" y="-24280" width="370" height="40" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-490" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanDefinition&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="185.37" y="-24515" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-491" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanDefinitionReader&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1465" y="-24492" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-492" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ClassPathBeanDefinitionScanner&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1455.23" y="-23977" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OZDBB6FNwcegUENohpiK-493" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BeanDefinitionRegistry&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2664.28" y="-24510" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0eQpZBN6BaFq8j83PpIj-1" value="&lt;b&gt;&lt;font style=&quot;color: rgb(255, 0, 0);&quot;&gt;在SpringBoot中，application.yml的文件就是通过ResourceLoader加载成Resource，之后再读取文件的内容的。&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="721.3" y="-5680" width="640" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0eQpZBN6BaFq8j83PpIj-2" value="&lt;b&gt;&lt;font style=&quot;color: rgb(0, 0, 255);&quot;&gt;在运行时获取和处理泛型类型等信息。&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="608.31" y="-18532" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0eQpZBN6BaFq8j83PpIj-3" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;通过ResolvableType#forClass方法创建一个MyMap类型对应的ResolvableType&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;通过ResolvableType#getSuperType()方法获取,获取到父类HashMap对应的ResolvableType&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;通过ResolvableType#getGeneric(int... indexes)就可以获取指定位置的泛型参数ResolvableType&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;通过ResolvableType#resolve()方法就可以获取到ResolvableType类型对应的class类型&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="890" y="-18602" width="550" height="70" as="geometry" />
        </mxCell>
        <mxCell id="0eQpZBN6BaFq8j83PpIj-4" value="&lt;b&gt;基于ResourceBundle + MessageFormat的实现ResourceBundleMessageSource&lt;/b&gt;&lt;div&gt;&lt;b&gt;可以在资源文件存储消息的模板，然后通过MessageFormat来替换占位符，&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;MessageSource的getMessage方法就可以传递具体的参数&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="948" y="-16932" width="470" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0eQpZBN6BaFq8j83PpIj-5" value="&lt;div&gt;&lt;b&gt;Locale：不同国家和地区的信息封装&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;ResourceBundle：根据不同国家的Locale，加载对应的资源文件，这个资源文件的命名需要遵守basename_lang_country.properties命名规范&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;MessageFormat：其实就是一个文本处理的方式，他可以解析模板，根据参数替换模板的占位符&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;MessageSource：Spring提供的国际化接口，其实他底层主要是依赖Java的ResourceBundle和MessageFormat，资源文件存储模板信息，MessageFormat根据MessageSource方法的传参替换模板中的占位符&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="391.33000000000004" y="-17090" width="1150" height="70" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-2" value="&lt;font style=&quot;color: rgb(255, 0, 0);&quot;&gt;&lt;b&gt;扫描指定包下通过@Component及其派生注解（@Service等等）注解定义的Bean，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;color: rgb(255, 0, 0);&quot;&gt;&lt;b&gt;其实就是@ComponentScan注解的底层实现&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1775" y="-23525" width="470" height="40" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-3" value="&lt;div&gt;&lt;b&gt;资源管理：对资源进行统一的封装，方便资源读取和管理&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;环境：对容器或者是项目的配置进行管理&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;类型转换：将一种类型转换成另一种类型&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;数据绑定：将数据跟对象的属性进行绑定，绑定之前涉及到类型转换&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;泛型处理：一个操作泛型的工具类，Spring中到处可见&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;国际化：对Java的国际化进行了统一的封装&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;BeanFactory：IOC容器&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;ApplicationContext：一个集万千功能于一身的王炸接口，也可以说是IOC容器&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;事件：Spring提供的基于观察者模式实现的解耦合利器&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1564" y="-21600" width="440" height="140" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-4" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;ApplicationEventPublisher&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="532.0899999999999" y="-23020" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-6" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ApplicationEvent&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1023" y="-23025" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-8" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;EventObject&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1034.33" y="-23192" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-10" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1413.28" y="-23050" width="355" height="80" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-11" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ApplicationListener&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1498.78" y="-23025" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-12" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;EventListener&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1537.4999999999998" y="-23192" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-14" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="R36P5IaH8ckpL3Td1BHd-7" target="R36P5IaH8ckpL3Td1BHd-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1130" y="-23030" as="sourcePoint" />
            <mxPoint x="1180" y="-23080" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-15" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="R36P5IaH8ckpL3Td1BHd-10" target="R36P5IaH8ckpL3Td1BHd-13">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1130" y="-23030" as="sourcePoint" />
            <mxPoint x="1180" y="-23080" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-16" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="R36P5IaH8ckpL3Td1BHd-7" target="R36P5IaH8ckpL3Td1BHd-10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1130" y="-23030" as="sourcePoint" />
            <mxPoint x="1180" y="-23080" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-17" value="&lt;b&gt;事件监听的接口，泛型是需要监听的事件类型，子类需要实现onApplicationEvent，参数就是监听的事件类型，&lt;/b&gt;&lt;div&gt;&lt;b&gt;onApplicationEvent方法的实现就代表了对事件的处理，当事件发生时，&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Spring会回调onApplicationEvent方法的实现，传入发布的事件。&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1504" y="-22950" width="620" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-18" value="&lt;b&gt;事件的父类，所有具体的事件都得继承这个类，构造方法的参数是这个事件携带的参数，&lt;/b&gt;&lt;div&gt;&lt;b&gt;监听器就可以通过这个参数来进行一些业务操作。&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="896.37" y="-22930" width="490" height="40" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-19" value="&lt;div&gt;&lt;b&gt;事件发布器，通过publishEvent方法就可以发布一个事件，然后就可以触发监听这个事件的监听器的回调。&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;ApplicationContext继承了ApplicationEventPublisher，说明只要有ApplicationContext就可以来发布事件了。&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="270" y="-22957" width="620" height="60" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-20" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="R36P5IaH8ckpL3Td1BHd-5" target="R36P5IaH8ckpL3Td1BHd-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1130" y="-23030" as="sourcePoint" />
            <mxPoint x="1180" y="-23080" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-21" value="&lt;div&gt;&lt;b&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;Spring Event 事件就是Spring实现了这种事件模型，你只需要基于Spring提供的API进行扩展，就可以轻易地完成事件的发布与订阅&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;Spring事件相关api主要有以下几个：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;&lt;b&gt;ApplicationEvent&amp;nbsp; &amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;事件的父类，所有具体的事件都得继承这个类，构造方法的参数是这个事件携带的参数，监听器就可以通过这个参数来进行一些业务操作。&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;&lt;b&gt;ApplicationListener&amp;nbsp;&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;事件监听的接口，泛型是需要监听的事件类型，子类需要实现onApplicationEvent，参数就是监听的事件类型，onApplicationEvent方法的实现就代表了对事件的处理，当事件发生时，Spring会回调onApplicationEvent方法的实现，传入发布的事件。&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;&lt;b&gt;ApplicationEventPublisher&amp;nbsp;&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;事件发布器，通过publishEvent方法就可以发布一个事件，然后就可以触发监听这个事件的监听器的回调。&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;Spring内置的事件很多，这里我罗列几个&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;事件类型&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;/span&gt;触发时机&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;ContextRefreshedEvent&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;/span&gt;在调用ConfigurableApplicationContext 接口中的refresh()方法时触发&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;ContextStartedEvent&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;/span&gt;在调用ConfigurableApplicationContext的start()方法时触发&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;ContextStoppedEvent&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;/span&gt;在调用ConfigurableApplicationContext的stop()方法时触发&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;ContextClosedEvent&lt;span style=&quot;white-space-collapse: preserve;&quot;&gt;&#x9;&lt;/span&gt;当ApplicationContext被关闭时触发该事件，也就是调用close()方法触发&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;在ApplicationContext(Spring容器)启动的过程中，Spring会发布这些事件，如果你需要这Spring容器启动的某个时刻进行什么操作，只需要监听对应的事件即可。&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;&lt;b&gt;Spring事件的传播特性&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;font style=&quot;color: rgb(51, 153, 255);&quot;&gt;ApplicationContext有子父容器的概念，而Spring事件的传播就是指当通过子容器发布一个事件之后，不仅可以触发在这个子容器的事件监听器，还可以触发在父容器的这个事件的监听器。&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="235.5" y="-23620" width="1480" height="300" as="geometry" />
        </mxCell>
        <mxCell id="R36P5IaH8ckpL3Td1BHd-22" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Spring&amp;nbsp; EVENT&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="239.99999999999997" y="-23700" width="180" height="110" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="rpEaD6Np3iaf7Zxh5g_y" name="SpringCloud">
    <mxGraphModel dx="4279" dy="2604" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-128" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" vertex="1" parent="1">
          <mxGeometry x="842" y="1360" width="210" height="90" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-68" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="474.5" y="720" width="447.5" height="210" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="-9" y="2338" width="190" height="120.5" as="geometry" />
        </mxCell>
        <mxCell id="SVxHG66HbYDkKFJ2KTPA-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;SpringCloud配置中心的核心原理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-938" y="-180" width="350" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SVxHG66HbYDkKFJ2KTPA-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-112" y="680" width="434" height="220" as="geometry" />
        </mxCell>
        <mxCell id="SVxHG66HbYDkKFJ2KTPA-6" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0cee2;strokeColor=#56517e;" vertex="1" parent="1">
          <mxGeometry x="-518" y="580" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;@RefreshScope&amp;nbsp; bean属性动态刷新的原理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1060" y="1860" width="450" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="-245" y="2368" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-224" y="2714.5" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="277" y="2338" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-6" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="-922" y="2371.75" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-7" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="-375" y="2493.25" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-8" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="-229" y="2582.5" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-9" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="-179" y="2454" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-10" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0a30a;fontColor=#000000;strokeColor=#BD7000;" vertex="1" parent="1">
          <mxGeometry x="-952" y="2492.25" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-11" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="-685" y="2397.75" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-12" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="-685" y="2492.25" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-14" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;配置中心服务端&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="267" y="2353" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-15" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;配置中心客户端&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="31.5" y="2383" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-16" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;RefreshEvent&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-189" y="2469" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-17" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;RefreshEventListener&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-199" y="2597.5" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-18" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ContextRefresher&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-199" y="2732.5" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-19" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;拉取最新配置&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-375" y="2508.25" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-20" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;UserService真正对象&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-680" y="2412.75" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-21" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;UserService代理对象&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-947" y="2512.25" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-22" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;UserService新创建的对象&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-675" y="2507.25" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-23" value="&lt;b&gt;@Autowired等注入&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-927" y="2386.75" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-24" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="-1060" y="2492.25" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-25" value="&lt;b&gt;使用&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1020" y="2529.25" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-26" value="&lt;b&gt;调用&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-750" y="2542.25" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-27" value="&lt;b&gt;注入最新属性&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-425" y="2556" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-28" value="&lt;b&gt;&lt;font&gt;配置变化&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="231" y="2413" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-29" value="&lt;b&gt;拉取配置&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="195" y="2344.5" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-30" value="&lt;b&gt;发布事件&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-109" y="2527.5" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-31" value="&lt;b&gt;监听&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-169" y="2537.5" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-34" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertySourceLocator&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-200" y="2383" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-35" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-5" target="8bbkrGhFxS0-G9X_UQBX-4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-29" y="2444.5" as="sourcePoint" />
            <mxPoint x="21" y="2394.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-36" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-5" target="8bbkrGhFxS0-G9X_UQBX-4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-219" y="2544.5" as="sourcePoint" />
            <mxPoint x="-169" y="2494.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-37" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-4" target="8bbkrGhFxS0-G9X_UQBX-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-219" y="2544.5" as="sourcePoint" />
            <mxPoint x="-169" y="2494.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-38" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-9" target="8bbkrGhFxS0-G9X_UQBX-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-219" y="2544.5" as="sourcePoint" />
            <mxPoint x="-169" y="2494.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-39" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-8" target="8bbkrGhFxS0-G9X_UQBX-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-219" y="2644.5" as="sourcePoint" />
            <mxPoint x="-169" y="2594.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-40" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-3" target="8bbkrGhFxS0-G9X_UQBX-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-165" y="2659.25" as="sourcePoint" />
            <mxPoint x="-115" y="2609.25" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-41" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-2" target="8bbkrGhFxS0-G9X_UQBX-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-165" y="2659.25" as="sourcePoint" />
            <mxPoint x="-115" y="2609.25" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-42" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-7" target="8bbkrGhFxS0-G9X_UQBX-12">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-405" y="2485.5" as="sourcePoint" />
            <mxPoint x="-365" y="2560.25" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-43" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-24" target="8bbkrGhFxS0-G9X_UQBX-10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-610" y="2499.25" as="sourcePoint" />
            <mxPoint x="-560" y="2449.25" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-44" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-10" target="8bbkrGhFxS0-G9X_UQBX-12">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-610" y="2499.25" as="sourcePoint" />
            <mxPoint x="-560" y="2449.25" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-45" value="" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.basic.x;fillColor=#e51400;fontColor=#ffffff;strokeColor=#B20000;" vertex="1" parent="1">
          <mxGeometry x="-515" y="2431.75" width="30" height="37" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-47" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-6" target="8bbkrGhFxS0-G9X_UQBX-10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-610" y="2499.25" as="sourcePoint" />
            <mxPoint x="-560" y="2449.25" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-48" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;当配置中心客户端发现服务端的配置有变化，需要发送一个RefreshEvent事件来告诉SpringCloud配置有变动&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;SpringCloud会去监听这个事件，按照项目启动的方式重新拉取配置中心最新的属性配置&lt;/span&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;当拉取完属性配置之后，就会销毁所有的第二个Bean&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;真正对象&lt;/span&gt;&lt;span style=&quot;background-color: initial; color: rgb(0, 127, 255);&quot;&gt;，也就是真正被使用的Bean&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;之后当第一个Bean（动态代理的Bean）需要使用这个第二个Bean&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;真正对象&lt;/span&gt;&lt;span style=&quot;background-color: initial; color: rgb(0, 127, 255);&quot;&gt;时，就会重新创建这个第二个Bean&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;真正对象&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;&lt;b&gt;此时由于已经有最新的配置了，那么创建的这个第二个Bean就会被注入最新的属性，这样就实现了属性的”刷新“&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1047" y="1940" width="660" height="90" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-49" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;@RefreshScope注解是个衍生注解，真正起作用的就是@Scope注解&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;@Scope注解并不陌生，他其实是定义Bean的作用域&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;比如多例（原型），就可以加上@Scope(&quot;prototype&quot;)注解&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;@RefreshScope也可以看做是一种Bean的作用域，名字叫做refresh&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;这些除了单例和多例之外的作用域的底层实现逻辑都是一样的&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;这些带有作用域的Bean相比于普通的单例Bean主要有以下几点不同：&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;会注册两个Bean，这个前面已经提到过&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;保存的地方不同，比如单例Bean最终会存在三级缓存中的第一级缓存中，而不同作用域的Bean是存在不同的地方的&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;先说会注册两个Bean，还是以前面提到的UserService举个例子，这两个Bean分别是&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;第一个Bean的Bean名称为userService，Bean class为ScopedProxyFactoryBean.class，这个scope为默认，也就是单例&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;，最终会生成一个代理对象，并且由于是单例的，所以最终这个对象会被放到一级缓存中，我们使用时注入的也就是这个对象&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;第二个Bean的Bean名称为scopedTarget.userService，Bean class为UserService.class，scope为refresh（如果是session作用域就是session）&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;生成的就是真正的UserService对象，但是由于scope为refresh，所以不会存在第一级缓存中&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1060" y="2060" width="810" height="230" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-53" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;prepareEnviorment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-483" y="595" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-55" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="572" y="530" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-56" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="1">
          <mxGeometry x="-31" y="775" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-57" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" vertex="1" parent="1">
          <mxGeometry x="-31" y="515" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-58" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" vertex="1" parent="1">
          <mxGeometry x="-518" y="760" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-59" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="571.5" y="1050" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-60" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1152" y="800" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-61" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="343" y="330" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-63" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="572.5" y="750" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-64" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="524.5" y="1200" width="370" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-65" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;gradientColor=#97d077;" vertex="1" parent="1">
          <mxGeometry x="570.5" y="850" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-69" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;gradientColor=#ffd966;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="567.5" y="1560" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-70" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f9f7ed;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="1171" y="1100" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-71" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="1132" y="950" width="320" height="70" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-72" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="567.5" y="1380" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-73" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;EventPulishingRunListener&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-22" y="700" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-74" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SimpleApplicationEventMulticaster&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-42" y="790" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-75" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;SpringApplicationRunListener&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-1" y="530" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-77" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ApplicationContext&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;跟配置中心交互的容器&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="639" y="1055" width="180" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-78" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ConfigFileApplicationListener&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="582.5" y="765" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-79" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;BootstrapApplicationListener&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="600.5" y="860" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-80" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;键为@BootstrapConfiguration注解&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;全限定名对应的配置类&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1162" y="960" width="280" height="50" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-81" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Bootstrap配置文件&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1228" y="1115" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-82" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertySourceBootstrapConfiguration&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="553" y="1215" width="320" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-83" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;PropertySourceLocator&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="602.5" y="1389" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-84" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Environment&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="657.5" y="1580" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-85" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;spring.factory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1222" y="815" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-86" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;spring.factory&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="408" y="340" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-87" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ApplicationListener&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="652" y="545" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-89" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;listeners.enviormentPrepared&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-508" y="775" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-93" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.512;entryY=0.067;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="SVxHG66HbYDkKFJ2KTPA-6" target="8bbkrGhFxS0-G9X_UQBX-89">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="507" y="860" as="sourcePoint" />
            <mxPoint x="557" y="810" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-94" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;调用&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-318" y="688" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-96" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;调用&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-213" y="810" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-97" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-61" target="8bbkrGhFxS0-G9X_UQBX-57">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="582" y="600" as="sourcePoint" />
            <mxPoint x="632" y="550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-98" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;加载&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="248" y="420" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-99" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;加载&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="553" y="450" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-100" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.568;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-61" target="8bbkrGhFxS0-G9X_UQBX-55">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="582" y="600" as="sourcePoint" />
            <mxPoint x="632" y="550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-101" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-55" target="8bbkrGhFxS0-G9X_UQBX-68">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="582" y="850" as="sourcePoint" />
            <mxPoint x="632" y="800" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-102" value="实现" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="653" y="628" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-103" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-57" target="SVxHG66HbYDkKFJ2KTPA-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="582" y="850" as="sourcePoint" />
            <mxPoint x="632" y="800" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-104" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;唯一实现&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="7" y="608" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-105" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-58" target="SVxHG66HbYDkKFJ2KTPA-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="242" y="610" as="sourcePoint" />
            <mxPoint x="292" y="560" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-106" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1.003;entryY=0.473;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-55" target="8bbkrGhFxS0-G9X_UQBX-74">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="242" y="810" as="sourcePoint" />
            <mxPoint x="292" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-107" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;添加到&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="382" y="635" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-108" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;" edge="1" parent="1" source="SVxHG66HbYDkKFJ2KTPA-2" target="8bbkrGhFxS0-G9X_UQBX-68">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="242" y="810" as="sourcePoint" />
            <mxPoint x="292" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-109" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;触发监听&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="337" y="878" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-110" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-68" target="8bbkrGhFxS0-G9X_UQBX-59">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="242" y="1410" as="sourcePoint" />
            <mxPoint x="292" y="1360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-111" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;某个阶段调用&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="819" y="1128" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-112" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-59" target="8bbkrGhFxS0-G9X_UQBX-64">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="226.5" y="1400" as="sourcePoint" />
            <mxPoint x="276.5" y="1350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-117" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-60" target="8bbkrGhFxS0-G9X_UQBX-71">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="93.5" y="900" as="sourcePoint" />
            <mxPoint x="143.5" y="850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-118" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-71" target="8bbkrGhFxS0-G9X_UQBX-59">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="232" y="920" as="sourcePoint" />
            <mxPoint x="282" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-119" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-70" target="8bbkrGhFxS0-G9X_UQBX-59">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="232" y="920" as="sourcePoint" />
            <mxPoint x="282" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-120" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-64" target="8bbkrGhFxS0-G9X_UQBX-72">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="424.5" y="1420" as="sourcePoint" />
            <mxPoint x="474.5" y="1370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-121" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;调用&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="739.5" y="1318" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-122" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-72" target="8bbkrGhFxS0-G9X_UQBX-69">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="417" y="1160" as="sourcePoint" />
            <mxPoint x="467" y="1110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-123" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;加载&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1228" y="900" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-124" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;加载&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1082" y="1080" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-125" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;创建一个跟配置中心相关的Spring容器&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;跟配置中心交互的Spring容器最最主要就是干两件事：&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;加载bootstrap配置文件&lt;/div&gt;&lt;div style=&quot;&quot;&gt;加载所有的spring.factories中的键为&lt;/div&gt;&lt;div style=&quot;&quot;&gt;org.springframework.cloud.bootstrap.BootstrapConfiguration对应的配置类&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="282" y="1058" width="450" height="100" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-126" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;加载bootstrap配置文件和所有的spring.factories中的键为&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;org.springframework.cloud.bootstrap.BootstrapConfiguration对应的配置类&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1077" y="1030" width="450" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-127" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;调用这个容器中所有的PropertySourceLocator对象，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;从配置中心获取配置&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="582" y="1440" width="310" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-129" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;配置中心客户端&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="873" y="1389" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-130" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0cee2;strokeColor=#56517e;" vertex="1" parent="1">
          <mxGeometry x="1202" y="1353.5" width="220" height="101" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-131" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;配置中心服务器&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1238" y="1393.5" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-133" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-130" target="8bbkrGhFxS0-G9X_UQBX-128">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1172" y="1290" as="sourcePoint" />
            <mxPoint x="1222" y="1240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-134" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;从配置中心获取配置&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1052" y="1370" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-136" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;配置放到Environment中&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;在ApplicationContext的刷新阶段就可以使用到配置中心的配置&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="512" y="1633" width="360" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-137" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;这个配置类中会注入这么一个集合对象&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;PropertySourceLocator&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="705" y="1260" width="230" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-138" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;在BootstrapApplicationListener中，他首先也会创建一个SpringApplication去执行&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;本质上就是创建一个Spring容器，也就是ApplicationContext&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="572.5" y="930" width="480" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-139" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;BootstrapImportSelectorConfiguration，&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;会通过@Import注解导入另一个配置类&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;BootstrapImportSelector，BootstrapImportSelector实现了（间接）ImportSelector接口&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;容器在启动的时候，就会调用BootstrapImportSelector的selectImports方法的实现获取到一些配置类&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;会加载所有的spring.factories中的键为org.springframework.cloud.bootstrap.BootstrapConfiguration的配置类&lt;/font&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1412" y="860" width="590" height="90" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-140" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-950" y="580" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-141" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;" vertex="1" parent="1">
          <mxGeometry x="-940" y="815" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-142" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;gradientColor=#ea6b66;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="-950" y="1075" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-143" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ApplicationContext刷新前&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-910" y="595" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-144" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;ApplicationContext刷新阶段&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-920" y="830" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-145" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ApplicationContext刷新后&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-920" y="1088" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-146" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" target="8bbkrGhFxS0-G9X_UQBX-140">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-815" y="405" as="sourcePoint" />
            <mxPoint x="-110" y="725" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-147" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-140" target="8bbkrGhFxS0-G9X_UQBX-141">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-160" y="975" as="sourcePoint" />
            <mxPoint x="-110" y="925" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-148" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-141" target="8bbkrGhFxS0-G9X_UQBX-142">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-160" y="975" as="sourcePoint" />
            <mxPoint x="-110" y="925" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-149" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-142">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-160" y="975" as="sourcePoint" />
            <mxPoint x="-815" y="1275" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-150" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8bbkrGhFxS0-G9X_UQBX-140" target="SVxHG66HbYDkKFJ2KTPA-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-168" y="790" as="sourcePoint" />
            <mxPoint x="-118" y="740" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-151" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;ApplicationContext刷新前阶段，这个阶段主要也干三件事&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;准备Environment&amp;nbsp; &amp;nbsp;也就是准备SpringBoot的整个外部化配置的对象&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;创建一个ApplicationContext&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;为ApplicationContext做一些准备工作&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-958" y="640" width="390" height="90" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-152" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;调用ApplicationContext#refresh方法来刷新容器&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-960" y="890" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-154" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;这个阶段其实就是收尾的阶段，这个过程其实没有什么非常核心的事&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-948" y="1145" width="380" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-155" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;prepareEnvironment方法的实现，是拉取配置的核心&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-493" y="648" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-156" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;加载spring.factories中的一些对象，其中就包括：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;org.springframework.context.ApplicationListener键对应的ApplicationListener的实现&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="413" y="400" width="500" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-157" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;org.springframework.boot.SpringApplicationRunListener键对应的SpringApplicationRunListener的实现类&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-28" y="478" width="620" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-158" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;SpringApplicationRunListener仅仅只有一个实现EventPublishingRunListener&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-68" y="718" width="460" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-159" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;会创建一个SimpleApplicationEventMulticaster，再将加载的ApplicationListener添加进去&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-136" y="845" width="520" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-160" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;会发布一个ApplicationEnvironmentPreparedEvent事件&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;而对这个事件有两个特别重要的监听器：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;ConfigFileApplicationListener&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;BootstrapApplicationListener&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;这些监听器都是通过前置操作从spring.factories配置文件中加载的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;ConfigFileApplicationListener，用来处理配置文件的，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;他会解析配置文件的配置，放到Environment中&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;BootstrapApplicationListener这个跟本文探讨的主题相关了，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;它是用来专门来跟配置中心交互的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="799" y="595" width="390" height="140" as="geometry" />
        </mxCell>
        <mxCell id="8bbkrGhFxS0-G9X_UQBX-161" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;准备Environment，也就是prepareEnvironment方法的实现，是拉取配置的核心&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;在SpringApplication创建的时候，会去加载spring.factories中的一些对象，其中就包括：&lt;span style=&quot;background-color: initial;&quot;&gt;org.springframework.context.ApplicationListener键对应的ApplicationListener的实现&lt;/span&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;org.springframework.boot.SpringApplicationRunListener键对应的SpringApplicationRunListener的实现类&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;SpringApplicationRunListener仅仅只有一个实现EventPublishingRunListener，会&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;创建一个SimpleApplicationEventMulticaster，再将加载的ApplicationListener添加进去&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;之后会执行这么一行方法&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;listeners.environmentPrepared(environment);&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;这个方法最终会走到这个方法&lt;span style=&quot;background-color: initial;&quot;&gt;EventPublishingRunListener#environmentPrepared&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;这个方法最终会发布一个ApplicationEnvironmentPreparedEvent事件&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;而对这个事件有两个特别重要的监听器：&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;ConfigFileApplicationListener&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;BootstrapApplicationListener&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;这些监听器都是通过前置操作从spring.factories配置文件中加载的&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;ConfigFileApplicationListener，用来处理配置文件的，他会解析配置文件的配置，放到Environment中&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;BootstrapApplicationListener这个跟本文探讨的主题相关了，它是用来专门来跟配置中心交互的&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;在BootstrapApplicationListener中，他首先也会创建一个SpringApplication去执行&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;本质上就是创建一个Spring容器，也就是ApplicationContext&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;这个容器非常重要，这个容器是专门用来跟配置中心交互的，&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;这个容器在创建的时候会给它两个比较重要的配置&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;第一个就是设置这个容器所用的配置文件的名称，&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;默认就是bootstrap，&lt;/span&gt;&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;这就解释了为什么配置中心的配置信息需要写在bootstrap配置文件中&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;第二个就是会加入一个配置类。&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;BootstrapImportSelectorConfiguration&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;这个配置类又会通过@Import注解导入另一个配置类&amp;nbsp;&lt;span style=&quot;background-color: initial;&quot;&gt;BootstrapImportSelector&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;BootstrapImportSelector实现了（间接）ImportSelector接口，&lt;span style=&quot;background-color: initial;&quot;&gt;那么这个容器在启动的时候，就会调用BootstrapImportSelector的selectImports方法的实现获取到一些配置类&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;会加载所有的spring.factories中的键为org.springframework.cloud.bootstrap.BootstrapConfiguration的配置类&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;@BootstrapConfiguration会导入一个很重要的配置类&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;PropertySourceBootstrapConfiguration，&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;这个配置类中会注入这么一个集合对象&lt;/span&gt;&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;PropertySourceLocator&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;这个接口的作用就是用配置中心获取配置的，&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;当注入完PropertySourceLocator集合之后，在某个阶段会调用所有的PropertySourceLocator，获取配置中心中的配置&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;之后在把这些配置放到Environment中&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;这样在ApplicationContext的刷新阶段就可以使用到配置中心的那些配置了&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-850" y="-120" width="980" height="520" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="qiQ9v1aWT242CUDRwwvC" name="Sentinel">
    <mxGraphModel dx="2327" dy="820" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="moMJ4k46cWSwz-kuLB0w-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;Sentinel的核心原理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-650" y="80" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-2" value="&lt;div&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Sentinel会为每个资源创建一个处理链条，就是一个责任链，第一次访问这个资源的时候创建，&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;之后就一直复用，所以这个处理链条每个资源有且只有一个。&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;SphU.entry(..)会调用责任链来完成对资源的检查逻辑。&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;这个责任链条中每个处理节点被称为ProcessorSlot，中文意思就是处理器槽&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;ProcessorSlot有很多实现，但是Sentinel的核心就下面这8个：&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;默认情况下，节点是按照如下的顺序进行排序的&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;NodeSelectorSlot&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;ClusterBuilderSlot&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;LogSlot&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;StatisticSlot&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;AuthoritySlot&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;SystemSlot&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;FlowSlot&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;DegradeSlot&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;这些实现会通过SPI机制加载，然后按照一定的顺序组成一个责任链。&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;如果想扩展，只要实现ProcessorSlot，按照SPI的规定配置一下就行。&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-640" y="142" width="610" height="270" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-25" y="500" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="-10" y="660" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-6" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="10" y="800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-7" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="10" y="920" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-8" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="10" y="1050" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-9" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1ba1e2;fontColor=#ffffff;strokeColor=#006EAF;" vertex="1" parent="1">
          <mxGeometry x="10" y="1210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-10" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3c800;fontColor=#000000;strokeColor=#B09500;" vertex="1" parent="1">
          <mxGeometry x="10" y="1370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-11" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="1">
          <mxGeometry x="10" y="1530" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-12" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-3" target="moMJ4k46cWSwz-kuLB0w-4">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="290" y="780" as="sourcePoint" />
            <mxPoint x="340" y="730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-13" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-4" target="moMJ4k46cWSwz-kuLB0w-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="290" y="780" as="sourcePoint" />
            <mxPoint x="340" y="730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-14" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" target="moMJ4k46cWSwz-kuLB0w-3">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="70" y="460" as="sourcePoint" />
            <mxPoint x="340" y="530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-15" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;SphU.entry(..)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry y="440" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-16" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;NodeSelectorSlot&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-10" y="515" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-19" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;DegradeSlot&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="10" y="1545" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-20" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;FlowSlot&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="20" y="1385" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-21" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;SystemSlot&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="15" y="1225" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-22" value="&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;AuthoritySlot&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="10" y="1060" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-23" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;StatisticSlot&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="10" y="935" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-24" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;LogSlot&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="30" y="815" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-25" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;ClusterBuilderSlot&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-10" y="675" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-26" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-6" target="moMJ4k46cWSwz-kuLB0w-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="820" as="sourcePoint" />
            <mxPoint x="330" y="770" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-27" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-7" target="moMJ4k46cWSwz-kuLB0w-8">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="1020" as="sourcePoint" />
            <mxPoint x="330" y="970" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-28" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-8" target="moMJ4k46cWSwz-kuLB0w-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="1020" as="sourcePoint" />
            <mxPoint x="330" y="970" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-29" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-9" target="moMJ4k46cWSwz-kuLB0w-10">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="1220" as="sourcePoint" />
            <mxPoint x="330" y="1170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-30" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-10" target="moMJ4k46cWSwz-kuLB0w-11">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="280" y="1320" as="sourcePoint" />
            <mxPoint x="330" y="1270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-31" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;设置当前资源对应的入口的统计Node,&lt;/b&gt;&lt;span style=&quot;color: rgb(0, 127, 255); background-color: initial;&quot;&gt;&lt;b&gt;一般一个资源就一个入口，&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;比如一个http接口一般只能通过http访问，但是Sentinel支持多入口，&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;你可以不用，但是Sentinel有。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;所以NodeSelectorSlot的作用就是选择资源在当前调用入口的统计Node，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;这样就实现了统计同一个资源在不同入口访问数据&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;资源的入口可以在进入资源之前通过ContextUtil.enter(&quot;入口名&quot;, origin)来指定，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;如果不指定，那么入口名称默认就是sentinel_default_context。&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;在SpringMVC环境底下，所有的http接口资源，默认的入口都是sentinel_spring_web_context&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="180" y="425" width="530" height="130" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-32" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;ClusterBuilderSlot的作用跟NodeSelectorSlot其实是差不多的，也是用来选择统计Node，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;但是选择的Node的统计维护跟NodeSelectorSlot不一样。&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;ClusterBuilderSlot会选择两个统计Node：&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;第一个统计Node是资源的所有入口的统计数据之和，就是资源访问的总数据&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;第二个统计Node就是统计资源调用者对资源访问数据&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;通过ContextUtil.enter(&quot;入口名&quot;, origin)来指定，这个方法的第二个参数origin就是代表服务名的意思，默认是空。&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;所以ContextUtil.enter(..)可以同时指定资源的入口和调用者，一个资源一定有入口，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;因为不指定入口默认就是sentinel_default_context，但是调用者不指定就会没有。&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;对于一个http请求来说，Sentinel默认服务名需要放到S-user这个请求头中，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;所以如果你想知道接口的调用服务，需要在调用方发送请求的时候将服务名设置到S-user请求头中。&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;当资源所在的服务接收到请求时，Sentinel就会从S-user请求头获取到服务名，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;之后再通过ContextUtil.enter(&quot;入口名&quot;, &quot;调用者名&quot;)来设置当前资源的调用者&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-650" y="585" width="630" height="220" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-33" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;用来打印日志的,当发生异常，就会打印日志。&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="140" y="785" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-34" value="&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;NodeSelectorSlot和ClusterBuilderSlot，他们的作用就是根据资源当前的入口和调用来源来选择对应的统计Node,&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;StatisticSlot就是对这些统计Node进行实际的统计，比如加一下资源的访问线程数，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;资源的请求数量等&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="150" y="910" width="630" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-35" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;对资源调用者进行授权，就是黑白名单控制。&lt;span style=&quot;background-color: initial;&quot;&gt;可以通过控制台来添加授权规则&lt;/span&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;AuthoritySlot中会去获取资源的调用者，之后会跟授权规则中的资源应用这个选项进行匹配，&lt;/div&gt;&lt;div style=&quot;&quot;&gt;之后就会出现有以下2种情况：&lt;span style=&quot;background-color: initial;&quot;&gt;授权类型是黑名单，匹配上了，&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;说明在黑名单内，那么这个服务就不能访问这个资源，没匹配上就可以访问&lt;/div&gt;&lt;div style=&quot;&quot;&gt;授权类型是白名单。匹配上了，说明在白名单内，那么这个服务就可以访问这个资源，没匹配上就不可以访问&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="150" y="1040" width="600" height="90" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-36" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;根据整个系统运行的统计数据来限流的，防止当前系统负载过高。&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;它支持入口qps、线程数、响应时间、cpu使用率、负载5个限流的维度。&lt;/font&gt;&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-420" y="1215" width="410" height="40" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-37" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;据预设的规则，结合前面的统计出来的实时信息进行流量控制&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;针对来源，来源就是前面说的调用方，这个配置表明，这个规则适用于哪个调用方，默认是default，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#007fff&quot;&gt;&lt;b&gt;就是指规则适用于所有调用方，如果指定了调用方，那么这个规则仅仅对指定的调用方生效。&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;阈值类型，就是限流条件，当资源的qps或者访问的线程数到达设置的单机阈值，就会触发限流。&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;是否集群，这个作用是用来对集群控制的，因为一个服务可能在很多台机器上，&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;而这个的作用就是将整个集群看成一个整体来限流，这里就不做深入讨论。&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;流控模式，这个流控模式的选项仅仅对阈值类型为qps有效，当阈值类型线程数时无效。&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;这个配置就比较有意思了，分为直接、关联、链路三种模式。&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;直接模式的意思就是当未设置针对来源时，资源的ClusterNode统计数据统计达到了阈值，就会触发限流。&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;关联模式下需要填写关联的资源名称,&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;当关联资源的ClusterNode统计的qps达到了设置的阈值时，&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;就会触发当前资源的限流操作。&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;链路模式也一样，它需要关联一个入口资源&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;当访问资源的实际入口跟关联入口是一样的时候，&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;就会根据这个入口对应的DefaultNode的统计数据来判断是否需要限流。&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;&lt;div style=&quot;&quot;&gt;最后一个配置项，流控效果，这个就是如果是通过qps来限流，并且达到了限流的条件之后会做什么，&lt;/div&gt;&lt;div style=&quot;&quot;&gt;如果是线程数，就直接抛出BlockException异常&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;也有三种方式，快速失败、Warm Up、排队等待&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;快速失败的意思就是指一旦触发限流了，那么直接抛出BlockException异常&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;Warm Up的作用就是为了防止系统流量突然增加时出现瞬间把系统压垮的情况。&lt;/div&gt;&lt;div style=&quot;&quot;&gt;通过&quot;冷启动&quot;，让通过的流量缓慢增加，在一定时间内逐渐增加到阈值上限。&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;排队等待，很好理解，意思当出现限流了，不是抛异常，而是去排队等待一定时间，&lt;/div&gt;&lt;div style=&quot;&quot;&gt;其实就是让请求均匀速度通过，内部使用的是传说中的漏桶算法。&lt;/div&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-600" y="1370" width="610" height="340" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-38" value="&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;用来熔断降级的。&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;Sentinel支持三种熔断策略：慢调用比例、异常比例 、异常数&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="150" y="1540" width="450" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-39" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;熔断器的工作流程&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-560" y="1840" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-40" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;Sentinel会为每个设置的规则都创建一个熔断器，熔断器有三种状态，OPEN(打开)、HALF_OPEN(半开)、CLOSED(关闭)&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;当处于CLOSED状态时，可以访问资源，访问之后会进行慢调用比例、异常比例、异常数的统计，一旦达到了设置的阈值，就会将熔断器的状态设置为OPEN&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;当处于OPEN状态时，会去判断是否达到了熔断时间，如果没到，拒绝访问，如果到了，那么就将状态改成HALF_OPEN，然后访问资源，&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;访问之后会对访问结果进行判断，符合规则设置的要求，直接将熔断器设置为CLOSED，关闭熔断器，不符合则还是改为OPEN状态&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;当处于HALF_OPEN状态时，直接拒绝访问资源&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-560" y="1880" width="880" height="90" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-41" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;" vertex="1" parent="1">
          <mxGeometry x="-250" y="2000" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-42" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;" vertex="1" parent="1">
          <mxGeometry x="-510" y="2120" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-43" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="1">
          <mxGeometry x="-250" y="2120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-44" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" vertex="1" parent="1">
          <mxGeometry x="-20" y="2120" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-45" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fad9d5;strokeColor=#ae4132;" vertex="1" parent="1">
          <mxGeometry x="-480" y="2250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-46" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffcd28;gradientColor=#ffa500;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="-260" y="2240" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-47" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;gradientColor=#ffd966;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry y="2250" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-48" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;gradientColor=#97d077;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="-250" y="2380" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-49" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="-250" y="2520" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-50" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="-305" y="2640" width="230" height="80" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-51" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-250" y="2780" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-52" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;" vertex="1" parent="1">
          <mxGeometry x="-70" y="2380" width="260" height="80" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-53" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f9f7ed;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="-15" y="2650" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-54" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-41" target="moMJ4k46cWSwz-kuLB0w-44">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2320" as="sourcePoint" />
            <mxPoint x="-90" y="2270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-55" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-41" target="moMJ4k46cWSwz-kuLB0w-43">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2320" as="sourcePoint" />
            <mxPoint x="-90" y="2270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-56" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-41" target="moMJ4k46cWSwz-kuLB0w-42">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2320" as="sourcePoint" />
            <mxPoint x="-90" y="2270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-57" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-42" target="moMJ4k46cWSwz-kuLB0w-45">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2320" as="sourcePoint" />
            <mxPoint x="-90" y="2270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-59" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-43" target="moMJ4k46cWSwz-kuLB0w-46">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2320" as="sourcePoint" />
            <mxPoint x="-90" y="2270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-60" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-44" target="moMJ4k46cWSwz-kuLB0w-47">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2320" as="sourcePoint" />
            <mxPoint x="-90" y="2270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-61" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-46" target="moMJ4k46cWSwz-kuLB0w-45">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2420" as="sourcePoint" />
            <mxPoint x="-90" y="2370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-62" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-46" target="moMJ4k46cWSwz-kuLB0w-48">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2420" as="sourcePoint" />
            <mxPoint x="-90" y="2370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-63" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-48" target="moMJ4k46cWSwz-kuLB0w-49">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2520" as="sourcePoint" />
            <mxPoint x="-90" y="2470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-64" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-49" target="moMJ4k46cWSwz-kuLB0w-50">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2520" as="sourcePoint" />
            <mxPoint x="-90" y="2470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-65" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-47" target="moMJ4k46cWSwz-kuLB0w-52">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2420" as="sourcePoint" />
            <mxPoint x="-90" y="2370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-66" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-52" target="moMJ4k46cWSwz-kuLB0w-53">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2520" as="sourcePoint" />
            <mxPoint x="-90" y="2470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-67" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;熔断器&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-225" y="2010" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-68" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;OPEN(打开)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-235" y="2135" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-69" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;HALF_OPEN(半开)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-500" y="2135" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-70" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;CLOSED(关闭)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry y="2135" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-71" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;拒绝访问资源&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-480" y="2270" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-72" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;将状态改成&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;HALF_OPEN&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-245" y="2385" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-73" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;访问资源&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-240" y="2535" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-74" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;是否达到&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;熔断时间&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-240" y="2255" width="90" height="50" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-75" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;将熔断器设置&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;为CLOSED&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-250" y="2785" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-76" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;访问资源&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="20" y="2265" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-77" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;将熔断器的状态&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;设置为OPEN&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-10" y="2660" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-78" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;是否成功/响应时间&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;低于最大响应时间&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-270" y="2655" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-79" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-50" target="moMJ4k46cWSwz-kuLB0w-51">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2690" as="sourcePoint" />
            <mxPoint x="-90" y="2640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-80" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;是否成功/响应时间&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;低于最大响应时间&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;并且大于阈值&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-10" y="2390" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-81" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="moMJ4k46cWSwz-kuLB0w-50" target="moMJ4k46cWSwz-kuLB0w-53">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-140" y="2690" as="sourcePoint" />
            <mxPoint x="-90" y="2640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-82" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;是&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-190" y="2720" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-83" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;否&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-75" y="2680" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-84" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;失败/高于最大响应时间&lt;br&gt;并且大于阈值&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-55" y="2515" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-85" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;否&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-320" y="2290" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="moMJ4k46cWSwz-kuLB0w-86" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;是&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="-185" y="2330" width="40" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="YViNBW6Mx3rO0wQZnAEL" name="xxl-job">
    <mxGraphModel dx="2927" dy="3486" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-65" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1230.5" y="-45" width="460" height="380" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-46" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1140" y="694" width="1260" height="700" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-45" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="150" y="700" width="725" height="700" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-9" value="&lt;b&gt;&lt;font style=&quot;font-size: 22px;&quot;&gt;XXL-JOB 任务调度全过程&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="113" y="-1420" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-10" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;color: rgb(255, 0, 0); background-color: initial;&quot;&gt;调用中心是用来控制定时任务的触发逻辑&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;div style=&quot;text-align: left;&quot;&gt;调度中心是一个单独的Web服务，用来触发定时任务的执行&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;它提供了一些页面操作，管理这些定时任务的触发逻辑&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;调度中心依赖数据库，所以数据都是存在数据库中的&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;调度中心也支持集群模式，但是它们所依赖的数据库必须是同一个&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;所以同一个集群中的调度中心实例之间是没有任何通信的，数据都是通过数据库共享的&lt;/div&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1286.5" y="524" width="480" height="190" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-15" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="205" y="797" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-16" value="&lt;b&gt;&lt;font&gt;@XxlJob注解的Bean&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="205" y="897" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-17" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="205" y="987" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-18" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3c800;strokeColor=#B09500;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="205" y="1087" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-20" value="&lt;b&gt;&lt;font&gt;Spring容器&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="220" y="802" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-21" value="&lt;b&gt;MethodJobHandler&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="205" y="997" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-22" value="&lt;b&gt;JobHandler&lt;/b&gt;&lt;div&gt;&lt;b&gt;Map缓存&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="215" y="1097" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-26" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;成员变量&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="345" y="1087" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-27" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#007FFF;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-17" target="ANlJ96FJJQ0399WOkpuZ-18" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="555" y="1057" as="sourcePoint" />
            <mxPoint x="605" y="1007" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-28" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#007FFF;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-16" target="ANlJ96FJJQ0399WOkpuZ-17" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="555" y="1057" as="sourcePoint" />
            <mxPoint x="605" y="1007" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-29" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#007FFF;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-15" target="ANlJ96FJJQ0399WOkpuZ-16" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="555" y="1057" as="sourcePoint" />
            <mxPoint x="605" y="1007" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-30" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;扫描所有加了该注解的bean&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="190" y="855" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-31" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;封装&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="250" y="946.5" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-32" value="&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;添加&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="255" y="1045" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-35" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="420" y="786" width="330" height="604" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-36" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="796" y="942" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-37" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1190" y="860" width="300" height="430" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-38" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ExecutorBizClient&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1190" y="885" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-39" value="&lt;b&gt;Http服务端&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="821" y="957" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-40" value="&lt;b&gt;ExecutorBizImpl&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="440" y="797" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-41" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;发送http请求&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="965" y="966" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-42" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;将请求交给&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="740" y="946.5" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-43" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#0000FF;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-37" target="ANlJ96FJJQ0399WOkpuZ-36" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1095" y="926" as="sourcePoint" />
            <mxPoint x="1145" y="966" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-44" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#0000FF;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-36" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="866" y="932" as="sourcePoint" />
            <mxPoint x="746" y="978" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-48" value="&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;接收来自调度中心的请求&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="816" y="1002" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-49" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;所有调度中心的请求都是这里处理的&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="440" y="832" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-50" value="&lt;b&gt;&lt;font style=&quot;font-size: 19px;&quot;&gt;执行器&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="145" y="665" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-51" value="&lt;span style=&quot;font-size: 19px;&quot;&gt;&lt;b&gt;调度中心&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1189" y="654" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-52" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;当执行器启动的时候，会启动一个注册线程，这个线程会往调度中心注册当前执行器的信息，包括两部分数据&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;执行器的名字，也就是设置的appname&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;执行器所在机器的ip和端口，这样调度中心就可以访问到这个执行器提供的Http接口&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font style=&quot;&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;每个服务实例都会对应一个执行器实例，所以调用中心会保存每个执行器实例的地址&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="225" y="615" width="600" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-53" value="&lt;div&gt;&lt;b&gt;1.&amp;nbsp; 当执行器启动的时候，会启动一个注册线程，这个线程会往调度中心注册当前执行器的信息，包括两部分数据&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;执行器的名字，也就是设置的appname&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;执行器所在机器的ip和端口，这样调度中心就可以访问到这个执行器提供的Http接口&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;前面提到每个服务实例都会对应一个执行器实例，所以调用中心会保存每个执行器实例的地址&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="113" y="-1330" width="620" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-54" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="121.5" y="-95" width="275" height="230" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-55" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#eeeeee;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="121.5" y="215" width="275" height="230" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-56" value="&lt;b&gt;&lt;font style=&quot;font-size: 19px;&quot;&gt;执行器&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="126.5" y="-95" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-57" value="&lt;b&gt;&lt;font style=&quot;font-size: 19px;&quot;&gt;执行器&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="121.5" y="215" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-58" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;XxlJob-Demo&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="186.5" y="-55" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-59" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;XxlJob-Demo&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="186.5" y="255" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-60" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;192.168.0.101:9999&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="166.5" y="315" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-61" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;192.168.0.100：9999&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="161.5" y="5" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-62" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;192.168.0.100：9999&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1351.5" y="95" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-63" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;192.168.0.101:9999&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1356.5" y="139" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-64" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;XxlJob-Demo&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1360.5" y="45" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-66" value="&lt;b&gt;&lt;font style=&quot;font-size: 19px;&quot;&gt;调度中心&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1240.5" y="-35" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-67" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeWidth=2;strokeColor=#007FFF;entryX=0.01;entryY=0.591;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-55" target="ANlJ96FJJQ0399WOkpuZ-65" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="981.5" y="251" as="sourcePoint" />
            <mxPoint x="1001.5" y="211" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-68" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#007FFF;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-54" target="ANlJ96FJJQ0399WOkpuZ-65" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="981.5" y="251" as="sourcePoint" />
            <mxPoint x="1031.5" y="201" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-69" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;启动一个注册线程往调度中心注册当前执行器的信息，包括两部分数据&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;执行器的名字，也就是设置的appname，&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;执行器所在机器的ip和端口&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="426.5" y="120" width="400" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-70" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;注册执行器应用名，ip和端口号&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="501.5" y="45" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-71" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;注册执行器应用名，ip和端口号&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="606.5" y="285" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-72" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;exitX=0.962;exitY=-0.004;exitDx=0;exitDy=0;strokeWidth=2;strokeColor=#007FFF;exitPerimeter=0;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-45" target="ANlJ96FJJQ0399WOkpuZ-65" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="900" y="1750" as="sourcePoint" />
            <mxPoint x="950" y="1700" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-73" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1414" y="-45" width="205" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-74" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;dashboard&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1430" y="-35" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-75" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="ANlJ96FJJQ0399WOkpuZ-73" edge="1" source="ANlJ96FJJQ0399WOkpuZ-76">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1450" y="-100" as="sourcePoint" />
            <mxPoint x="1200.5" y="245" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-76" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="1496" y="-180" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-77" value="&lt;font color=&quot;#007fff&quot;&gt;&lt;b&gt;提供了一些页面操作管理这些定时任务的触发逻辑&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1551" y="-25" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-78" value="" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#cce5ff;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="2301.5" y="40.5" width="150" height="200" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-80" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;strokeWidth=2;strokeColor=#0000FF;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-65" target="ANlJ96FJJQ0399WOkpuZ-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1150.5" y="-125" as="sourcePoint" />
            <mxPoint x="1200.5" y="-175" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-81" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=1;entryDx=0;entryDy=-15;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;strokeWidth=2;strokeColor=#0000FF;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-99" target="ANlJ96FJJQ0399WOkpuZ-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1179" y="1454" as="sourcePoint" />
            <mxPoint x="1229" y="1404" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-82" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;数据库&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2341.5" y="250.5" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-83" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;注册执行器应用名，ip和端口号&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="636.5" y="-60" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-85" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;调度中心依赖数据库，所以数据都是存在数据库中的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;调度中心也支持集群模式，但是它们所依赖的数据库必须是同一个&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;所以同一个集群中的调度中心实例之间是没有任何通信的，数据都是通过数据库共享的&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2461.5" y="-50.5" width="480" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-86" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;调度中心依赖数据库&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;增删查改任务触发规则数据&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1711" y="95" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-87" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;尝试加锁&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2295" y="360" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-88" value="&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;2。 初始化JobHandler就是指，执行器启动的时候会去Spring容器中找到加了@XxlJob注解的Bean&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;解析注解，然后封装成一个MethodJobHandler对象，&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;最终存到XxlJobSpringExecutor成员变量的一个本地的Map缓存中，&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;缓存key就是任务的名字&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="113" y="-1240" width="550" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-89" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;1&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="481.5" y="45" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-90" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;1&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="621.5" y="-55" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-91" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;1&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="591.5" y="285" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-92" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;xxl_job_info&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2316.5" y="124.5" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-93" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;3.&amp;nbsp; 任务触发&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;调度中心在启动的时候，会开启一个线程，这个线程的作用就是来计算任务触发时机，这里我把这个线程称为调度线程&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;这个调度线程会去查询xxl_job_info这张表，&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;这张表存了任务的一些基本信息和任务下一次执行的时间&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;调度线程会去查询下一次执行的时间 &amp;lt;= 当前时间 + 5s的任务，&lt;/b&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;这个5s是XxlJob写死的，被称为预读时间，提前读出来，保证任务能准时触发&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;对于已经超过5s以上时间的任务，会根据任务配置的调度过期策略来选择要不要执行&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;text-align: left; font-weight: bold;&quot;&gt;调度过期策略就两种&lt;/div&gt;&lt;div style=&quot;text-align: left; font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;直接忽略这个已经过期的任务&lt;/div&gt;&lt;div style=&quot;text-align: left; font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;立马执行一次这个过期的任务&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;对于超时时间在5s以内的任务，就直接立马执行一次，之后如果判断任务下一次执行时间就在5s内，会直接放到一个时间轮里面，等待下一次触发执行&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;还没到执行时间，所以不会立马执行，也是直接放到时间轮里面，等待触发执行&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;当这批任务处理完成之后，不论是前面是什么情况，调度线程都会去重新计算每个任务的下一次触发时间，然后更新xxl_job_info这张表的下一次执行时间&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;之后调度线程还会继续重复上面的步骤，查任务，调度任务，更新任务下次执行时间，一直死循环下去，这就实现了任务到了执行时间就会触发的功能&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;text-align: left; font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;当任务达到了触发条件，并不是由调度线程直接去触发执行器的任务执行&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;font-weight: bold; background-color: initial;&quot;&gt;调度线程会将这个触发的任务交给线程池去执行，&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;Xxl-Job为了进一步优化任务的触发，将这个触发任务执行的线程池划分成快线程池和慢线程池两个线程池&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;text-align: left; font-weight: bold;&quot;&gt;在调用执行器的Http接口触发任务执行的时候，Xxl-Job会去记录每个任务的触发所耗费的时间&lt;/div&gt;&lt;div style=&quot;text-align: left; font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;注意并不是任务执行时间，只是整个Http请求耗时时间，这是因为执行器执行任务是异步执行的，所以整个时间不包括任务执行时间&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;当任务一次触发的时间超过500ms，那么这个任务的慢次数就会加1&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;如果这个任务一分钟内触发的慢次数超过10次，接下来就会将触发任务交给慢线程池去异步执行&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;所以快慢线程池就是避免那种频繁触发并且每次触发时间还很长的任务阻塞其它任务的触发的情况发生&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="109" y="-1120" width="850" height="340" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-94" value="&lt;b&gt;&lt;font color=&quot;#cc6600&quot; style=&quot;font-size: 14px;&quot;&gt;select * from xxl_job_lock where lock_name = &#39;schedule_lock&#39; for update&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2472.5" y="115.5" width="510" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-95" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff8000&quot;&gt;执行成功，说明当前调度中心成功抢到了锁，接下来就可以执行调度任务了&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff8000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff8000&quot;&gt;当调度任务执行完之后再去关闭连接，从而释放锁&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff8000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff8000&quot;&gt;由于每次执行之前都需要去获取锁，这样就保证在调度中心集群中，同时只有一个调度中心执行调度任务&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2481.5" y="144.5" width="580" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-96" value="&lt;b&gt;由于调度中心可以是集群的形式，每个调度中心实例都有调度线程，那么如何保证任务在同一时间只会被其中的一个调度中心触发一次？&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2481.5" y="69.5" width="740" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-97" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;xxl_job_lock&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2316.5" y="159.5" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-99" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;调度线程&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cce5ff;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="2081" y="1095" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-100" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1249.5" y="1058" width="139" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-101" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1793.5" y="1006" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-102" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcccc;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1791" y="1206" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-103" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cdeb8b;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1701" y="1095" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-105" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;已经超过5秒的任务&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1793.5" y="1028" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-106" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;已经超时但在5秒内的任务&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1731" y="1103" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-107" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;5秒内即将触发的任务&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1783.5" y="1221" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-108" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="1526" y="996" width="245" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-109" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;调度过期策略&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1588.5" y="1021" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-110" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ffcc99;strokeColor=#36393d;" parent="1" vertex="1">
          <mxGeometry x="1591" y="1196" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-111" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;时间轮&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1613.5" y="1221" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-112" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.022;entryY=0.393;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeWidth=2;strokeColor=#000000;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-65" target="ANlJ96FJJQ0399WOkpuZ-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1520.5" y="55" as="sourcePoint" />
            <mxPoint x="1570.5" y="5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-131" value="Text" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ANlJ96FJJQ0399WOkpuZ-112" vertex="1" connectable="0">
          <mxGeometry x="0.054" y="-6" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-113" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;尝试加锁&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1780.5" y="240.5" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-114" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;2&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="230" y="837" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-115" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;执行成功，说明当前调度中心成功抢到了锁&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2270" y="390" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-117" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#0000FF;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-99" target="ANlJ96FJJQ0399WOkpuZ-103" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1881" y="1206" as="sourcePoint" />
            <mxPoint x="1931" y="1156" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-118" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;3&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2280" y="360" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-119" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;3&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1763.5" y="240.5" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-120" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=142.5;entryPerimeter=0;strokeWidth=2;strokeColor=#0000FF;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-99" target="ANlJ96FJJQ0399WOkpuZ-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2029" y="1404" as="sourcePoint" />
            <mxPoint x="2079" y="1354" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-121" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;查询xxl_job_info表，获取job信息&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="2020" y="450" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-123" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;strokeColor=#0000FF;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-99" target="ANlJ96FJJQ0399WOkpuZ-101" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1971" y="1306" as="sourcePoint" />
            <mxPoint x="2021" y="1256" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-124" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#0000FF;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-99" target="ANlJ96FJJQ0399WOkpuZ-102" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1971" y="1306" as="sourcePoint" />
            <mxPoint x="2021" y="1256" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-125" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;调度线程会去查询xxl_job_info这张表&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;这张表存了任务的一些基本信息和任务下一次执行的时间&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;调度线程会去查询下一次执行的时间 &amp;lt;= 当前时间 + 5s的任务&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1910" y="470" width="350" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-126" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-101" target="ANlJ96FJJQ0399WOkpuZ-108" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1971" y="1306" as="sourcePoint" />
            <mxPoint x="2021" y="1256" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-127" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;strokeWidth=2;strokeColor=#0000FF;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-102" target="ANlJ96FJJQ0399WOkpuZ-110" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1971" y="1206" as="sourcePoint" />
            <mxPoint x="2021" y="1156" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-128" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;快线程池&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1286.5" y="1076" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-129" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1268.5" y="1196" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-130" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;慢线程池&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1286.5" y="1211" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-133" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1499" y="855" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-134" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;丢弃&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1526" y="872" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-135" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;strokeColor=#0000FF;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-108" target="ANlJ96FJJQ0399WOkpuZ-133" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1260" y="1190" as="sourcePoint" />
            <mxPoint x="1310" y="1140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-136" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;strokeWidth=2;strokeColor=#0000FF;entryX=0.991;entryY=0.739;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-108" target="ANlJ96FJJQ0399WOkpuZ-149" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1260" y="1190" as="sourcePoint" />
            <mxPoint x="1487" y="983" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1520" y="1037" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-139" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.996;entryY=0.866;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;strokeColor=#0000FF;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-110" target="ANlJ96FJJQ0399WOkpuZ-37" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1260" y="1190" as="sourcePoint" />
            <mxPoint x="1510" y="1240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-140" value="" style="endArrow=classic;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1.009;entryY=0.557;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;strokeColor=#0000FF;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-103" target="ANlJ96FJJQ0399WOkpuZ-37" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1260" y="1190" as="sourcePoint" />
            <mxPoint x="1510" y="1129" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-141" value="&lt;font color=&quot;#007fff&quot;&gt;&lt;b style=&quot;&quot;&gt;在调用执行器的Http接口触发任务执行的时候，&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;font color=&quot;#007fff&quot;&gt;&lt;b style=&quot;&quot;&gt;Xxl-Job会去记录每个任务的触发所耗费的时间&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1188.5" y="1138" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-142" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;当任务一次触发的时间超过500ms，那么这个任务的慢次数就会加1&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;如果这个任务一分钟内触发的慢次数超过10次，接下来就会将触发任务交给慢线程池去执行&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;所以快慢线程池就是避免那种频繁触发并且每次触发时间还很长的任务阻塞其它任务的触发的情况发生&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1159" y="1266" width="560" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-143" value="&lt;b&gt;立即触发执行&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1493.5" y="997" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-144" value="&lt;b&gt;立即触发执行&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1509" y="1102" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-145" value="&lt;b&gt;到时触发执行&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1499" y="1206" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-146" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;4.&amp;nbsp; 选择执行器实例&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;任务需要触发的时候，调度中心会向执行器发送Http请求，执行器去执行具体的任务&amp;nbsp;&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;由于一个执行器会有很多实例，那么应该向哪个实例请求？&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;b&gt;这其实就跟任务配置时设置的路由策略有关了&lt;/b&gt;&lt;/span&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;xxljob支持多种路由策略：第一个、最后一个、轮询、随机，一致性Hash&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;最不经常使用（LFU：Least Frequently Used）：Xxl-Job内部会有一个缓存，统计每个任务每个地址的使用次数，每次都选择使用次数最少的地址，这个缓存每隔24小时重置一次&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;最近最久未使用（LRU：Least Recently Used）：将地址存到LinkedHashMap中，它利用LinkedHashMap可以根据元素访问（get/put）顺序来给元素排序的特性，快速找到最近最久未使用（未访问）的节点&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;故障转移：调度中心都会去请求每个执行器，只要能接收到响应，说明执行器正常，那么任务就会交给这个执行器去执行&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;忙碌转移：调度中心也会去请求每个执行器，判断执行器是不是正在执行当前需要执行的任务（任务执行时间过长，导致上一次任务还没执行完，下一次又触发了），如果在执行，说明忙碌，不能用，否则就可以用&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;分片广播：XxlJob给每个执行器分配一个编号，从0开始递增，然后向所有执行器触发任务，告诉每个执行器自己的编号和总共执行器的数据&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;除了分片广播，其余的具体的算法实现都是通过ExecutorRouter的实现类来实现的，当选择好了具体的执行器实例之后，调用中心就会携带一些触发的参数，发送Http请求，触发任务&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="109" y="-745" width="1180" height="170" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-147" value="" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1060" y="1051" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-148" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;ExecutorRouter&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1050" y="1066" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-149" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;xxljob支持多种路由策略：&lt;/font&gt;&lt;/b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;第一个、最后一个、轮询、随机，LFU,LRU,Failover，分片广播&amp;nbsp; &amp;nbsp;&lt;/b&gt;&lt;/font&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;具体的算法实现都是通过ExecutorRouter的实现类来实现的&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="973.5" y="1006" width="520" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-153" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;" parent="1" vertex="1">
          <mxGeometry x="515" y="1230" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-154" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="495" y="927" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-155" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bac8d3;strokeColor=#23445d;" parent="1" vertex="1">
          <mxGeometry x="535" y="1136" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-156" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fa6800;fontColor=#000000;strokeColor=#C73500;" parent="1" vertex="1">
          <mxGeometry x="535" y="1051" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-157" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;任务队列&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="550" y="1065" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-158" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;JobThread&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="545" y="1148" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-159" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;5.&amp;nbsp; 执行器如何去执行任务&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;当执行器接收到调度中心的请求时，会把请求交给ExecutorBizImpl来处理，&lt;/b&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;b&gt;执行器处理触发请求是这个ExecutorBizImpl的run方法实现的&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;b&gt;当执行器接收到请求，在正常情况下，执行器会去为这个任务创建一个单独的线程，这个线程被称为JobThread&lt;/b&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;b&gt;之后任务并不是直接交给线程处理的，而是直接放到一个内存队列中，线程直接从队列中获取任务，&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;每个任务在触发的时候都有单独的线程去执行，保证不同的任务执行互不影响&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="124" y="-575" width="760" height="110" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-160" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="1" vertex="1">
          <mxGeometry x="510" y="1300" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-161" value="&lt;b&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;XxlJobSpringExecutor&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="509" y="942" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-163" value="&lt;b&gt;（XxlJobExecutor）&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="524" y="957" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-165" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#007FFF;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-18" target="ANlJ96FJJQ0399WOkpuZ-154" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="490" y="960" as="sourcePoint" />
            <mxPoint x="540" y="910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-166" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;4&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="950" y="965" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-167" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#00008A;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-163" target="ANlJ96FJJQ0399WOkpuZ-156" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="490" y="1100" as="sourcePoint" />
            <mxPoint x="540" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-168" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;提交任务&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="594" y="1021" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-169" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#00008A;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-155" target="ANlJ96FJJQ0399WOkpuZ-156" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="490" y="1100" as="sourcePoint" />
            <mxPoint x="540" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-170" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;获取任务处理&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="600" y="1111" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-171" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;strokeWidth=2;strokeColor=#00008A;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-155" target="ANlJ96FJJQ0399WOkpuZ-18" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="490" y="1240" as="sourcePoint" />
            <mxPoint x="540" y="1190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-172" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;任务交给对应的JobHandler&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="364" y="1155" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-173" value="&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;不正常的情况下：&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;如果调度中心选择的执行器实例正在处理定时任务，&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;那么此时该怎么处理呢？**&lt;/font&gt;&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: initial;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;这时就跟阻塞处理策略有关了，&lt;/font&gt;&lt;/b&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;阻塞处理策略总共有三种：&lt;/span&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;color: rgb(255, 0, 0); background-color: initial;&quot;&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;单机串行&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;丢弃后续调度&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;覆盖之前调度&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;单机串行的实现就是将任务放到队列中，由于队列是先进先出的，所以就实现串行，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;这也是为什么放在队列的原因&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;丢弃调度的实现就是执行器什么事都不用干就可以了，自然而然任务就丢了&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;覆盖之前调度的实现就很暴力了，他是直接重新创建一个JobThread来执行任务，&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;并且尝试打断之前的正在处理任务的JobThread，丢弃之前队列中的任务&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;阻塞处理策略是对于单个执行器上的任务来生效的，不同执行器实例上的同一个任务是互不影响的&lt;/b&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="669" y="1045" width="540" height="200" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-174" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;5&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="560" y="1013" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-175" value="&lt;b&gt;6.任务执行结果的回调&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;当任务处理完成之后，执行器会将任务执行的结果发送给调度中心&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;JobThread会将任务执行的结果发送到一个内存队列中&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;执行器启动的时候会开启一个处发送任务执行结果的线程：TriggerCallbackThread&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;这个线程会不停地从队列中获取所有的执行结果，将执行结果批量发送给调度中心&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;调用中心接收到请求时，会根据执行的结果修改这次任务的执行状态和进行一些后续的事，比如失败了是否需要重试，是否有子任务需要触发等等&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="124" y="-465" width="790" height="110" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-176" value="&lt;b&gt;执行结果队列&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="530" y="1236" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-178" value="&lt;b&gt;TriggerCallbackThread&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="510" y="1315" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-179" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;获取所有的执行结果&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="435" y="1270" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-180" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;批量发送执行结果给调度中心&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="796" y="1300" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-181" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-155" target="ANlJ96FJJQ0399WOkpuZ-153" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="460" y="1220" as="sourcePoint" />
            <mxPoint x="510" y="1170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-182" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;将任务执行的结果发送到一个内存队列中&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="415" y="1200" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-183" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.518;entryY=0.973;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-160" target="ANlJ96FJJQ0399WOkpuZ-176" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="460" y="1220" as="sourcePoint" />
            <mxPoint x="510" y="1170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-184" value="" style="endArrow=classic;html=1;rounded=0;exitX=1.012;exitY=0.598;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.015;entryY=0.905;entryDx=0;entryDy=0;entryPerimeter=0;strokeWidth=2;" parent="1" source="ANlJ96FJJQ0399WOkpuZ-178" target="ANlJ96FJJQ0399WOkpuZ-37" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="460" y="1220" as="sourcePoint" />
            <mxPoint x="1190" y="1190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-185" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;6&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="550" y="1191" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-188" value="&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;XxlJobSpringExecutor&amp;nbsp;整个执行器启动的入口&amp;nbsp;&amp;nbsp;&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="565" y="902" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-189" value="&lt;span style=&quot;&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;JobHandler其实就是一个定时任务的封装&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;&lt;div style=&quot;&quot;&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;一个定时任务会对应一个JobHandler对象&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;当执行器执行任务的时候，就会调用JobHandler的execute方法&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;JobHandler有三种实现：&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;MethodJobHandler&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;GlueJobHandler&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;ScriptJobHandler&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;MethodJobHandler是通过反射来调用方法执行任务&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;GlueJobHandler比较有意思，它支持动态修改任务执行的代码&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;当你在创建任务的时候，需要指定运行模式为GLUE(Java)&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;ScriptJobHandler专门处理一些脚本的&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;初始化JobHandler就是指，执行器启动的时候会去Spring容器中找到加了@XxlJob注解的Bean&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;解析注解，然后封装成一个MethodJobHandler对象，&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;最终存到XxlJobSpringExecutor成员变量的一个本地的Map缓存中&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;b&gt;GlueJobHandler和ScriptJobHandler都是任务触发时才会创建&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: bold;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="-90" y="1103" width="530" height="330" as="geometry" />
        </mxCell>
        <mxCell id="ANlJ96FJJQ0399WOkpuZ-190" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;ExecutorBizClient的实现就是发送http请求，&lt;/font&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;所以这个实现类是在调度中心使用的，用来访问执行器提供的http接口&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1180" y="910" width="390" height="40" as="geometry" />
        </mxCell>
        <mxCell id="VdQDnjwRHH8x-FotQMhJ-3" value="&lt;b&gt;&lt;font color=&quot;#007fff&quot;&gt;注册执行器应用名，ip和端口号&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="877.5" y="420" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VdQDnjwRHH8x-FotQMhJ-4" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;1&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="862.5" y="420" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VdQDnjwRHH8x-FotQMhJ-5" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;192.168.0.102:9999&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1356" y="189.5" width="170" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="m_b_Tea2tHqbvvgrOCOL" name="Raft，Gossip，ZAB，Paxos">
    <mxGraphModel dx="1050" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="2gOlbwrTyxIljw1zl8wE" name="性能优化">
    <mxGraphModel dx="1063" dy="545" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
